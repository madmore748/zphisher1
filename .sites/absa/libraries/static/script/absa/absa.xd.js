absa.xd=absa.xd||{};absa.xd.timeout=60000;absa.xd._requests={};absa.xd.ERROR_TIMEOUT=1;absa.xd.ERROR_CONTENT=2;absa.xd.ERROR_REQUEST=3;absa.xd.makeXDRequest=function(a,g,j,i,b,e){var d=Math.round(Math.random()*10000000000000000);var c={};c.url=g+j;c.data=i;c.handler=b;absa.xd._requests[d]=c;var f=document.body.appendChild(document.createElement("iframe"));f.setAttribute("name","xdr-"+d);f.setAttribute("id","xdr-"+d);f.style.cssText="position:absolute; visibility:hidden; top:1px; left:1px; width:1px; height:1px";var h=new Date().getTime();f.src=g+"/static/xd/proxy.jsp?uniq="+h+"&url="+encodeURIComponent(g+j)+"&callback="+encodeURIComponent(a+"/static/xd/callback.html?uniq="+h+"&xdr="+d);f.contentWindow.name=encodeURIComponent(i);c._timeout=setTimeout(function(){absa.xd._onTimeout(d)},e||absa.xd.timeout)};absa.xd.callback=function(h,a){absa.xd._removeIFrame(h);var b=absa.xd._removeRequest(h);clearTimeout(b._timeout);var f={};if(decodeURIComponent(a).match(/xhrSuccess=(true|false)&xhrResponse=([\s\S]*)$/)){f.xhrSuccess=RegExp.$1;f.xhrResponse=RegExp.$2}var c=b.handler;if(typeof c=="function"){if(f.xhrSuccess=="true"){var g;try{g=JSONRequest.parse(f.xhrResponse)}catch(d){g={success:false,errorCode:absa.xd.ERROR_CONTENT,errorMessage:"Server did not respond"}}}else{g={success:false,errorCode:absa.xd.ERROR_REQUEST,errorMessage:"Server did not respond"}}c(g,h)}};absa.xd._onTimeout=function(c){absa.xd._removeIFrame(c);var a=absa.xd._removeRequest(c);var b=a.handler;if(typeof b=="function"){b({success:"false",errorCode:absa.xd.ERROR_TIMEOUT,errorMessage:"Server did not respond"},c)}};absa.xd._removeIFrame=function(b){var a=document.getElementById("xdr-"+b);a.parentNode.removeChild(a)};absa.xd._removeRequest=function(b){var a=absa.xd._requests[b];delete absa.xd._requests[b];return a};