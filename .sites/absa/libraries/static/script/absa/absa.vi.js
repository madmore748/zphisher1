absa.vi=absa.vi||{};absa.vi.setElementLabel=function(a,b){var c=bb.selector.query(a,".vi-screenreader-line");if(c){c.innerHTML=absa.vi.formatForDataType(a,b)}};absa.vi.getElementLabel=function(a){var b=bb.selector.query(a,".vi-screenreader-line");if(b){return b.innerHTML}return""};absa.vi.formatForDataType=function(b,c){if(bb.html.hasClass(b,"dataType-numberAsText")){var a=c.replace(/(\d)/g,"$1 ");if(a!=""){c=a}}return c};absa.vi.setDefaultLabels=function(j,a,h,c){if(bb.browser.ie&&bb.browser.version<=8){var g=bb.selector.queryAll(j,a);var d=h||"";var f=c||"";for(var e=0,b=g.length;e<b;e++){absa.vi.setElementLabel(g[e],"&nbsp;"+d+" "+(e+1)+" of "+b+" "+f+" ")}}};absa.vi.getLabelObject=function(a){var b=bb.selector.queryAncestor(a,".ui-form")||bb.selector.queryAncestor(a,".ui-modal-content")||bb.selector.queryAncestor(a,".ap-keypad-inputs");if(a.getAttribute("id")){return bb.selector.query(b,"*[for="+a.getAttribute("id")+"]")}};absa.vi.setInputLabel=function(d){var n=bb.selector.query(window.document,".vi-activeElement");if(n){n.removeAttribute("accesskey");bb.html.removeClass(n,"vi-activeElement")}bb.html.addClass(d,"vi-activeElement");if(d.getAttribute("type")=="hidden"){return false}var c="";var k=d.getAttribute("viLabel");var h=d.getAttribute("id");var g=absa.vi.getLabelObject(d);var l=d.value;var a=d.getAttribute("showMeHow");if(k){c=k+". "}if(bb.browser.ie){if(d.getAttribute("type")=="radio"){var m=bb.selector.queryAncestor(d,".ui-radioItem");if(m){var j=bb.selector.queryAncestor(d,".ui-radioGroup").children;if(j!=null){if(j.length>0){for(var e=0;e<j.length;e++){if(m==j[e]){break}}c=c+". "+String(e+1)+" "+absa.locale["Common/General/Label/Of"]+" "+j.length}}}}}if(bb.html.hasClass(d,"dataType-numberAsText")&&l!=""&&l[0]!==0){if(d.tagName.toLowerCase()=="select"){l=d.options[d.selectedIndex].text}else{l=d.value}c=c+". "+l.replace(/(\d)/g,"$1 ")+" ."}else{if(bb.html.hasClass(d,"dataType-textAsEmail")&&l!=""){var f=l.replace(/\./g," . dot . ");f=f.replace(/\@/g," . at . ");c+=f+". "}else{if(bb.html.hasClass(d,"dataType-numberAsDate")&&l!=""){var b=l.split("-");if(b.length==3){var f=". "+absa.locale["Common/General/Label/Year"]+". "+b[0]+". ";f+=absa.locale["Common/General/Label/Month"]+". "+b[1]+". ";f+=absa.locale["Common/General/Label/Day"]+". "+b[2]+". ";c+=f}}}}if(a){c+=". "+a}absa.vi.applyInputLabel(d,c,g)};absa.vi.applyInputLabel=function(a,f,g){if(a.getAttribute("bbf_required")=="true"){absa.vi.setState(a,"aria-required","true");if(bb.browser.ie){f+=". "+absa.locale["Common/General/Label/Required"]+". "}}if(f==null){f="-"}if(g){var d=bb.selector.query(g,".vi-screenreader-line");if(d){try{d.innerHTML=f}catch(c){}return true}else{var e='<span class="vi-screenreader-line">'+f+"</span>";g.appendChild(bb.html.createElementFromString(e))}}else{if(f!=""){if(!a.getAttribute("id")){a.setAttribute("id","id-"+parseInt(Math.random()*10000))}var b='<label class="vi-hidden" for="'+a.getAttribute("id")+'"><span class="vi-screenreader-line">'+f+"</span></label>";g=bb.html.createElementFromString(b);a.parentNode.insertBefore(g,a)}}if(g!=null){if(!g.getAttribute("id")){g.setAttribute("id","id-"+parseInt(Math.random()*10000))}a.setAttribute("aria-labelledby",g.getAttribute("id"))}};absa.vi.setState=function(a,b,c){a.setAttribute(b,c)};absa.vi.tableHeader=absa.vi.tableHeader||{};absa.vi.tableHeader.changeSortOrderLabel=function(f){var i=bb.selector.queryAncestor(f,".ui-table");var a=bb.selector.query(f,".vi-table-head-item-suffix");var g=a.innerHTML;var d="";var b=absa.locale["Common/General/Label/Descending"];var c=absa.locale["Common/General/Label/Ascending"];var h=absa.locale["Common/General/Label/None"];if(bb.html.hasClass(f,"sorted-DESC")){d=b}else{if(bb.html.hasClass(f,"sorted-ASC")){d=c}else{d=h}}var e=new RegExp(b+"|"+c+"|"+h,"i");g=g.replace(e,d);a.innerHTML=g};absa.vi.toggleAriaLabels=function(c,a){var b=c.getAttribute("viLabel");if(b){var d=b.split(" ");d.pop();d.push(c.getAttribute(a));c.setAttribute("viLabel",d.join(" "))}};absa.vi.activeElementNavigation=function(){var a=bb.selector.query(window.document,".vi-activeElement");if(a){a.focus()}else{var b=bb.selector.query(window.document,".vi-activeContent");if(b){b.focus()}}};absa.vi.addActiveContentDiv=function(c){var d=c.firstChild;var b=bb.html.createElementFromString("<div class='vi-activeContent vi-screenreader-line'><a name='section1' href='section1' accesskey='q' class='vi-screenreader-line'>You are now in the active container. Keep pressing tab until you reach the desired field or button. You may have been directed here because your focus may have been lost, or there is no active element available in this active container. You can get back to the active container by using access key q</a></div>");var a=bb.selector.query(d,".vi-activeContent");if(a){a.parentNode.removeChild(a)}d.insertBefore(b,d.firstChild)};absa.vi.isEnterButtonPressed=function(c,a,d,b){if(c.keyCode=="13"||(c.keyCode=="32")){if(!d){a()}else{if(!b){a(d)}else{a(d,b)}}}else{}};absa.vi.showSiteMap=function(){oSiteMap=bb.selector.query(window.document,".ap-vi-siteMap");oSiteMapToggle=bb.selector.query(window.document,".ap-vi-siteMapToggle");if(bb.html.hasClass(oSiteMap,"ap-common-hide")){bb.html.removeClass(oSiteMap,"ap-common-hide");oSiteMapToggle.innerHTML="Site map toggle. Press enter to hide site map, or tab to enter the site map. Access key 1 will always get you here.";var a=bb.selector.query(oSiteMap,".ap-vi-siteMapEntryPoint");a.focus()}else{bb.html.addClass(oSiteMap,"ap-common-hide");oSiteMapToggle.innerHTML="Site map toggle. Press enter to show site map. Access key 1 will always get you here.";oSiteMapToggle.blur();oSiteMapToggle.focus()}};