var portal=window.portal||{};(function(){var g=document.getElementsByTagName("script");var l=g[g.length-1];var h=l?String(l.src):"./";var m=h.substring(0,h.lastIndexOf("/"));portal.baseURI=m+"/..";portal.xml={};portal.xml.getLocalName=function(b){return b.localName||b.baseName};portal.xml.getTextContent=function(b){return b.textContent||b.text||""};portal.xml.hasAttribute=function(c,b){return c.hasAttribute?c.hasAttribute(b):function(d){return d&&d.specified}(c.attributes.getNamedItem(b))};portal.form={};function j(b,d,c){if(b[d]){if(typeof b[d]=="string"){b[d]=[b[d]]}b[d].push(c)}else{b[d]=c}}portal.form.getData=function(t){var f={},e,v,r,b,c,u,d;for(var e=0,v=t.elements.length;e<v;e++){c=t.elements[e];u=c.name;if(u&&!c.disabled){switch(c.type){case"file":case undefined:case"reset":break;case"radio":case"checkbox":if(c.checked){j(f,u,c.value)}break;case"submit":if(document.activeElement===c){j(f,u,c.value)}break;case"select-one":if(c.selectedIndex>-1){d=c.options[c.selectedIndex];j(f,u,(d.attributes.value&&d.attributes.value.specified)?d.value:(d.text||d.innerText||""))}break;case"select-multiple":if(c.selectedIndex>-1){for(r=c.selectedIndex,b=c.options.length;r<b;r++){d=c.options[r];if(d.selected){j(f,u,(d.attributes.value&&d.attributes.value.specified)?d.value:(d.text||d.innerText||""))}}}break;default:j(f,u,c.value);break}}}return f};portal.locale={};portal.getLocale=function(b){return portal.locale[b]||b};portal.version="4.2.2 (20100618-0120)";function k(c){var b=new Function;b.prototype=c.prototype;return new b}portal.gadget={};portal.gadget.Gadget=function(d,e,c,b){window[d]=this;this.identifier=d;this.loading=true;this.src=c.src;this.body=e;e.id=d;this.preferences=c.preferences;this.includes=[];this._class=c;this._window=b};portal.gadget.Gadget.prototype.body=null;portal.gadget.Gadget.prototype.identifier=null;portal.gadget.Gadget.prototype.loading=null;portal.gadget.Gadget.prototype.preferences=null;portal.gadget.Gadget.prototype.src=null;portal.gadget.Gadget.prototype.title=null;portal.gadget.Gadget.prototype.icon=null;portal.gadget.Gadget.prototype.includes=null;portal.gadget.Gadget.prototype.setTitle=function(b){return this._window.setTitle(b)};portal.gadget.Gadget.prototype.setIcon=function(b){return this._window.setIcon(b)};portal.gadget.Gadget.prototype.showLoading=function(){return this._window.showLoading()};portal.gadget.Gadget.prototype.hideLoading=function(){return this._window.hideLoading()};portal.gadget.Gadget.prototype.showPreferences=function(){return this._window.showPreferences()};portal.gadget.Gadget.prototype.hidePreferences=function(){return this._window.hidePreferences()};portal.gadget.Gadget.prototype.maximize=function(){return this._window.maximize()};portal.gadget.Gadget.prototype.minimize=function(){return this._window.minimize()};portal.gadget.Gadget.prototype.restore=function(){return this._window.restore()};portal.gadget.Gadget.prototype.setPreference=function(c,b){return this._window.setPreference(c,b)};portal.gadget.Gadget.prototype.getPreference=function(b){return this._window.getPreference(b)};portal.gadget.Gadget.prototype.setPreferenceFromElement=function(b){return this._window.setPreferenceFromElement(b)};portal.gadget.Gadget.prototype.setAutoRefresh=function(b){return this._window.setAutoRefresh(b)};portal.gadget.Gadget.prototype.registerInclude=function(b){this.includes.push(b)};portal.gadget.Gadget.prototype.refreshIncludes=function(b){var d=this.includes,c=d.length;b=b||function(){};if(c){for(var e=0;e<d.length;++e){d[e].refresh(function(){!--c&&b()})}}else{b()}};portal.gadget.Template=function(f){var e=f,b=-1,c=[],n={},d="";while((b=e.indexOf("${"))>=0){if(b!==0){c.push(e.slice(0,b));e=e.slice(b)}b=e.indexOf("}");if(b<0){throw new Error("Template instance creation failed! Reason: incomplete replacement variable definition.")}d=e.slice(2,b);if(!d){throw new Error("Template instance creation failed! Reason: empty variable definition.")}c.push("");n[d]=c.length-1;e=e.slice(b+1)}c.push(e);this._compiled=c;this._variables=n};portal.gadget.Template.prototype.generate=function(d){var e=typeof d=="function"?d:function(n){return d[n]},f=this._variables,b=this._compiled;for(var c in f){if(f.hasOwnProperty(c)){b[f[c]]=e(c)}}return b.join("")};portal.gadget.HttpParam=function(c,b,d,e){this.name=new portal.gadget.Template(c||String(portal.gadget.HttpParam.id++));this.value=new portal.gadget.Template(String(b));this.destination=d=="proxy"?"proxy":"target";this.method=e||"GET"};portal.gadget.HttpParam.id=0;portal.gadget.HttpParam.PROXY_PARAM_PREFIX="internal-";portal.gadget.HttpParam.prototype.toQueryString=function(b){return encodeURIComponent(this.getName(b))+"="+encodeURIComponent(this.getValue(b))};portal.gadget.HttpParam.prototype.getName=function(c){function b(e){return c.getPreference(e)}var d=this.name.generate(b);if(this.destination=="proxy"&&this.method=="POST"){d=portal.gadget.HttpParam.PROXY_PARAM_PREFIX+d}return d};portal.gadget.HttpParam.prototype.getValue=function(c){function b(d){return c.getPreference(d)}return this.value.generate(b)};portal.gadget.HttpPreferenceParam=function(b,c){portal.gadget.HttpParam.call(this,b,"","target",c)};portal.gadget.HttpPreferenceParam.prototype=k(portal.gadget.HttpParam);portal.gadget.HttpPreferenceParam.prototype.getValue=function(b){return b.getPreference(this.getName(b))};portal.gadget.HttpPreferenceParam.prototype.toQueryString=function(b){var c=[];var f=this.getValue(b).split(",");var e=encodeURIComponent(this.getName(b))+"=";for(var d=0;d<f.length;d++){c.push(e+encodeURIComponent(f[d]))}return c.join("&")};portal.gadget.HttpParams=function(){this._params=[]};portal.gadget.HttpParams.prototype.add=function(b){if(b instanceof portal.gadget.HttpParam){this._params.push(b)}else{throw new Error("Attempt to add not an HttpParam instance to HttpParams collection!")}};portal.gadget.HttpParams.prototype.toQueryString=function(c,n,e){var d=this._params,b=[],f=null;for(var o=0;o<d.length;++o){f=d[o];if(f.method==n&&(!e||f.destination==e)){b.push(f.toQueryString(c))}}return b.join("&")};portal.gadget.HttpParams.prototype.toJSONObject=function(f,d,b){var u=this._params,e={},v=null,r=null;for(var t=0;t<u.length;++t){v=u[t];if(v.method==d&&(!b||v.destination==b)){var q=v.getName(f);var c=v.getValue(f);if(!e[q]){e[q]=c}else{if(typeof e[q]=="string"){e[q]=[e[q],c]}else{e[q].push(c)}}}}return e};portal.gadget.IncludeConfig=function(o){var d=o.url,q=d.match(/([^\?]*)\??([^\?]*)/);this.url=new portal.gadget.Template(q[1]);this.proxy=o.proxy;this.method=o.method;var e=q[2],c=e?e.split("&"):[],b=null,f=new portal.gadget.HttpParams();for(var p=0;p<c.length;++p){b=c[p].split("=");if(b[1]){f.add(new portal.gadget.HttpParam(b.shift(),b.join("="),"target","GET"))}}this.httpParams=f};portal.gadget.IncludeConfig.CSS_CLASS="p-include";portal.gadget.Include=function(d,c,b){if(!(d instanceof portal.gadget.Gadget)){throw new Error("Not a portal.gadget instance passed to portal.gadget.Include!")}if(!c||c.nodeType!=1){throw new Error("Incorrect view gate was passed to portal.gadget.Include!")}if(!(b instanceof portal.gadget.IncludeConfig)){throw new Error("Not a portal.gadget.IncludeConfig instance passed to portal.gadget.Include!")}this.gadget=d;this.viewGate=c;this.config=b};portal.gadget.Include.setTitleFromHttpHeader=false;portal.gadget.Include.prototype.setContent=function(b,d){var c=this.viewGate;while(c.firstChild){c.removeChild(c.firstChild)}if(d){while(b.firstChild){c.appendChild(b.firstChild)}}else{c.appendChild(b)}};portal.gadget.Include.prototype.refresh=function(c){function b(p){return o.getPreference(p)}c=c||function(){};var n=this,o=this.gadget,e=this.config.httpParams,f=e.toQueryString(o,"GET","target"),d=this.config.url.generate(b);if(!this.config.proxy){d=bb.uri.resolveUri(d,o.src)}d=d+(f?(d.indexOf("?")!=-1?"&":"?")+f:"");if(this.config.proxy){d=gadgets.io.getProxyUrl(d,e.toJSONObject(o,"GET","proxy"))}gadgets.io.makeRequest(d,function(r){if(portal.gadget.Include.setTitleFromHttpHeader){var t=r.getHeader("X-BB-Portal-Title");if(t){o.setTitle(t)}else{var q=o._class;o.setTitle(q.title||"")}}n.setContent(bb.html.createElementFromString("<div>"+r.text+"</div>"),true);c.call(o,r)},{method:this.config.method,headers:{Referer:o.src},data:this.config.method=="POST"?e.toQueryString(o,"POST"):""})}})();var gadgets=window.gadgets||{};if(!gadgets.config){gadgets.config={proxyUrl:"proxy"}}if(window.portal){gadgets.config.proxyUrl=portal.baseURI+"/"+gadgets.config.proxyUrl}gadgets.io=function(){return{encodeValues:function(g){var h=[],j;for(var k in g){if(g.hasOwnProperty(k)){j=g[k];if(typeof j=="object"&&j.length){for(var f=0;f<j.length;f++){h.push(encodeURIComponent(k),"=",encodeURIComponent(j[f]),"&")}}else{h.push(encodeURIComponent(k),"=",encodeURIComponent(j),"&")}}}return h.join("")},getProxyUrl:function(d,c){c=c||{};if(d){c.url=d}return gadgets.config.proxyUrl+(gadgets.config.proxyUrl.indexOf("?")==-1?"?":"&")+gadgets.io.encodeValues(c)},makeRequest:function(r,l,q){q=q||{};var t=q[gadgets.io.RequestParameters.METHOD]||gadgets.io.MethodType.GET;var p=q[gadgets.io.RequestParameters.HEADERS]||{};var n=q[gadgets.io.RequestParameters.POST_DATA]||null;var m=q[gadgets.io.RequestParameters.TIMEOUT]||30000;if(t===gadgets.io.MethodType.POST&&!p["Content-Type"]&&n){p["Content-Type"]="application/x-www-form-urlencoded"}var k=new XMLHttpRequest();k.open(t,r,true);for(var o in p){if(p.hasOwnProperty(o)){k.setRequestHeader(o,p[o])}}if(m){if(typeof m!="number"){m=parseInt(m,10)}m=setTimeout(function(){k.abort()},m)}k.onreadystatechange=function(){if(k.readyState==2){k._headersReceived=true}if(k.readyState==4){if(m){clearTimeout(m)}if(l){var f={text:k.responseText,data:null,errors:[],status:k.status,headers:{}};var b=k._headersReceived?String(k.getAllResponseHeaders()).split("\n"):[];for(var d=0;d<b.length;d++){var e=bb.string.trim(b[d]).split(": ");if(e.length>1){f.headers[e.shift()]=e.join(": ")}}f.getHeader=function(h){h=(h||"").toLowerCase();for(var g in this.headers){if(this.headers.hasOwnProperty(g)){if((g||"").toLowerCase()==h){return this.headers[g]}}}return null};if(bb.browser.opera&&!k.status){k.status=204;k.statusText="No Content"}if((!k.status&&(location.protocol=="file:"||location.protocol=="chrome:"))||(k.status>=200&&k.status<300)||k.status==304||k.status==1223){switch(q[gadgets.io.RequestParameters.CONTENT_TYPE]){case gadgets.io.ContentType.DOM:f.data=k.responseXML;break;case gadgets.io.ContentType.JSON:try{f.data=gadgets.json.parse(k.responseText)}catch(c){f.errors[f.errors.length]=c.message||c}break;case gadgets.io.ContentType.FEED:f.errors[f.errors.length]="Not implemented";break;case gadgets.io.ContentType.TEXT:default:f.data=k.responseText;break}}else{if(k.status==0){f.errors[f.errors.length]="No connection to server"}else{f.errors[f.errors.length]="HTTP error:"+k.status;if(k.statusText){f.errors[f.errors.length]=k.statusText}}}l(f)}}};k.send(n);return k}}}();gadgets.io.RequestParameters={METHOD:"method",CONTENT_TYPE:"type",POST_DATA:"data",HEADERS:"headers",AUTHORIZATION:"authorization",NUM_ENTRIES:"NUM_ENTRIES",GET_SUMMARIES:"GET_SUMMARIES",TIMEOUT:"timeout"};gadgets.io.MethodType={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",HEAD:"HEAD"};gadgets.io.ContentType={TEXT:"text",DOM:"xml",JSON:"json",FEED:"feed"};gadgets.io.AuthorizationType={NONE:"NONE",SIGNED:"SIGNED",OAUTH:"OAUTH"};gadgets.io.ProxyUrlRequestParameters={REFRESH_INTERVAL:"refresh",BACKBASE_PTC_PIPE:"pipe"};if(!this.JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();gadgets.json=function(){return{stringify:JSON.stringify,parse:function(c){c=c.replace(/\\x(..)/g,"\\u00$1");try{c=JSON.parse(c)}catch(d){d.message+=". Source: "+c;throw d}return c}}}();gadgets.pubsub=function(){return{publish:function(e,f){var d=bb.document.createEvent("CustomEvent");d.initCustomEventNS("gadgets.pubsub",e,false,false,f);bb.document.dispatchEvent(d)},subscribe:function(d,c){c._subscribeEvent=function(b){c(b.detail)};bb.document.addEventListenerNS("gadgets.pubsub",d,c._subscribeEvent,false)},unsubscribe:function(d,c){bb.document.removeEventListenerNS("gadgets.pubsub",d,c._subscribeEvent,false);c._subscribeEvent=null}}}();gadgets.util=function(){function g(c){var b;var d=c;var k=d.indexOf("?");var j=d.indexOf("#");if(j===-1){b=d.substr(k+1)}else{b=[d.substr(k+1,j-k-1),"&",d.substr(j+1)].join("")}return b.split("&")}var h=null;var f={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true};function e(c,b){return String.fromCharCode(b)}return{getUrlParameters:function(b){if(h!==null&&typeof b==="undefined"){return h}var p={};h={};var t=g(b||document.location.href);var d=window.decodeURIComponent?decodeURIComponent:unescape;for(var q=0,r=t.length;q<r;++q){var j=t[q].indexOf("=");if(j===-1){continue}var u=t[q].substring(0,j);var c=t[q].substring(j+1);c=c.replace(/\+/g," ");p[u]=d(c)}if(typeof b==="undefined"){h=p}return p},escapeString:function(c){if(!c){return c}var m=[],d,b;for(var j=0,n=c.length;j<n;++j){d=c.charCodeAt(j);b=f[d];if(b===true){m.push("&#",d,";")}else{if(b!==false){m.push(c.charAt(j))}}}return m.join("")},unescapeString:function(b){if(!b){return b}return b.replace(/&#([0-9]+);/g,e)}}}();gadgets.util.getUrlParameters();bb.preRegisterXMLString('<d:tdl xmlns:d="http://www.backbase.com/2006/tdl" xmlns:xi="http://www.w3.org/2001/XInclude" xml:base=""><d:tdl xmlns="http://www.w3.org/1999/xhtml" xmlns:xs="http://www.w3.org/2001/XMLSchema" xml:base="../bcf/4_4_9_1/bindings/www.w3.org.1999.xhtml/xhtml.xml"><d:namespace name="http://www.w3.org/1999/xhtml"><d:element name="xhtmlElement" abstract="true"><d:resource type="text/javascript">xhtml={namespaceURI:"http://www.w3.org/1999/xhtml",handlers:{ieclick:function(){var a=bb.getControllerFromView(this);if(this.type=="radio"&amp;&amp;!a.hasAttribute("name")){this.checked=true;}if(a.__oldChecked!=this.checked){bb.command.fireEvent(a,"change",true,false);a.__oldChecked=this.checked;}},iefocusin:function(){bb.getControllerFromView(this).__oldChecked=this.checked;},change:function(){bb.command.fireEvent(bb.getControllerFromView(this),"change",true,false);},select:function(){bb.command.fireEvent(bb.getControllerFromView(this),"select",true,false);},submit:function(d){d=d||event;var c=bb.getControllerFromView(this);var a=true;try{a=!bb.command.fireEvent(c,"submit",true,true).defaultPrevented;}catch(b){a=false;}if(!a){if(d.preventDefault){d.preventDefault();}d.returnValue=false;return false;}},reset:function(){var c=bb.getControllerFromView(this);if(!bb.command.fireEvent(c,"reset",true,false).defaultPrevented&amp;&amp;(bb.browser.gecko||bb.browser.webkit)){var a=c.viewNode.getElementsByTagName("form");for(var b=a.length-1;b&gt;=0;b--){a[b].reset();}}},select_focusHandler:function(){var a=bb.getControllerFromView(this);a._._initialValue=this.value;},select_blurHandler:function(){var a=bb.getControllerFromView(this);if(a._._initialValue!=this.value){xhtml.handlers.change.call(this);}},select_clickHandler:function(){var a=bb.getControllerFromView(this);a._._mouseClick=true;},select_keydownHandler:function(){var a=bb.getControllerFromView(this);a._._mouseClick=false;},select_changeHandler:function(){var a=bb.getControllerFromView(this);if(a._._mouseClick){a._._initialValue=this.value;xhtml.handlers.change.call(this);}}}};</d:resource><d:attribute name="id" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="class" onmap="if(bb.browser.ie){ this.viewNode.className = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="title" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="lang" namespace="http://www.w3.org/XML/1998/namespace" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="dir" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="style" onmap="if(bb.browser.ie){ this.viewNode.style.cssText = value; }else{ this.viewNode.setAttribute(name, value) }"/><d:template type="text/javascript">var a=document.createElement(this.modelNode.localName||this.modelNode.baseName);return[a,a];</d:template></d:element><d:element name="xhtmlFocusableElement" extends="xhtmlElement" abstract="true"><d:attribute name="accesskey" onmap="if(bb.browser.ie){ this.viewNode.accessKey = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="tabindex" onmap="if(bb.browser.ie){ this.viewNode.tabIndex = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:method name="focus"><d:body type="text/javascript">if(this.viewNode&amp;&amp;this.viewNode.focus){this.viewNode.focus();}</d:body></d:method><d:method name="blur"><d:body type="text/javascript">if(this.viewNode&amp;&amp;this.viewNode.blur){this.viewNode.blur();}</d:body></d:method></d:element><d:element name="body" extends="xhtmlElement"/><d:element name="head"><d:attribute name="profile"/></d:element><d:element name="html"><d:attribute name="version"/><d:attribute name="xmlns"/></d:element><d:element name="title"/><d:element name="address" extends="xhtmlElement"/><d:element name="blockquote" extends="xhtmlElement"><d:attribute name="cite" onmap="this.viewNode.setAttribute(name, value)"/></d:element><d:element name="div" extends="xhtmlElement"/><d:element name="p" extends="xhtmlElement"/><d:element name="pre" extends="xhtmlElement"><d:attribute name="space" namespace="http://www.w3.org/XML/1998/namespace" default="preserve" onmap="this.viewNode.setAttribute(name, value)"/></d:element><d:element name="abbr" extends="xhtmlElement"/><d:element name="acronym" extends="xhtmlElement"/><d:element name="br" extends="xhtmlElement"/><d:element name="cite" extends="xhtmlElement"/><d:element name="code" extends="xhtmlElement"/><d:element name="dfn" extends="xhtmlElement"/><d:element name="em" extends="xhtmlElement"/><d:element name="kbd" extends="xhtmlElement"/><d:element name="q" extends="xhtmlElement"><d:attribute name="cite" onmap="this.viewNode.setAttribute(name, value)"/></d:element><d:element name="samp" extends="xhtmlElement"/><d:element name="span" extends="xhtmlElement"/><d:element name="strong" extends="xhtmlElement"/><d:element name="var" extends="xhtmlElement"/><d:element name="h1" extends="xhtmlElement"/><d:element name="h2" extends="xhtmlElement"/><d:element name="h3" extends="xhtmlElement"/><d:element name="h4" extends="xhtmlElement"/><d:element name="h5" extends="xhtmlElement"/><d:element name="h6" extends="xhtmlElement"/><d:element name="a" extends="xhtmlFocusableElement"><d:attribute name="charset" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="href"><d:mapper type="text/javascript">var a;if(bb.browser.ie&amp;&amp;this.viewNode.childNodes.length==1&amp;&amp;(a=this.viewNode.firstChild).nodeType==3&amp;&amp;a.nodeValue.indexOf("@")!=-1){this.viewNode.removeChild(a);this.viewNode.href=this.getProperty(name);this.viewNode.appendChild(a);}else{this.viewNode.href=this.getProperty(name);}</d:mapper></d:attribute><d:attribute name="hreflang" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="rel" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="rev" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="type" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="target" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value);"/><d:template type="text/javascript">var b=document.createElement("a");if(bb.browser.ie){var a=this.modelNode.getAttribute("coords");var c=this.modelNode.getAttribute("shape");if(a!=null&amp;&amp;c!=null){b=document.createElement(\'&lt;a shape="\'+c+\'" coords="\'+a+\'"&gt;\');}}return[b,b];</d:template><d:attribute name="coords" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="shape" onmap="this.viewNode.setAttribute(name, value)"/><d:property name="href" onget="return bb.uri.resolveUri( this.getAttribute(name), this.getProperty(\'baseURI\') );" onset="this.setAttribute(name,  value);"/></d:element><d:element name="dl" extends="xhtmlElement"/><d:element name="dt" extends="xhtmlElement"/><d:element name="dd" extends="xhtmlElement"/><d:element name="ol" extends="xhtmlElement"/><d:element name="ul" extends="xhtmlElement"/><d:element name="li" extends="xhtmlElement"/><d:element name="b" extends="xhtmlElement"/><d:element name="big" extends="xhtmlElement"/><d:element name="hr" extends="xhtmlElement"/><d:element name="i" extends="xhtmlElement"/><d:element name="small" extends="xhtmlElement"/><d:element name="sub" extends="xhtmlElement"/><d:element name="sup" extends="xhtmlElement"/><d:element name="tt" extends="xhtmlElement"/><d:element name="edit" extends="xhtmlElement" abstract="true"><d:attribute name="cite" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="datetime" onmap="if(bb.browser.ie){ this.viewNode.dateTime = value; }else{ this.viewNode.setAttribute(name, value); }"/></d:element><d:element name="ins" extends="edit"/><d:element name="del" extends="edit"/><d:element name="bdo" extends="xhtmlElement"/><d:element name="form" extends="xhtmlElement"><d:template type="text/javascript">var a=bb.browser.ie?document.createElement(\'&lt;form name="\'+this.modelNode.getAttribute("name")+\'"&gt;\'):document.createElement("form");return[a,a];</d:template><d:constructor type="text/javascript">bb.html.addEventListener(this.viewNode,"submit",xhtml.handlers.submit);bb.html.addEventListener(this.viewNode,"reset",xhtml.handlers.reset);</d:constructor><d:destructor type="text/javascript">bb.html.removeEventListener(this.viewNode,"submit",xhtml.handlers.submit);bb.html.removeEventListener(this.viewNode,"reset",xhtml.handlers.reset);if(bb.browser.ie){this.viewNode.removeNode();}</d:destructor><d:attribute name="accept" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="accept-charset" onmap="if(bb.browser.ie){this.viewNode.acceptCharset = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="action" onmap="this.viewNode.action = this.getProperty(name);"/><d:attribute name="method" onmap="this.viewNode.setAttribute(name, value)" default="GET"/><d:attribute name="enctype" onmap="if(bb.browser.ie) this.viewNode.encoding = value; this.viewNode[name] = value;" default="application/x-www-form-urlencoded"/><d:attribute name="target" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="autocomplete" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="mode" default="replaceChildren"/><d:property name="action" onget="return bb.uri.resolveUri(this.getAttribute(name), this.getProperty(\'baseURI\') );" onset="this.setAttribute(name,  value);"/><d:property name="method" onget="return this.viewNode[name].toUpperCase();" onset="this.setAttribute(name,  value);"/><d:property name="enctype" onget="return this.viewNode[name];" onset="this.setAttribute(name,  value);"/><d:property name="elements"><d:getter type="text/javascript">var b=this.viewNode.elements;var c=[];for(var a=0;a&lt;b.length;a++){c.push(bb.getControllerFromView(b[a]));}return c;</d:getter></d:property><d:method name="submit"><d:body type="text/javascript">this.viewNode.submit();</d:body></d:method></d:element><d:element name="xhtmlControlElement" extends="xhtmlFocusableElement" abstract="true"><d:template type="text/javascript">var a=document.createElement(this.modelNode.localName||this.modelNode.baseName);return[a,a];</d:template><d:attribute name="name" onmap="this.viewNode.name = value"/><d:attribute name="disabled" onmap="this.viewNode.disabled = value == name"/><d:attribute name="autocomplete" onmap="this.viewNode.setAttribute(name, value);"/><d:property name="form" onget="return this.viewNode[name] ? bb.getControllerFromView(this.viewNode[name]) : null;"/><d:property name="disabled" onget="return this.viewNode[name];" onset="this.viewNode[name] = value;"/><d:property name="name" onget="return this.viewNode[name];" onset="this.viewNode[name] = value;"/><d:property name="value" onget="return this.viewNode[name];" onset="this.viewNode[name] = value;"/><d:property name="type" onget="return this.viewNode[name];" onset="this.viewNode[name] = value;"/></d:element><d:element name="input" extends="xhtmlControlElement"><d:resource type="text/javascript">xhtml.input={DOMActivateTypes:{radio:true,checkbox:true,button:true,submit:true,reset:true}};</d:resource><d:method name="__children"><d:body type="text/javascript"/></d:method><d:template type="text/javascript">var e;if(bb.browser.ie){var d="&lt;input ";var c=0,b,a=this.modelNode.attributes;while(b=a[c++]){if(b.nodeName.indexOf("on")!=0){d+=b.nodeName+\'="\'+bb.string.escapeXml(b.nodeValue)+\'" \';}}d+="/&gt;";e=bb.html.createElementFromString(d);}else{e=document.createElement("input");}return[e,e];</d:template><d:constructor type="text/javascript">if(bb.browser.ie&amp;&amp;(this.viewNode.type=="checkbox"||this.viewNode.type=="radio")){bb.html.addEventListener(this.viewNode,"focusin",xhtml.handlers.iefocusin);bb.html.addEventListener(this.viewNode,"click",xhtml.handlers.ieclick);}else{bb.html.addEventListener(this.viewNode,"change",xhtml.handlers.change);}bb.html.addEventListener(this.viewNode,"select",xhtml.handlers.select);</d:constructor><d:destructor type="text/javascript">bb.html.removeEventListener(this.viewNode,"change",xhtml.handlers.change);bb.html.removeEventListener(this.viewNode,"select",xhtml.handlers.select);</d:destructor><d:attribute name="accept" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="alt" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="checked" onmap="this.viewNode.defaultChecked = value == name;"/><d:attribute name="maxlength" onmap="this.viewNode.maxLength = value;"/><d:attribute name="readonly" onmap="this.viewNode.readOnly = value == name;"/><d:attribute name="size" onmap="this.viewNode.size = value;"/><d:attribute name="src" onmap="this.viewNode.src = this.getProperty(name);"/><d:attribute name="type" default="text" onmap="this.viewNode.type = value"/><d:attribute name="value" onmap="this.viewNode.defaultValue = value;"/><d:attribute name="ismap" onmap="this.viewNode.isMap = value == name;"/><d:attribute name="usemap" onmap="if(bb.browser.ie){ this.viewNode.useMap = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:property name="src" onget="return bb.uri.resolveUri(this.getAttribute(name), this.getProperty(\'baseURI\') );" onset="this.setAttribute(name,  value);"/><d:property name="value" onget="return this.viewNode[name];" onset="this.viewNode[name] = value;"/><d:property name="checked" onget="return this.viewNode[name];" onset="this.viewNode[name] = value;"/><d:handler event="click" type="text/javascript">if(this.getProperty("type") in xhtml.input.DOMActivateTypes){var a=bb.document.createEvent("UIEvents");a.initUIEvent("DOMActivate",true,true,window,event.detail);if(!this.dispatchEvent(a)){event.preventDefault();}}</d:handler></d:element><d:element name="textarea" extends="xhtmlControlElement"><d:attribute name="accesskey" onmap="if(bb.browser.ie){ this.viewNode.accessKey = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="cols" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="readonly" onmap="this.viewNode.readOnly = value == name;"/><d:attribute name="rows" onmap="this.viewNode.setAttribute(name, value)"/><d:method name="__children"><d:body type="text/javascript"/></d:method><d:constructor type="text/javascript">var a=this.getProperty("textContent");this.viewNode.defaultValue=a;this.viewNode.value=a;bb.html.addEventListener(this.viewNode,"change",xhtml.handlers.change);bb.html.addEventListener(this.viewNode,"select",xhtml.handlers.select);</d:constructor><d:destructor type="text/javascript">bb.html.removeEventListener(this.viewNode,"change",xhtml.handlers.change);bb.html.removeEventListener(this.viewNode,"select",xhtml.handlers.select);</d:destructor></d:element><d:element name="select" extends="xhtmlControlElement"><d:template type="text/javascript">var e;if(bb.browser.ie){var d="&lt;select ";var c=0,b,a=this.modelNode.attributes;while(b=a[c++]){if(b.nodeName.indexOf("on")!=0){d+=b.nodeName+\'="\'+b.nodeValue+\'" \';}}d+="&gt;&lt;/select&gt;";e=bb.html.createElementFromString(d);}else{e=document.createElement("select");e.multiple=this.modelNode.getAttribute("multiple")=="multiple";}return[e,e];</d:template><d:constructor type="text/javascript">if(bb.browser.ie||bb.browser.opera){bb.html.addEventListener(this.viewNode,"focus",xhtml.handlers.select_focusHandler);bb.html.addEventListener(this.viewNode,"blur",xhtml.handlers.select_blurHandler);bb.html.addEventListener(this.viewNode,"click",xhtml.handlers.select_clickHandler);bb.html.addEventListener(this.viewNode,"keydown",xhtml.handlers.select_keydownHandler);bb.html.addEventListener(this.viewNode,"change",xhtml.handlers.select_changeHandler);}else{bb.html.addEventListener(this.viewNode,"change",xhtml.handlers.change);}</d:constructor><d:destructor type="text/javascript">if(bb.browser.ie||bb.browser.opera){bb.html.removeEventListener(this.viewNode,"focus",xhtml.handlers.select_focusHandler);bb.html.removeEventListener(this.viewNode,"blur",xhtml.handlers.select_blurHandler);bb.html.removeEventListener(this.viewNode,"click",xhtml.handlers.select_clickHandler);bb.html.removeEventListener(this.viewNode,"keydown",xhtml.handlers.select_keydownHandler);bb.html.removeEventListener(this.viewNode,"change",xhtml.handlers.select_changeHandler);}else{bb.html.removeEventListener(this.viewNode,"change",xhtml.handlers.change);}</d:destructor><d:attribute name="size" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="multiple" onmap="this.viewNode.multiple = value == name;"/><d:property name="type" onget="return this.viewNode[name];" onset="this.setAttribute(name,  value)"/><d:property name="value" onget="return this.viewNode[name];" onset="this.viewNode[name] = value;"/><d:property name="multiple" onget="return this.viewNode[name];" onset="this.setAttribute(name,  value)"/><d:property name="selectedIndex" onget="return this.viewNode[name];" onset="this.viewNode[name] = value;"/><d:property name="options"><d:getter type="text/javascript">var a=this.viewNode.options;var c=[];for(var b=0;b&lt;a.length;b++){c.push(bb.getControllerFromView(a[b]));}return c;</d:getter></d:property><d:method name="blur"><d:body type="text/javascript">if(this.viewNode&amp;&amp;this.viewNode.blur){this.viewNode.blur();}if(bb.browser.ie){document.body.focus();}</d:body></d:method><d:handler event="DOMNodeInserted" type="text/javascript">if(bb.browser.ie&amp;&amp;bb.browser.version==7){var a=this.viewNode.style.width;if(!a||a=="auto"){this.viewNode.style.width="auto";}}</d:handler></d:element><d:element name="option" extends="xhtmlElement"><d:template type="text/javascript">var b=document.createElement(this.modelNode.localName||this.modelNode.baseName);var a=this.modelNode.getAttribute("selected");if(a=="selected"||a=="true"){b.defaultSelected=true;}return[b,b];</d:template><d:attribute name="disabled" onmap="this.viewNode.disabled = value == name"/><d:attribute name="label" onmap="if(bb.browser.ie){ this.viewNode.text = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="selected" onmap="this.viewNode.selected = value == name"/><d:attribute name="value" onmap="this.viewNode.setAttribute(name, value)"/><d:property name="disabled" onget="return this.viewNode[name];" onset="this.viewNode[name] = value"/><d:property name="selected" onget="return this.viewNode[name];" onset="this.viewNode[name] = value"/><d:property name="value" onget="return this.viewNode[name];" onset="this.viewNode[name] = value"/><d:constructor type="text/javascript">if(bb.browser.ie&amp;&amp;!this.hasAttribute("value")){this.viewNode.value=this.getProperty("textContent");}</d:constructor><d:handler event="DOMCharacterDataModified" type="text/javascript">if(bb.browser.ie&amp;&amp;!this.hasAttribute("value")){this.viewNode.value=this.getProperty("textContent");}</d:handler><d:handler event="click" type="text/javascript">var a=bb.document.createEvent("UIEvents");a.initUIEvent("DOMActivate",true,true,window,event.detail);if(!this.dispatchEvent(a)){event.preventDefault();}</d:handler></d:element><d:element name="button" extends="xhtmlControlElement"><d:template type="text/javascript">var a;if(bb.browser.ie){a=document.createElement(\'&lt;button type="\'+this.getAttribute("type")+\'" name="\'+(this.modelNode.getAttribute("name")||"")+\'" value="\'+(this.modelNode.getAttribute("value")||"")+\'"&gt;\');}else{a=document.createElement("button");}return[a,a];</d:template><d:attribute name="type" default="submit" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="value"><d:mapper type="text/javascript">if(!bb.browser.ie){this.viewNode.setAttribute(name,value);}</d:mapper></d:attribute><d:property name="type" onget="return this.viewNode[name];" onset="this.setAttribute(name,  value)"/><d:property name="value"><d:getter type="text/javascript">if(!bb.browser.ie){return this.viewNode[name];}else{return this.modelNode.getAttribute("value")||"";}</d:getter><d:setter type="text/javascript">if(!bb.browser.ie){this.viewNode[name]=value;}else{this.modelNode.setAttribute("value",value);}</d:setter></d:property><d:handler event="click" type="text/javascript">var a=bb.document.createEvent("UIEvents");a.initUIEvent("DOMActivate",true,true,window,event.detail);if(!this.dispatchEvent(a)){event.preventDefault();}</d:handler></d:element><d:element name="fieldset" extends="xhtmlElement"/><d:element name="label" extends="xhtmlElement"><d:attribute name="accesskey" onmap="if(bb.browser.ie){ this.viewNode.accessKey = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="for" onmap="if(bb.browser.ie){ this.viewNode.htmlFor = value; }else{ this.viewNode.setAttribute(name, value); }"/></d:element><d:element name="legend" extends="xhtmlElement"><d:attribute name="accesskey" onmap="if(bb.browser.ie){ this.viewNode.accessKey = value; }else{ this.viewNode.setAttribute(name, value); }"/></d:element><d:element name="optgroup" extends="xhtmlElement"><d:attribute name="disabled" onmap="this.viewNode.disabled = value == name;"/><d:attribute name="label" onmap="this.viewNode.setAttribute(name, value)"/></d:element><d:element name="table" extends="xhtmlElement"><d:attribute name="border" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="cellpadding" onmap="if(bb.browser.ie){ this.viewNode.cellPadding = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="cellspacing" onmap="if(bb.browser.ie){ this.viewNode.cellSpacing = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="frame" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="rules" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="summary" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="width" onmap="this.viewNode.setAttribute(name, value)"/></d:element><d:element name="tableChild" extends="xhtmlElement" abstract="true"><d:attribute name="align" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="char" onmap="if(bb.browser.ie){ this.viewNode.ch = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="charoff" onmap="if(bb.browser.ie){ this.viewNode.chOff = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="valign" onmap="if(bb.browser.ie){ this.viewNode.vAlign = value; }else{ this.viewNode.setAttribute(name, value); }"/></d:element><d:element name="caption" extends="xhtmlElement"/><d:element name="tableCol" extends="tableChild" abstract="true"><d:attribute name="span" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="width" onmap="this.viewNode.setAttribute(name, value)"/></d:element><d:element name="colgroup" extends="tableCol"/><d:element name="col" extends="tableCol"><d:template type="text/javascript">var c=document.createElement("col");var a=c;var b=this.getProperty("parentNode");if(bb.browser.ie&amp;&amp;b&amp;&amp;b.getProperty("localName")!="colgroup"){c=document.createElement(\'&lt;col span="\'+this.modelNode.getAttribute("span")+\'"&gt;\');a=document.createElement("colgroup");a.appendChild(c);}return[a,c];</d:template></d:element><d:element name="tr" extends="tableChild"><d:template type="text/javascript">var b=document.createElement("tr");if(bb.browser.ie){var a=this.getProperty("parentNode");if(a&amp;&amp;a.viewGate&amp;&amp;a.viewGate.nodeName=="TABLE"){if(!a.viewGate.tBodies[0]){a.viewGate.appendChild(document.createElement("tbody"));}a.viewGate=a.viewGate.tBodies[0];}}return[b,b];</d:template></d:element><d:element name="tbody" extends="tableChild"/><d:element name="thead" extends="tableChild"/><d:element name="tfoot" extends="tableChild"/><d:element name="tableCell" extends="tableChild" abstract="true"><d:attribute name="abbr" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="axis" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="colspan" onmap="if(bb.browser.ie){ this.viewNode.colSpan = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="headers" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="rowspan" onmap="if(bb.browser.ie){ this.viewNode.rowSpan = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="scope" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="width" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="height" onmap="this.viewNode.setAttribute(name, value)"/></d:element><d:element name="th" extends="tableCell"/><d:element name="td" extends="tableCell"/><d:element name="img" extends="xhtmlElement"><d:template type="text/javascript">var b;var a=b=document.createElement("img");if(bb.browser.ie){b=document.createElement("span");}return[a,b];</d:template><d:attribute name="alt" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="height"><d:mapper type="text/javascript">if(bb.browser.ie){this.viewNode.style.height=value;}else{this.viewNode.setAttribute(name,value);}if(this.modelNode.getAttribute("width")==null){this.setAttribute("width",value);}</d:mapper></d:attribute><d:attribute name="longdesc" onmap="if(bb.browser.ie){ this.viewNode.longDesc = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="src" onchange="this.viewNode.src = this.getProperty(name);"/><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript">if(this.hasAttribute("src")){if(bb.browser.ie&amp;&amp;bb.browser.version&lt;7){var a=this;setTimeout(function(){if(a.viewNode){a.viewNode.src=a.getProperty("src");}});}else{this.viewNode.src=this.getProperty("src");}}</d:handler><d:attribute name="width"><d:mapper type="text/javascript">if(bb.browser.ie){this.viewNode.style.width=value;}else{this.viewNode.setAttribute(name,value);}if(this.modelNode.getAttribute("height")==null){this.setAttribute("height",value);}</d:mapper></d:attribute><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="ismap" onmap="if(bb.browser.ie){ this.viewNode.isMap = (value == name); }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="usemap" onmap="if(bb.browser.ie){ this.viewNode.useMap = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:property name="src" onget="return bb.uri.resolveUri(this.getAttribute(name), this.getProperty(\'baseURI\'));" onset="this.setAttribute(name,  value);"/></d:element><d:element name="object" extends="xhtmlFocusableElement"><d:template type="text/javascript">var c=this.modelNode.cloneNode(true),a,b=0;while(a=c.attributes[b++]){if(a.nodeName.indexOf("on")==0){c.removeAttribute(a.nodeName);}}var d=bb.html.createElementFromString(bb.xml.serialize(c));return[d,d];</d:template><d:attribute name="archive" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="classid" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="codebase" onmap="if(bb.browser.ie){ this.viewNode.codeBase = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="codetype" onmap="if(bb.browser.ie){ this.viewNode.codeType = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="data" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="declare" onmap="this.viewNode.declare = value == name;"/><d:attribute name="height" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="standby" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="type" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="width" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="usemap" onmap="if(bb.browser.ie){ this.viewNode.useMap = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:method name="__children"><d:body type="text/javascript"/></d:method></d:element><d:element name="param"><d:attribute name="id" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="type" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="value" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="valuetype" onmap="this.viewNode.setAttribute(name, value)"/></d:element><d:element name="area" extends="xhtmlFocusableElement"><d:template type="text/javascript">var b=document.createElement("area");var a=this.modelNode.getAttribute("coords");var c=this.modelNode.getAttribute("shape");if(a!=null&amp;&amp;c!=null&amp;&amp;bb.browser.ie){b=document.createElement(\'&lt;area shape="\'+c+\'" coords="\'+a+\'"&gt;\');}return[b,b];</d:template><d:attribute name="alt" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="coords" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="href" onmap="this.viewNode.href = this.getProperty(name);"/><d:attribute name="nohref" onmap="this.viewNode.noHref = value == name;"/><d:attribute name="shape" onmap="this.viewNode.setAttribute(name, value)"/><d:attribute name="target" onmap="this.viewNode.setAttribute(name, value);"/><d:property name="href" onget="return bb.uri.resolveUri(this.getAttribute(name), this.getProperty(\'baseURI\'));" onset="this.setAttribute(name,  value);"/></d:element><d:element name="map" extends="xhtmlElement"><d:attribute name="id" onmap="this.viewNode.setAttribute(name, value); this.viewNode.setAttribute(\'name\', value);"/><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value);"/><d:template type="text/javascript">var a=bb.browser.ie?document.createElement(\'&lt;map name="\'+this.modelNode.getAttribute("id")+\'"&gt;\'):document.createElement("map");return[a,a];</d:template></d:element><d:element name="frameset" extends="xhtmlElement"><d:attribute name="cols" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="rows" onmap="this.viewNode.setAttribute(name, value);"/></d:element><d:element name="frame" extends="xhtmlElement"><d:attribute name="frameborder" onmap="if(bb.browser.ie){ this.viewNode.frameBorder = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="longdesc" onmap="if(bb.browser.ie){ this.viewNode.longDesc = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="marginheight" onmap="if(bb.browser.ie){ this.viewNode.marginHeight = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="marginwidth" onmap="if(bb.browser.ie){ this.viewNode.marginWidth = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="marginwidth" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="noresize" onmap="if(bb.browser.ie){ this.viewNode.noResize = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="scrolling" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="src" onmap="this.viewNode.src = this.getProperty(name);"/><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value);"/><d:property name="src" onget="return bb.uri.resolveUri(this.getAttribute(name), this.getProperty(\'baseURI\'));" onset="this.setAttribute(name,  value);"/></d:element><d:element name="noframes" extends="xhtmlElement"/><d:element name="iframe" extends="xhtmlElement"><d:attribute name="frameborder" onmap="if(bb.browser.ie){ this.viewNode.frameBorder = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="height" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="longdesc" onmap="if(bb.browser.ie){ this.viewNode.longDesc = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="marginheight" onmap="if(bb.browser.ie){ this.viewNode.marginHeight = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="marginwidth" onmap="if(bb.browser.ie){ this.viewNode.marginWidth = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="scrolling" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="src" onmap="this.viewNode.src = this.getProperty(name);"/><d:attribute name="width" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value);"/><d:property name="src" onget="return bb.uri.resolveUri(this.getAttribute(name), this.getProperty(\'baseURI\'));" onset="this.setAttribute(name,  value);"/><d:template type="text/javascript">var a=null;if(bb.browser.ie){a=document.createElement(\'&lt;iframe name="\'+this.getAttribute("name")+\'"&gt;\');}else{a=document.createElement("iframe");}return[a,a];</d:template></d:element><d:element name="meta"><d:attribute name="content" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="http-equiv" onmap="if(bb.browser.ie){ this.viewNode.httpEquiv = value; }else{ this.viewNode.setAttribute(name, value); }"/><d:attribute name="name" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="scheme" onmap="this.viewNode.setAttribute(name, value);"/></d:element><d:element name="script" extends="xhtmlElement"><d:template type="text/javascript">var a=document.createElement("script");return[a,null];</d:template><d:method name="__children"><d:body type="application/javascript"/></d:method><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript">var a=[];for(oXmlNode=this.modelNode.firstChild;oXmlNode;oXmlNode=oXmlNode.nextSibling){a.push(oXmlNode.nodeType==1?"":oXmlNode.nodeValue||oXmlNode.data||"");}if(a.length){this.viewNode.text=a.join("");}</d:handler><d:attribute name="charset" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="defer" onmap="this.viewNode.defer = value == name;"/><d:attribute name="src" onmap="this.viewNode.src = this.getProperty(name);"/><d:attribute name="type" onmap="this.viewNode.type = value == \'application/javascript\' ? \'text/javascript\' : value;"/><d:attribute name="space" namespace="http://www.w3.org/XML/1998/namespace" default="preserve" onmap="this.viewNode.setAttribute(name, value);"/><d:property name="src" onget="return bb.uri.resolveUri( this.getAttribute(name), this.getProperty(\'baseURI\') );" onset="this.setAttribute(name,  value);"/></d:element><d:element name="style" extends="xhtmlElement"><d:template type="text/javascript">var a=bb.html.addStyleSheet(this.getProperty("textContent"));if(bb.browser.webkit){a=document.createElement("style");}return[a,null];</d:template><d:attribute name="media" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="title" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="type" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="space" namespace="http://www.w3.org/XML/1998/namespace" default="preserve" onmap="this.viewNode.setAttribute(name, value);"/></d:element><d:element name="link" extends="xhtmlElement"><d:attribute name="charset" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="href" onmap="this.viewNode.href = this.getProperty(name);"/><d:attribute name="hreflang" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="media" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="rel" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="rev" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="type" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="target" onmap="this.viewNode.setAttribute(name, value);"/><d:property name="href" onget="return bb.uri.resolveUri( this.getAttribute(name), this.getProperty(\'baseURI\') );" onset="this.setAttribute(name,  value);"/></d:element><d:element name="base" extends="xhtmlElement"><d:attribute name="href" onmap="this.viewNode.setAttribute(name, value);"/><d:attribute name="target" onmap="this.viewNode.setAttribute(name, value);"/></d:element></d:namespace></d:tdl><d:tdl xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.backbase.com/2006/btl" xmlns:bb="http://www.backbase.com/2006/client" xml:base="../bcf/4_4_9_1/bindings/www.backbase.com.2006.btl/dragAndDrop/dragAndDrop.xml"><d:namespace name="http://www.backbase.com/2006/btl" xml:base="../btl.xml"><d:resource type="text/css">.btl-repaint{zoom:1;background-color:transparent;-moz-outline:none;}</d:resource><d:resource type="text/javascript">if(!window.btl){var btl={};}btl.namespaceURI="http://www.backbase.com/2006/btl";btl.funcReturnFalse=function btl_funcReturnFalse(){return false;};btl.funcReturnTrue=function btl_funcReturnTrue(){return true;};btl.isInsideHead=function btl_isInsideHead(b,c,a){if(a&amp;&amp;a!=c){return false;}while(b&amp;&amp;b.nodeType==1){if(bb.html.hasClass(b,"btl-head")){return true;}if(b.controller==c){break;}b=b.parentNode;}return false;};btl.repaint=function btl_repaint(a){bb.html.addClass(a,"btl-repaint");setTimeout(function(){if(a){bb.html.removeClass(a,"btl-repaint");}a=null;},1);};btl.isTrueValue=function btl_isTrueValue(a,b){return b=="true"||b==a;};btl.isFalseValue=function btl_isFalseValue(a,b){return b!="true"&amp;&amp;b!=a;};btl.containsElement=function btl_containsElement(b,a){while(a){if(b==a){return true;}a=a.parentNode;}return false;};btl.getScrollLeft=function btl_getScrollLeft(b){var a=0;while(b){if(b.scrollLeft){a+=b.scrollLeft;}b=b.parentNode;}return a;};btl.getScrollTop=function btl_getScrollTop(a){var b=0;while(a){if(a.scrollTop){b+=a.scrollTop;}a=a.parentNode;}return b;};btl.setPrivateProperty=function btl_setPrivateProperty(a,b,c){a._["_btl_"+b]=c;};btl.getPrivateProperty=function btl_getPrivateProperty(a,b){return a._["_btl_"+b];};btl.html={};btl.html.stretch=function btl_html_stretch(l){var a=l.parentNode;l.style.height="1px";var i;var j;var d;var e;var f;var o;var c;var m=bb.html.getBoxObject(a,"content").height;var h;var p=a.firstChild;var g;while(p){var k=p.nodeType===1&amp;&amp;bb.html.getStyle(p,"position")!=="absolute"&amp;&amp;bb.html.getStyle(p,"display")!=="none";var b=p.nextSibling;if(k){var n=bb.html.getBoxObject(p);if(d===undefined){d=n.top;}if(j===undefined&amp;&amp;p===l){g=p;j=n.top;i=j-d;e=0;}else{if(j!==undefined&amp;&amp;c===undefined){c=n.top;e=n.height;}else{f=n.top;o=n.height;e=f+o-c;}}}p=b;}h=m-i-e;if(l&amp;&amp;h&gt;0){btl.html.setHeight(l,h);}};btl.html.setHeight=function btl_html_setHeight(a,b){b-=bb.html.getStyle(a,"box-sizing")=="content-box"?bb.html.getBoxObject(a,"border").height-bb.html.getBoxObject(a,"content").height:0;bb.html.setStyle(a,"height",b+"px");};btl.html.setWidth=function btl_html_setWidth(a,b){b-=bb.html.getStyle(a,"box-sizing")=="content-box"?bb.html.getBoxObject(a,"border").width-bb.html.getBoxObject(a,"content").width:0;bb.html.setStyle(a,"width",b+"px");};btl.controller={};btl.controller.containsElement=function btl_controller_containsElement(b,a){while(a){a=a.getProperty("parentNode");if(b===a){return true;}}return false;};</d:resource><d:behavior name="btlBehavior"/></d:namespace><d:namespace name="http://www.backbase.com/2006/btl"><d:resource type="text/css">.btl-drag-outlineElement{position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;z-index:9999;border-width:1px;border-style:solid;background-color:#DFE0E1;border-color:#8B8D91;}</d:resource><d:attribute name="dragReceive"><d:mapper type="text/javascript">var b=this._.oldDragReceive;if(b){for(var a=0;a&lt;b.length;a++){var c=btl.drag.droppables[b[a]];if(c){bb.array.removeObject(c,this);}}}b=this._.oldDragReceive=value.split(" ");for(var a=0;a&lt;b.length;a++){if(!btl.drag.droppables[b[a]]){btl.drag.droppables[b[a]]=[];}btl.drag.droppables[b[a]].push(this);}if(value){if(!this.instanceOf(btl.namespaceURI,"dragTarget")){bb.addBehavior(this,btl.namespaceURI,"dragTarget");}}else{bb.removeBehavior(this,btl.namespaceURI,"dragTarget");}</d:mapper></d:attribute><d:behavior name="dragTarget" extends="b:btlBehavior"><d:handler event="destruct" type="application/javascript">this.setAttributeNS("http://www.backbase.com/2006/btl","dragReceive","");</d:handler><d:handler event="dragEnter" type="application/javascript">if(event.dragSource&amp;&amp;event.dragSource.modelNode&amp;&amp;event.dragSource.instanceOf("http://www.backbase.com/2006/btl","drag")){var f=["*"];var b=event.dragSource.getAttribute("dragGroup");if(b){f.push(b.split(" "));}b=event.dragSource.getAttribute("dragItem");if(b){f.push(b.split(" "));}var a=[];for(var e=0;e&lt;f.length;e++){var c=btl.drag.droppables[f[e]];if(c){for(var d=0;d&lt;c.length;d++){if(this==c[d]){btl.drag.dragManager.acceptDragDrop(this);break;}}}}}</d:handler><d:handler event="dragDrop" type="application/javascript">if(!event.defaultPrevented&amp;&amp;event.dragSource.getAttribute("dropMode")!="none"){var a=event.dragSource.modelNode;var b=false;for(var c=this.modelNode;c&amp;&amp;!b&amp;&amp;(c.nodeType==1);c=c.parentNode){b=(c==a);}if(!b){this.appendChild(event.dragSource);}}</d:handler></d:behavior><d:behavior name="dragBase" extends="b:btlBehavior"><d:resource type="text/javascript">btl.drag={};btl.drag.droppables={};btl.drag.dragManager={isDragging:false,constraint:null,currentTop:null,currentLeft:null,offsetTop:null,offsetLeft:null,symbol:null,target:null,acceptDragDrop:function dragManager_acceptDragDrop(b){var a=this.acceptTarget;this.acceptTarget=b;if(this.symbol){if(b&amp;&amp;b.modelNode){bb.html.addClass(this.symbol,"btl-drag-target");bb.html.addClass(b.viewNode,"btl-drag-target");}else{bb.html.removeClass(this.symbol,"btl-drag-target");if(a&amp;&amp;a.modelNode){bb.html.removeClass(a.viewNode,"btl-drag-target");}}}},doDrag:function dragManager_doDrag(k,b,l,j,f,e,d,h,m,n,c){var g=btl.drag.dragManager;if(!g.isDragging){g.controller=k;g.target=null;g.acceptTarget=null;g.source=b;g.constraint=c;g.symbol=f;g.offsetTop=d;g.offsetLeft=e;g.currentTop=j;g.currentLeft=l;g.droppables=n&amp;&amp;n.length?n:null;g.allowMove=m;if(h&lt;1){f._originalOpacity=bb.html.getStyle(f,"opacity");bb.html.setStyle(f,"opacity",h);}var a=g.currentLeft+e;var o=g.currentTop+d;if(f.offsetParent&amp;&amp;f.offsetParent!=document.body){var i=bb.html.getBoxObject(f.offsetParent,bb.html.getStyle(f,"position")=="absolute"?"padding":"content");a-=i.left;o-=i.top;}f.style.left=a+"px";f.style.top=o+"px";bb.html.disableUserSelect(document.body);bb.document.addEventListener("keydown",btl.drag.handleKeyDown,false);bb.document.addEventListener("mouseup",btl.drag.handleMouseUp,false);bb.document.addEventListener("mousemove",btl.drag.handleMouseMove,false);g.isDragging=true;}}};btl.drag.handleKeyDown=function drag_handleKeyDown(a){if(a.keyIdentifier&amp;&amp;a.keyIdentifier.toLowerCase()=="u+001b"&amp;&amp;btl.drag.dragManager.isDragging){a.preventDefault();btl.drag.dragManager.acceptDragDrop();btl.drag.stopDrag();}};btl.drag.handleMouseUp=function drag_handleMouseUp(a){if(a.button==0){btl.drag.stopDrag();}};btl.drag.startPoint=null;btl.drag.handleMouseMoveBeforeStart=function drag_handleMouseMoveBeforeStart(g){var e=btl.drag.dragManager;if(btl.drag.startPoint!=null){var f=6;var c=btl.drag.startPoint.startX;var a=btl.drag.startPoint.startY;var d=g.pageX;var b=g.pageY;if(c-d&gt;f||c-d&lt;-f||a-b&gt;f||a-b&lt;-f){btl.drag.startDrag(g);}}};btl.drag.startDrag=function drag_startDrag(d){if(btl.drag.startPoint&amp;&amp;(!btl.resize||!btl.resize.isResizing)){bb.document.removeEventListener("mousemove",btl.drag.handleMouseMoveBeforeStart,false);bb.document.removeEventListener("mouseup",btl.drag.handleMouseUpBeforeStart,false);var c=btl.drag.startPoint.startX;var a=btl.drag.startPoint.startY;var b=btl.drag.startPoint.controller;var e=bb.document.createEvent("MouseEvents");e.initMouseEvent("dragStart",true,true,d.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget);e.startX=c;e.startY=a;e.viewTarget=btl.drag.startPoint.viewNode;e.dragManager=btl.drag.dragManager;b.dispatchEvent(e);}btl.drag.startPoint=null;};btl.drag.handleMouseUpBeforeStart=function drag_handleMouseUpBeforeStart(a){if(btl.drag.startPoint!=null){clearTimeout(btl.drag.dragTimeout);btl.drag.startPoint=null;bb.document.removeEventListener("mousemove",btl.drag.handleMouseMoveBeforeStart,false);bb.document.removeEventListener("mouseup",btl.drag.handleMouseUpBeforeStart,false);bb.html.enableUserSelect(document.body);}};btl.drag.handleMouseMove=function drag_handleMove(q){var k=btl.drag.dragManager;if(k.isDragging){var x=q.pageX+k.offsetLeft;var v=q.pageY+k.offsetTop;if(k.constraint){var m=bb.html.getBoxObject(k.constraint==document.body?bb.viewport:k.constraint,bb.html.getStyle(k.controller.viewNode,"position")=="absolute"?"padding":"content");var n=bb.html.getBoxObject(k.symbol);if(x&lt;m.left||n.width&gt;m.width){x=m.left;}else{var y=m.left+m.width-n.width;if(x&gt;y){x=y;}}k.currentLeft=x-k.offsetLeft;if(v&lt;m.top||n.height&gt;m.height){v=m.top;}else{var j=m.top+m.height-n.height;if(v&gt;j){v=j;}}k.currentTop=v-k.offsetTop;}else{k.currentLeft=q.pageX;k.currentTop=q.pageY;}var h;var p=k.symbol;var b=q.viewTarget,f=false;while(b.parentNode){if(b==p){f=true;break;}b=b.parentNode;}if(!f||k.droppables){var a,s=k.target,h;if(!k.droppables){a=q.viewTarget;}else{var w=k.currentLeft,u=k.currentTop,d=0,c=0,e=Infinity,o=Infinity,t=k.droppables;for(var r=0;r&lt;t.length;r++){var g=t[r];if(g.offsetHeight){var l=bb.html.getBoxObject(g);if(w&gt;=l.x&amp;&amp;w&lt;=l.x+l.w&amp;&amp;u&gt;=l.y&amp;&amp;u&lt;=l.y+l.h){if(l.x&gt;=d&amp;&amp;l.y&gt;=c&amp;&amp;l.w+l.x&lt;=e&amp;&amp;l.h+l.y&lt;=o){d=l.x;c=l.y;e=l.x+l.w;o=l.y+l.h;a=g;}}}}}k.target=a;if(a!=s){if(s){h=bb.document.createEvent("Events");h.initEvent("dragLeave",false,true);h.dragInitiator=k.controller;h.dragSource=k.source;h.viewTarget=q.viewTarget;h.dragTarget=a?bb.getControllerFromView(a):null;h.dragViewTarget=a;bb.getControllerFromView(s).dispatchEvent(h);if(h.defaultPrevented){}else{k.acceptDragDrop();}}if(k.isDragging&amp;&amp;a){h=bb.document.createEvent("Events");h.initEvent("dragEnter",false,true);h.dragInitiator=k.controller;h.dragSource=k.source;h.viewTarget=q.viewTarget;h.dragTarget=a?bb.getControllerFromView(a):null;h.dragViewTarget=a;bb.getControllerFromView(a).dispatchEvent(h);if(k.isDragging){h=bb.document.createEvent("Events");h.initEvent("dragOver",true,true);h.dragInitiator=k.controller;h.dragSource=k.source;h.viewTarget=q.viewTarget;h.dragTarget=a?bb.getControllerFromView(a):null;h.dragViewTarget=a;bb.getControllerFromView(a).dispatchEvent(h);}}}}h=bb.document.createEvent("MouseEvents");h.initMouseEvent("drag",false,true,q.view,q.detail,q.screenX,q.screenY,q.clientX,q.clientY,q.ctrlKey,q.altKey,q.shiftKey,q.metaKey,q.button,q.relatedTarget);h.viewTarget=q.viewTarget;h.pageX=q.pageX;h.pageY=q.pageY;h.dragInitiator=k.controller;h.dragSource=k.source;h.dragTarget=a?bb.getControllerFromView(a):null;h.dragViewTarget=a;k.controller.dispatchEvent(h);if(!h.defaultPrevented&amp;&amp;k.symbol){if(k.symbol.offsetParent&amp;&amp;k.symbol.offsetParent!=document.body){var m=bb.html.getBoxObject(k.symbol.offsetParent,bb.html.getStyle(k.symbol,"position")=="absolute"?"padding":"content");x-=m.left;v-=m.top;}p.style.left=x+"px";p.style.top=v+"px";}}};btl.drag.stopDrag=function drag_stopDrag(){var a=btl.drag.dragManager;if(a.isDragging){if(a.allowMove||a.acceptTarget){if(a.symbol){bb.html.removeClass(a.symbol,"btl-drag-target");}if(a.acceptTarget){bb.html.removeClass(a.acceptTarget.viewNode,"btl-drag-target");var d=bb.document.createEvent("Events");d.initEvent("dragDrop",false,true);d.dragInitiator=a.controller;d.dragSource=a.source;a.acceptTarget.dispatchEvent(d);}if((!d||!d.defaultPrevented)&amp;&amp;a.allowMove){var f=a.currentLeft+a.offsetLeft;var c=a.currentTop+a.offsetTop;var g=a.controller.viewNode.bPosition?a.controller.viewNode.sPosition:bb.html.getStyle(a.controller.viewNode,"position");if(g!="absolute"&amp;&amp;g!="fixed"){g=a.controller.viewNode.style.position="absolute";a.controller.viewNode.bPosition=false;}if(g=="absolute"||g=="relative"){var e=a.controller.viewNode.offsetParent;if(e&amp;&amp;e!=document.body){var b=bb.html.getBoxObject(e,g=="absolute"?"padding":"content");f-=b.x;c-=b.y;}}a.controller.viewNode.style.left=f+"px";a.controller.viewNode.style.top=c+"px";}}bb.html.enableUserSelect(document.body);bb.document.removeEventListener("keydown",btl.drag.handleKeyDown,false);bb.document.removeEventListener("mouseup",btl.drag.handleMouseUp,false);bb.document.removeEventListener("mousemove",btl.drag.handleMouseMove,false);d=bb.document.createEvent("Events");d.initEvent("dragEnd",false,false);d.dragInitiator=a.controller;d.dragSource=a.source;a.controller.dispatchEvent(d);a.isDragging=false;}};</d:resource><d:handler event="mousedown" type="text/javascript">if(event.button==0&amp;&amp;btl.drag.dragManager.isDragging){btl.drag.stopDrag();}if(event.button==0&amp;&amp;btl.drag.dragStartPoint==null){var a=event.target;btl.drag.startPoint={startX:event.pageX,startY:event.pageY,controller:a,viewNode:event.viewTarget};bb.document.addEventListener("mousemove",btl.drag.handleMouseMoveBeforeStart,false);bb.document.addEventListener("mouseup",btl.drag.handleMouseUpBeforeStart,false);btl.drag.dragTimeout=setTimeout(function(){btl.drag.startDrag(event);},500);}</d:handler><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript">if(this.viewNode&amp;&amp;this.viewNode.tagName=="IMG"){bb.html.disableUserSelect(this.viewNode);}</d:handler></d:behavior><d:behavior name="drag" extends="b:dragBase"><d:attribute name="dragGroup"/><d:attribute name="dragItem"/><d:attribute name="dragConstraint"/><d:attribute name="dragMode" default="outline"/><d:attribute name="dragSymbol"/><d:attribute name="dropMode" default="move"/><d:attribute name="dragBehavior" default="drop"/><d:attribute name="useDragRole" default="false"><d:mapper type="text/javascript">if(value!="false"){bb.command.trace(this,"The useDragRole attribute is deprecated, use useDragClass instead.",2);}</d:mapper></d:attribute><d:attribute name="useDragClass" default="false"/><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript">if(!btl.isTrueValue("useDragRole",this.getAttribute("useDragRole"))&amp;&amp;!btl.isTrueValue("useDragClass",this.getAttribute("useDragClass"))){bb.html.disableUserSelect(this.viewNode);}</d:handler><d:handler event="dragStart" type="text/javascript">if(event.defaultPrevented||btl.drag.dragManager.isDragging){return;}var o=event.target;var f=this;var s=null;var c=this.getAttribute("dragGroup");if(c&amp;&amp;c.length){if(o!=this){c=" "+c+" ";if(-1==c.indexOf(" * ")){for(var g=o;g&amp;&amp;(g.modelNode.nodeType==1);g=g.getProperty("parentNode")){var k=g.getAttribute("dragItem");if(-1!=c.indexOf(" "+k+" ")){break;}}if(!g||(g.modelNode.nodeType!=1)){return false;}o=g;}}else{var k=this.getAttribute("dragItem");if(!k||!k.length){return false;}}}var l=o.getAttribute("dragBehavior")=="move"||this.getAttribute("dragBehavior")=="move";if(btl.isTrueValue("useDragClass",this.getAttribute("useDragClass"))){if(bb.selector.queryAncestor(event.viewTarget,".btl-dragMove",event.target.viewNode)){l=true;}else{if(bb.selector.queryAncestor(event.viewTarget,".btl-dragDrop",event.target.viewNode)){l=false;}else{if(!bb.selector.queryAncestor(event.viewTarget,".btl-dragItem",event.target.viewNode)){return;}}}}else{if(btl.isTrueValue("useDragRole",this.getAttribute("useDragRole"))){if(bb.selector.queryAncestor(event.viewTarget,"[role~=dragMove]",event.target.viewNode)){l=true;}else{if(bb.selector.queryAncestor(event.viewTarget,"[role~=dragDrop]",event.target.viewNode)){l=false;}else{if(!bb.selector.queryAncestor(event.viewTarget,"[role~=dragItem]",event.target.viewNode)){return;}}}}}var m=["*"];var s=this.getAttribute("dragGroup");if(s){m.push(s.split(" "));}s=this.getAttribute("dragItem");if(s){m.push(s.split(" "));}var u=[];for(var t=0;t&lt;m.length;t++){var p=btl.drag.droppables[m[t]];if(p){for(var r=0;r&lt;p.length;r++){if(bb.array.indexOf(u,p[r].viewNode)==-1){u.push(p[r].viewNode);}}}}var b=this.getAttribute("dragConstraint"),a;if(b&amp;&amp;(b!="")){a=bb.evaluateSmart(b,this,this);if(a){a=a.viewGate;}}var q;var e=0.5;var n=bb.html.getBoxObject(this.viewNode,"border");switch(this.getAttribute("dragMode")){case"real":q=this.viewNode;var h=bb.html.getStyle(this.viewNode,"position");if(h!="absolute"&amp;&amp;h!="fixed"){this.viewNode.bPosition=true;this.viewNode.sPosition=this.viewNode.style.position;this.viewNode.style.position="absolute";}xOffset=n.left-event.startX;yOffset=n.top-event.startY;break;case"symbol":var d=bb.evaluateSmart(this.getAttribute("dragSymbol"),this,this);if(d){if(typeof d=="string"){d=bb.html.createElementFromString(d);}else{if(d.viewNode){d=d.viewNode;}if("cloneNode" in d){d=d.cloneNode(true);}}e=1;btl.drag.dragSymbol=q=d;btl.drag.dragSymbol.style.position="absolute";document.body.appendChild(btl.drag.dragSymbol);xOffset=10;yOffset=10;}else{bb.command.trace(this,"dragSymbol attribute is missing or incorrect, set it to an XPath value which should be the symbol!");return;}break;case"outline":default:if(!btl.drag.outlineElement){btl.drag.outlineElement=document.createElement("div");btl.drag.outlineElement.className="btl-drag-outlineElement";document.body.appendChild(btl.drag.outlineElement);}q=btl.drag.outlineElement;q.style.width=n.width+"px";q.style.height=n.height+"px";xOffset=n.left-event.startX;yOffset=n.top-event.startY;break;}if(!l){if(!btl.drag._savedStyle){btl.drag._savedStyle=bb.html.addStyleSheet("html * { cursor: not-allowed !important;} .btl-drag-target, .btl-drag-target * { cursor: default !important;}");}else{document.head.appendChild(btl.drag._savedStyle);}}btl.drag.dragManager.doDrag(this,this,event.startX,event.startY,q,xOffset,yOffset,e,l,u,a);</d:handler><d:handler event="dragEnd" type="text/javascript">if(this.viewNode.bPosition){this.viewNode.bPosition=false;this.viewNode.style.position=this.viewNode.sPosition;this.viewNode.style.left="";this.viewNode.style.top="";}if(btl.drag._savedStyle&amp;&amp;btl.drag._savedStyle.parentNode==document.head){document.head.removeChild(btl.drag._savedStyle);}if(this.viewNode._originalOpacity!=null){bb.html.setStyle(this.viewNode,"opacity",this.viewNode._originalOpacity);this.viewNode._originalOpacity=null;}if(btl.drag.outlineElement){btl.drag.outlineElement.style.left="";btl.drag.outlineElement.style.top="";}if(btl.drag.dragSymbol){document.body.removeChild(btl.drag.dragSymbol);btl.drag.dragSymbol=null;}</d:handler></d:behavior></d:namespace></d:tdl><d:tdl xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.backbase.com/2006/btl" xmlns:bb="http://www.backbase.com/2006/client" xml:base="../bcf/4_4_9_1/bindings/www.backbase.com.2006.btl/resize/resize.xml"><d:namespace name="http://www.backbase.com/2006/btl"><d:resource type="text/css">.btl-resize-cursorElement{position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;z-index:10000;opacity:0;-ms-filter:"alpha(opacity=0)";filter:alpha(opacity=0);background:white;}.btl-resize-lineElement{position:absolute;top:-10000px;left:-10000px;width:1px;height:100px;z-index:9999;border-width:1px;border-style:solid;border-color:#8B8D91;overflow:hidden;}.btl-resize-outlineElement{position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;z-index:9999;border-width:1px;border-style:solid;opacity:.4;-ms-filter:"alpha(opacity=40)";filter:alpha(opacity=40);background-color:#DFE0E1;border-color:#8B8D91;}</d:resource><d:behavior name="resizeBase" extends="b:btlBehavior"><d:resource type="text/javascript">btl.resize={};btl.resize.currentSymbol=null;btl.resize.currentElement=null;btl.resize.currentController=null;btl.resize.currentResizeEdge=0;btl.resize.isResizing=false;btl.resize.WEST=btl.resize.LEFT=1;btl.resize.EAST=btl.resize.RIGHT=2;btl.resize.NORTH=btl.resize.TOP=4;btl.resize.SOUTH=btl.resize.BOTTOM=8;btl.resize.NORTHWEST=5;btl.resize.NORTHEAST=6;btl.resize.SOUTHWEST=9;btl.resize.SOUTHEAST=10;btl.resize.HORIZONTAL=3;btl.resize.VERTICAL=12;btl.resize.ALL=15;btl.resize.cursorElement=document.createElement("div");btl.resize.cursorElement.className="btl-resize-cursorElement";document.body.appendChild(btl.resize.cursorElement);if(bb.browser.opera){btl.resize.iCursor=0;btl.resize.aCursors=[btl.resize.cursorElement];btl.resize.aCursors[1]=btl.resize.cursorElement.cloneNode(true);document.body.appendChild(btl.resize.aCursors[1]);}btl.resize.lineElement=document.createElement("div");btl.resize.lineElement.className="btl-resize-lineElement";document.body.appendChild(btl.resize.lineElement);btl.resize.outlineElement=document.createElement("div");btl.resize.outlineElement.className="btl-resize-outlineElement";document.body.appendChild(btl.resize.outlineElement);btl.resize.detectResizeEdge=function resize_detectEdge(b,i,h,e,c){var a=bb.html.getBoxObject(b);var f=i-a.left;var d=h-a.top;var j=new RegExp(e.replace(/(^\\s+)|(\\s+$)/g,"").replace(/ +/g,"|"),"");var g=0;if(f&gt;=0&amp;&amp;d&gt;=0&amp;&amp;f&lt;=a.width&amp;&amp;d&lt;=a.height){if((j.test("top")||j.test("north"))&amp;&amp;d&lt;=c){g|=btl.resize.TOP;}else{if((j.test("bottom")||j.test("south"))&amp;&amp;d&gt;=(a.height-c)){g|=btl.resize.BOTTOM;}}if((j.test("left")||j.test("west"))&amp;&amp;f&lt;=c){g|=btl.resize.LEFT;}else{if((j.test("right")||j.test("east"))&amp;&amp;f&gt;=(a.width-c)){g|=btl.resize.RIGHT;}}}btl.resize.currentResizeEdge=g;return g;};btl.resize.startResize=function resize_startResize(f,c,l,n,k,j,i,e,g,o,m){btl.resize.currentController=f;btl.resize.currentElement=c||f.viewNode;btl.resize.currentSymbol=j;btl.resize.currentResizeEdge=l;var h=bb.html.getStyle(btl.resize.currentElement,"box-sizing")=="border-box",b=bb.html.getBoxObject(btl.resize.currentElement,"border"),a;if(!h){a=bb.html.getBoxObject(btl.resize.currentElement,"content");}btl.resize.newX=btl.resize.originalX=b.left;btl.resize.newY=btl.resize.originalY=b.top;btl.resize.newW=btl.resize.originalW=h?b.width:a.width;btl.resize.newH=btl.resize.originalH=h?b.height:a.height;btl.resize.boxModelW=h?0:b.width-a.width;btl.resize.boxModelH=h?0:b.height-a.height;btl.resize.deltaX=0;btl.resize.deltaY=0;btl.resize.offsetLeft=0;btl.resize.offsetTop=0;btl.resize.originalClientX=n;btl.resize.originalClientY=k;var d=btl.resize.sendEvent(f,"resizeStart",true,true);if(d){bb.document.addEventListener("mousemove",btl.resize.handleMouseMove,false);bb.document.addEventListener("mouseup",btl.resize.handleMouseUp,false);bb.document.addEventListener("keydown",btl.resize.handleKeyDown,false);bb.document.addEventListener("click",btl.resize.handleClick,false);bb.html.disableUserSelect(document.body);btl.resize.iMinW=i||0;btl.resize.iMinH=e||0;btl.resize.iMaxW=g||20000;btl.resize.iMaxH=o||20000;btl.resize.oConstraint=m||false;if(j&amp;&amp;j!=c){j.style.display="";btl.resize.applyCoordinates(j,true);}btl.resize.isResizing=true;}return d;};btl.resize.cancelResize=function cancelResize(){btl.resize.newX=btl.resize.originalX;btl.resize.newY=btl.resize.originalY;btl.resize.newW=btl.resize.originalW;btl.resize.newH=btl.resize.originalH;};btl.resize.stopResize=function resize_stopResize(a){if(btl.resize.isResizing){var c=btl.resize.currentController;var b=btl.resize.sendEvent(c,"resizeEnd",true,true,a);if(!b){btl.resize.cancelResize();if(btl.resize.currentElement==btl.resize.currentSymbol){btl.resize.applyCoordinates(btl.resize.currentElement);}}btl.resize.stopAndClean();bb.ui.reflow(c,false,true);return b;}};btl.resize.applyCoordinates=function(a,k){if(a){var c=btl.resize.newX;var b=btl.resize.newY;if(a.offsetParent&amp;&amp;a.offsetParent!=document.body){var f=bb.html.getBoxObject(a.offsetParent,bb.html.getStyle(a,"position")=="absolute"?"padding":"content");c-=f.left;b-=f.top;}var i=a.style;if(btl.resize.currentController&amp;&amp;btl.resize.currentController.viewNode==a&amp;&amp;btl.resize.currentController.instanceOf(btl.namespaceURI,"dimensionElement")){var d=btl.resize.currentController;if(k||btl.resize.currentResizeEdge&amp;btl.resize.LEFT){i.left=c+"px";}if(k||btl.resize.currentResizeEdge&amp;btl.resize.TOP){i.top=b+"px";}if(k||btl.resize.currentResizeEdge&amp;btl.resize.HORIZONTAL){d.setProperty("width",btl.resize.newW+"px");}if(k||btl.resize.currentResizeEdge&amp;btl.resize.VERTICAL){d.setProperty("height",btl.resize.newH+"px");}}else{var e=btl.resize.newW;var j=btl.resize.newH;if(btl.resize.currentElement!=a&amp;&amp;bb.html.getStyle(a,"box-sizing")=="content-box"){var g=bb.html.getBoxObject(a,"border");var h=bb.html.getBoxObject(a,"content");e+=btl.resize.boxModelW-(g.width-h.width);j+=btl.resize.boxModelH-(g.height-h.height);}if(k||btl.resize.currentResizeEdge&amp;btl.resize.LEFT){i.left=c+"px";}if(k||btl.resize.currentResizeEdge&amp;btl.resize.TOP){i.top=b+"px";}if(k||btl.resize.currentResizeEdge&amp;btl.resize.HORIZONTAL){i.width=e+"px";}if(k||btl.resize.currentResizeEdge&amp;btl.resize.VERTICAL){i.height=j+"px";}}}};btl.resize.determineCoordinates=function(n,l){var m=btl.resize.currentResizeEdge;var h=btl.resize.iMinW;var d=btl.resize.iMinH;btl.resize.deltaX=n-btl.resize.originalClientX;btl.resize.deltaY=l-btl.resize.originalClientY;var g;var b=bb.html.getStyle(btl.resize.currentElement,"position")=="absolute";if(btl.resize.oConstraint){g=bb.html.getBoxObject(btl.resize.oConstraint==document.body?bb.viewport:btl.resize.oConstraint,b?"padding":"content");}btl.resize.offsetLeft=0;btl.resize.offsetTop=0;if(btl.resize.currentElement.offsetParent&amp;&amp;btl.resize.currentElement.offsetParent!=document.body){var k=bb.html.getBoxObject(btl.resize.currentElement.offsetParent,b?"padding":"content");btl.resize.offsetLeft=k.left;btl.resize.offsetTop=k.top;}var i=bb.html.getBoxObject(bb.viewport);if(m&amp;btl.resize.HORIZONTAL){var f=btl.resize.originalW;var e=btl.resize.originalX;if(m&amp;btl.resize.RIGHT){f+=btl.resize.deltaX;}else{if(m&amp;btl.resize.LEFT){f-=btl.resize.deltaX;}}f=Math.max(f,h,1);f=Math.min(f,btl.resize.iMaxW,Math.max(i.width,bb.viewport.scrollWidth));if(m&amp;btl.resize.LEFT){e-=(f-btl.resize.originalW);}if(e&lt;0){e=0;}if(btl.resize.oConstraint){if(m&amp;btl.resize.RIGHT&amp;&amp;m&amp;btl.resize.LEFT){e=g.left;f=Math.min(f,btl.resize.iMaxW,g.width);}else{if(e&lt;g.left){f-=g.left-e;e=g.left;}else{if(e&gt;(g.left+g.width-h)){e=(g.left+g.width-h);}}var j=g.left+g.width-e-btl.resize.boxModelW;if(f&lt;h){f=h;}else{if(f&gt;j){f=j;}}}}btl.resize.newX=e;btl.resize.newW=f;}if(m&amp;btl.resize.VERTICAL){var o=btl.resize.originalH;var c=btl.resize.originalY;if(m&amp;btl.resize.BOTTOM){o+=btl.resize.deltaY;}else{if(m&amp;btl.resize.TOP){o-=btl.resize.deltaY;}}o=Math.max(o,d,1);o=Math.min(o,btl.resize.iMaxH,Math.max(i.height,bb.viewport.scrollHeight));if(m&amp;btl.resize.TOP){c-=(o-btl.resize.originalH);}if(c&lt;0){c=0;}if(btl.resize.oConstraint){if(m&amp;btl.resize.TOP&amp;&amp;m&amp;btl.resize.BOTTOM){c=g.top;o=Math.min(o,btl.resize.iMaxH,g.height);}else{if(c&lt;g.top){o-=g.top-c;c=g.top;}else{if(c&gt;(g.top+g.height-d)){c=(g.top+g.height-d);}}var a=g.top+g.height-c-btl.resize.boxModelH;if(o&gt;a){o=a;}if(o&lt;d){o=d;}}}btl.resize.newY=c;btl.resize.newH=o;}};btl.resize.sendEvent=function sendEvent(d,g,b,e,c){if(c){var f=bb.document.createEvent("MouseEvents");f.initMouseEvent(g,Boolean(b),Boolean(e),c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget);f.pageX=c.pageX;f.pageY=c.pageY;f.viewTarget=c.viewTarget;}else{var f=bb.document.createEvent("Events");f.initEvent(String(g),Boolean(b),Boolean(e));}f.resizeEdge=btl.resize.currentResizeEdge;var a=[];if(btl.resize.currentResizeEdge&amp;btl.resize.VERTICAL){a.push("vertical");}if(btl.resize.currentResizeEdge&amp;btl.resize.HORIZONTAL){a.push("horizontal");}if(btl.resize.currentResizeEdge&amp;btl.resize.LEFT){a.push("left");}if(btl.resize.currentResizeEdge&amp;btl.resize.TOP){a.push("top");}if(btl.resize.currentResizeEdge&amp;btl.resize.RIGHT){a.push("right");}if(btl.resize.currentResizeEdge&amp;btl.resize.BOTTOM){a.push("bottom");}f.resizeEdges=a.length?a.join(" "):"none";f.originalLeft=this.originalX;f.originalTop=this.originalY;f.originalWidth=this.originalW;f.originalHeight=this.originalH;f.newLeft=this.newX;f.newTop=this.newY;f.newWidth=this.newW;f.newHeight=this.newH;f.deltaX=this.deltaX;f.deltaY=this.deltaY;f.offsetLeft=this.offsetLeft;f.offsetTop=this.offsetTop;d.dispatchEvent(f);return !f.defaultPrevented;};btl.resize.stopAndClean=function resize_stopAndClean(){if(btl.resize.isResizing){bb.document.removeEventListener("mouseup",btl.resize.handleMouseUp,false);bb.document.removeEventListener("mousemove",btl.resize.handleMouseMove,false);bb.document.removeEventListener("keydown",btl.resize.handleKeyDown,false);bb.document.removeEventListener("click",btl.resize.handleClick,false);bb.html.enableUserSelect(document.body);if(btl.resize.currentSymbol&amp;&amp;btl.resize.currentSymbol!=btl.resize.currentElement){btl.resize.currentSymbol.style.display="none";}btl.resize.outlineElement.style.top="-10000px";btl.resize.lineElement.style.top="-10000px";btl.resize.currentSymbol=null;btl.resize.currentElement=null;btl.resize.currentController=null;btl.resize.currentResizeEdge=0;btl.resize.isResizing=false;}};btl.resize.positionCursor=function positionCursor(c,a,d,b){a=(a&gt;bb.viewport.scrollWidth-50?bb.viewport.scrollWidth-50:a)-50;d=(d&gt;bb.viewport.scrollHeight-50?bb.viewport.scrollHeight-50:d)-50;if(b&amp;&amp;b!=btl.resize.cursorElement.style.cursor){if(bb.browser.opera){btl.resize.cursorElement.style.left="-100px";btl.resize.cursorElement.style.top="-100px";btl.resize.cursorElement=btl.resize.aCursors[btl.resize.iCursor=++btl.resize.iCursor%2];}btl.resize.cursorElement.style.cursor=b;}btl.resize.cursorElement.style.left=a+"px";btl.resize.cursorElement.style.top=d+"px";btl.resize.cursorElement.controller=c;};btl.resize.handleMouseMove=function handleMouseMove(b){var a={newX:btl.resize.newX,newY:btl.resize.newY,newW:btl.resize.newW,newH:btl.resize.newH};btl.resize.determineCoordinates(b.pageX,b.pageY);if(btl.resize.sendEvent(btl.resize.currentController,"resize",false,true,b)){btl.resize.applyCoordinates(btl.resize.currentSymbol);if(btl.resize.currentSymbol==btl.resize.currentElement){bb.ui.reflow(btl.resize.currentController,false,true);}}else{btl.resize.newX=a.newX;btl.resize.newY=a.newY;btl.resize.newW=a.newW;btl.resize.newH=a.newH;}};btl.resize.handleMouseUp=function resize_handleMouseUp(a){if(a.button==0){a.preventDefault();a.stopImmediatePropagation();btl.resize.stopResize(a);}};btl.resize.handleClick=function handleClick(a){if(a.button==0){a.stopImmediatePropagation();a.preventDefault();bb.document.removeEventListener("click",arguments.callee,true);}};btl.resize.handleKeyDown=function handleKeyDown(a){if(a.keyIdentifier=="U+001B"){a.preventDefault();var b=btl.resize.currentController;btl.resize.cancelResize();btl.resize.sendEvent(b,"resizeEnd",true,true);if(btl.resize.currentElement==btl.resize.currentSymbol){btl.resize.applyCoordinates(btl.resize.currentElement);}btl.resize.stopAndClean();}};</d:resource></d:behavior><d:behavior name="resize" extends="b:resizeBase"><d:attribute name="resizeEdges" default="left top right bottom"/><d:attribute name="resizeGripSize" default="8"/><d:attribute name="resizeType" default="outline"/><d:attribute name="resizeConstraint"/><d:property name="resizeConstraint"><d:getter type="text/javascript">var a=this.getAttribute("resizeConstraint");if(a&amp;&amp;(a!="")){var b=bb.evaluateSmart(a,this,this);return b?b.viewGate:null;}</d:getter></d:property><d:attribute name="resizeMinWidth" default="10px"/><d:attribute name="resizeMinHeight" default="10px"/><d:attribute name="resizeMaxWidth"/><d:attribute name="resizeMaxHeight"/><d:attribute name="minimized" default="false" onchange="this.setProperty(name, btl.isTrueValue(name, value))"/><d:attribute name="maximized" default="false" onchange="this.setProperty(name, btl.isTrueValue(name, value))"/><d:property name="resizable"><d:getter type="text/javascript">return(this._._resizable===false?false:true);</d:getter></d:property><d:property name="minimized" type="boolean"><d:setter type="text/javascript">if(value){this.minimize();}else{if(this._._minimized){this.restore();}}</d:setter><d:getter type="text/javascript">return btl.isTrueValue("minimized",this.getAttribute("minimized"));</d:getter></d:property><d:property name="maximized" type="boolean"><d:setter type="text/javascript">if(value){this.maximize();}else{if(this._._maximized){this.restore();}}</d:setter><d:getter type="text/javascript">return btl.isTrueValue("maximized",this.getAttribute("maximized"));</d:getter></d:property><d:property name="restoreCoordinates"/><d:method name="maximize"><d:body type="text/javascript">if(btl.resize.isResizing||(!this._._minimized&amp;&amp;this._._maximized)||this.getAttribute("resizeType")=="abstract"){return;}btl.resize.startResize(this,this.viewNode,btl.resize.ALL,0,0,this.viewNode,parseInt(this.getAttribute("resizeMinWidth")||"0",10),parseInt(this.getAttribute("resizeMinHeight")||"0",10),parseInt(this.getAttribute("resizeMaxWidth")||"0",10),parseInt(this.getAttribute("resizeMaxHeight")||"0",10),this.getProperty("resizeConstraint")||this.viewNode.offsetParent);if(btl.resize.isResizing){var c={left:btl.resize.originalX,top:btl.resize.originalY,width:btl.resize.originalW,height:btl.resize.originalH};btl.resize.determineCoordinates(10000,10000);btl.resize.applyCoordinates(this.viewNode);var b=this._._minimized;var a=this._._maximized;this._._isCurrentlyMaximized=true;this._._minimized=false;this._._maximized=true;if(btl.resize.stopResize()){this._._resizable=false;if(!b&amp;&amp;!a){this.setProperty("restoreCoordinates",c);}this.setAttribute("minimized","false");this.setAttribute("maximized","true");}else{this._._minimized=b;this._._maximized=a;}this._._isCurrentlyMaximized=false;}</d:body></d:method><d:method name="restore"><d:body type="text/javascript">if(this._._minimized&amp;&amp;this._._maximized){this._._maximized=false;return this.maximize();}if(btl.resize.isResizing||!(Boolean(this._._minimized)^Boolean(this._._maximized))||this.getAttribute("resizeType")=="abstract"){return;}var c=this.getProperty("restoreCoordinates");if(!c){return;}btl.resize.startResize(this,this.viewNode,btl.resize.ALL,0,0,this.viewNode,parseInt(this.getAttribute("resizeMinWidth")||"0",10),parseInt(this.getAttribute("resizeMinHeight")||"0",10),parseInt(this.getAttribute("resizeMaxWidth")||"0",10),parseInt(this.getAttribute("resizeMaxHeight")||"0",10),this.getProperty("resizeConstraint")||this.viewNode.offsetParent);if(btl.resize.isResizing){btl.resize.newX=c.left;btl.resize.newY=c.top;btl.resize.newW=c.width;btl.resize.newH=c.height;btl.resize.applyCoordinates(this.viewNode);var b=this._._minimized;var a=this._._maximized;this._._minimized=false;this._._maximized=false;if(btl.resize.stopResize()){this._._resizable=true;this.setAttribute("minimized","false");this.setAttribute("maximized","false");this.setProperty("restoreCoordinates",null);}else{this._._minimized=b;this._._maximized=a;}}</d:body></d:method><d:method name="minimize"><d:body type="text/javascript">if(btl.resize.isResizing||this._._minimized||this.getAttribute("resizeType")=="abstract"){return;}btl.resize.startResize(this,this.viewNode,btl.resize.RIGHT|btl.resize.BOTTOM,0,0,this.viewNode,parseInt(this.getAttribute("resizeMinWidth")||"0",10),parseInt(this.getAttribute("resizeMinHeight")||"0",10),parseInt(this.getAttribute("resizeMaxWidth")||"0",10),parseInt(this.getAttribute("resizeMaxHeight")||"0",10),this.getProperty("resizeConstraint")||this.viewNode.offsetParent);if(btl.resize.isResizing){var a={left:btl.resize.originalX,top:btl.resize.originalY,width:btl.resize.originalW,height:btl.resize.originalH};btl.resize.determineCoordinates(-10000,-10000);this._._minimized=true;btl.resize.applyCoordinates(this.viewNode);if(btl.resize.stopResize()){this._._resizable=false;if(!this._._maximized){this.setProperty("restoreCoordinates",a);}this.setAttribute("minimized","true");}else{this._._minimized=false;}}</d:body></d:method><d:handler event="reflow" type="text/javascript">if(!this._._isCurrentlyMaximized&amp;&amp;this._._maximized&amp;&amp;!this._._minimized){this._._minimized=true;this._._maximized=false;this.maximize();this._._minimized=false;}</d:handler><d:handler event="construct" type="text/javascript">this._._resizable=true;bb.ui.reflow.add(this);</d:handler><d:handler event="mouseleave" type="text/javascript">if(btl.resize.isResizing){return;}btl.resize.currentResizeEdge=0;btl.resize.positionCursor(null,-100,-100);</d:handler><d:handler event="mousedown" type="text/javascript">if(!btl.resize.isResizing&amp;&amp;event.button==0&amp;&amp;btl.resize.currentResizeEdge&gt;0){event.stopImmediatePropagation();event.preventDefault();var b=this;var a;switch(this.getAttribute("resizeType")){case"abstract":break;case"real":a=this.viewNode;break;case"line":a=btl.resize.lineElement;a.style.borderLeftStyle=btl.resize.currentResizeEdge&amp;btl.resize.LEFT?"solid":"none";a.style.borderRightStyle=btl.resize.currentResizeEdge&amp;btl.resize.RIGHT?"solid":"none";a.style.borderTopStyle=btl.resize.currentResizeEdge&amp;btl.resize.TOP?"solid":"none";a.style.borderBottomStyle=btl.resize.currentResizeEdge&amp;btl.resize.BOTTOM?"solid":"none";break;case"outline":default:a=btl.resize.outlineElement;}btl.resize.startResize(this,this.viewNode,btl.resize.currentResizeEdge,event.pageX,event.pageY,a,parseInt(this.getAttribute("resizeMinWidth")||"0",10),parseInt(this.getAttribute("resizeMinHeight")||"0",10),parseInt(this.getAttribute("resizeMaxWidth")||"0",10),parseInt(this.getAttribute("resizeMaxHeight")||"0",10),this.getProperty("resizeConstraint"));}</d:handler><d:handler event="mousemove" type="text/javascript">if(btl.resize.isResizing){return;}if(this!=event.target||!this.getProperty("resizable")){return;}var d=this.getAttribute("resizeEdges");if(this.getAttribute("resizeType")!="abstract"){var e=bb.html.getStyle(this.viewNode,"position");if(!e||e=="static"){d=d.replace(/top|left/g,"");}}var a=parseInt(this.getAttribute("resizeGripSize")||"0",10);var b=btl.resize.detectResizeEdge(this.viewNode,event.pageX,event.pageY,d,a);if(b){var c=[];if(b&amp;btl.resize.TOP){c.push("n");}if(b&amp;btl.resize.BOTTOM){c.push("s");}if(b&amp;btl.resize.RIGHT){c.push("e");}if(b&amp;btl.resize.LEFT){c.push("w");}c.push("-resize");btl.resize.positionCursor(this,event.pageX,event.pageY,c.join(""));}else{btl.resize.positionCursor(null,-100,-100);}</d:handler><d:handler event="resize" type="text/javascript">btl.resize.positionCursor(btl.resize.currentController,event.pageX,event.pageY);</d:handler><d:handler event="resizeEnd" type="text/javascript">if(this.getAttribute("resizeType")!="abstract"){btl.resize.applyCoordinates(btl.resize.currentElement);}btl.resize.positionCursor(null,-100,-100);</d:handler><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript">if(btl.isTrueValue("maximized",this.getAttribute("maximized"))){this.maximize();}else{if(btl.isTrueValue("minimized",this.getAttribute("minimized"))){this.minimize();}}</d:handler></d:behavior></d:namespace></d:tdl><d:namespace xmlns:p="http://www.backbase.com/2008/portal" name="http://www.backbase.com/2008/portal" xml:base="bindings/www.backbase.com.2008.portal/portal/portal.xml"><d:element name="portalItem" abstract="true"><d:property name="loaded" onset="" onget="return this._._loaded || false;"/><d:property name="portal" onset=""/><d:property name="settings" type="object" onset=""/><d:property name="templateId" onset=""/><d:method name="getPreference"><d:argument name="name" type="string" required="true"/><d:body type="text/javascript">return this._._preferences[name]||null;</d:body></d:method><d:method name="setPreference"><d:argument name="name" type="string" required="true"/><d:argument name="value"/><d:body type="text/javascript">if(this._._preferences[name]!=value){var b=this._._preferences[name];this._._preferences[name]=value;var a=bb.document.createEvent("MutationEvent");a.initMutationEvent("preferenceModified",true,false,null,b,this._._preferences[name],name);this.dispatchEvent(a);this.synchronize("update");}</d:body></d:method><d:method name="getSetting"><d:argument name="sName" type="string" required="true"/><d:argument name="sType" type="string"/><d:body type="text/javascript">var a={portal:{animationSpeed:"300",containerReorder:"true",gadgetWindowButtons:"unload;Close,maximize;Maximize,restore;Restore,minimize;Minimize,showPreferences;Edit preferences,hidePreferences;Close preferences,refresh;Refresh",gadgetWindowMargin:"8",gadgetWindowTemplate:"",maxContainers:"0",minColWidth:"100px",portalSyncType:"delta",portalSyncURL:"session",portalPTCURL:"proxy"},container:{className:"",closable:"true",colResizable:"false",draggable:"true",inlineTitleEdit:"true"},gadgetWindow:{autoRefresh:"0",className:"",closable:"true",denyInsert:"none",draggable:"true",editable:"true",maximizable:"true",maximizedMode:"exactfit",minimizable:"true",refreshable:"true"}};var c="";if(portal.overRideAnimation&amp;&amp;sName=="animationSpeed"){c="0";}else{if(this._._settings&amp;&amp;sName in this._._settings){c=String(this._._settings[sName]);}else{var b=this.getProperty("localName");if(sName in a[b]){c=String(a[b][sName]);}}}switch(sType){case"boolean":return c=="true";break;case"integer":return isNaN(parseInt(c,10))?0:parseInt(c,10);break;case"float":return isNaN(parseFloat(c,10))?0:parseFloat(c,10);break;default:return c;break;}</d:body></d:method><d:method name="synchronize"><d:argument name="sAction" type="string" required="true"/><d:argument name="fnUserCallback" type="function"/><d:body type="application/javascript">var m=this.getProperty("portal");var a=m.getProperty("session");if(!a){return;}var e={};var g=this.getProperty("localName")=="gadgetWindow"?"gadgets":(this.getProperty("localName")+"s");var s=function(C,u,A,v,t,w,B){if(!w){if(B){B(false);}return;}var z={};var y=false;for(var x in t){if(t[x]||(typeof t[x]=="string")||!isNaN(parseInt(t[x]))){y=true;if(typeof t[x]=="object"){z[x]=gadgets.json.stringify(t[x]);}else{z[x]=t[x];}}}if(A=="update"&amp;&amp;!y){return;}z.module=t.module=u.getProperty("localName")=="gadgetWindow"?"gadget":u.getProperty("localName");z.action=t.action=A;if(v){z.id=t.id=v;}C.updateSession(u,z,t,w,B);};var k=this._._id||this.getAttribute("id");var o=k?a[g][k]:false;var q=this.getProperty(this.getProperty("localName")=="gadgetWindow"?"container":"portal");if(q&amp;&amp;q._){e.pid=q._._id;}switch(sAction){case"add":if(!k&amp;&amp;!o){e.preferences=this._._preferences.copy();if(this._._templateId){e.tid=this._._templateId;}e.occurrences=q.getOccurrence(this);var d=this;var l=function(t){if(d.getProperty("localName")=="gadgetWindow"){a.gadgets[t.id]={src:d._._src,tid:t.tid,preferences:t.preferences};}else{a.containers[t.id]={content:{},tid:t.tid,preferences:t.preferences};}q.updateOccurrences(t);};}break;case"update":if(o){var j=false;var b=this.getProperty("localName")=="gadgetWindow";if(!this._._preferences.equals(o.preferences)){j=true;e.preferences=this._._preferences.copy();if(b){var f=this.getProperty("class").preferences;for(var n in f){if(f.hasOwnProperty(n)){var h=f[n];if(h.type=="readonly"){delete e.preferences[n];}}}}}if(this!=m){var q=this.getProperty(b?"container":"portal");var r=this._orgContainer||q;var p=a[r.getProperty("localName")+"s"][r._._id];var c=p.content=p.content||{};var i=q.getOccurrence(this);if(q!=r||!i.equals(c[k])){j=true;if(q!=r){e.opid=r._._id;}e.occurrences=i;}}if(j){var l=function(t){if(t.preferences){o.preferences=t.preferences;}if(t.occurrences||t.opid){q.updateOccurrences(t);}};}}break;case"reset":case"remove":if(o){var d=this;var l=function(v){if(g=="portals"||g=="containers"){var w=(a[g][k]||0).content||{};var u=k;var t=g;g=t=="portals"?"containers":"gadgets";for(k in w){l(v);}g=t;k=u;}delete a[g][k];};}break;}s(m,this,sAction,k,e,l,fnUserCallback);</d:body></d:method></d:element><d:element name="portalContainerItem" extends="p:portalItem" abstract="true"><d:property name="gadgets" type="array" onget="return this.getElementsByTagNameNS(\'http://www.backbase.com/2008/portal\', \'gadgetWindow\')" onset=""/><d:method name="getGadgetsByTemplateId"><d:argument name="templateId" required="true"/><d:body type="text/javascript">var c=this.getProperty("gadgets");var a=[];for(var b=0;b&lt;c.length;b++){if(c[b].getProperty("templateId")==templateId){a.push(c[b]);}}return a;</d:body></d:method></d:element><d:element name="portal" extends="p:portalContainerItem"><d:resource type="text/javascript" xml:base="portal.js">portal.TEMPLATE_NAME=/__GADGET__/g;portal.LAYOUT_CHECK_TIMEOUT=40;portal.GADGET_PLACEHOLDER="gadget-placeholder";portal.GADGET_UNMANAGED="unmanaged";portal.overRideAnimation=false;portal._autoRefresh={list:[],startTime:new Date(),poolingInterval:60,queueInterval:5,poolingId:0,set:function set(a,c){if(isNaN(c)){c=0;}var d=-1;for(var b=0;b&lt;this.list.length&amp;&amp;d&lt;0;b++){if(a==this.list[b][0]){d=b;}}if(d&gt;=0){if(c){this.list[d][1]=c;return true;}else{this.list.splice(d,1);}}else{if(c){this.list.push([a,c]);return true;}}return false;},queue:[],start:function start(){var a=this;this.queue=[];this.poolingId=setInterval(function b(){var e=Math.round((new Date()-a.startTime)/60000);var f,c;if(a.queue.length){return;}for(var d=0;d&lt;a.list.length;d++){c=a.list[d][0];if(!c||!c._){a.list.splice(d--,1);continue;}if(e%a.list[d][1]===0){a.queue[a.queue.length]=c;}}if(a.queue.length){(function(){if(a.queue.length){var l=Math.round((new Date()-a.startTime)/1000);var k,g,j=Math.round((60-l%60)/a.queueInterval);for(var h=j&gt;0?Math.ceil(a.queue.length/j):a.queue.length;a.queue.length&amp;&amp;h&gt;0;h--){g=a.queue.pop();if(g&amp;&amp;g._){g.refresh();}}}if(a.queue.length){setTimeout(arguments.callee,a.queueInterval*1000);}})();}},a.poolingInterval*1000);},stop:function stop(){if(this.poolingId){this.queue=[];clearInterval(this.poolingId);}}};portal._autoRefresh.start();portal._getGadgetDimensions=function _getGadgetDimensions(a){return{top:a.absoluteTop,left:a.parentColumn?a.parentColumn.pixLeft:0,width:portal._getGadgetWidth(a.parentColumn,a),height:100};};portal._getGadgetWidth=function _getGadgetWidth(b,c){var a=c.colSpan?portal._calculateColSpanWidth(b,c):b.pixWidth;if(bb.html.getStyle(c,"box-sizing")=="content-box"){a-=portal._getBorderPaddingWidth(c);}return a;};var oldConvert=bb.html.convertToPixels;bb.html.convertToPixels=function convertToPixels(){return oldConvert.apply(this,arguments);};var oldGetStyle=bb.html.getStyle;bb.html.getStyle=function getStyle(){return oldGetStyle.apply(this,arguments);};portal._getBorderPaddingWidth=function _getBorderPaddingWidth(a){var b=a.offsetWidth-a.clientWidth;b+=bb.html.convertToPixels(bb.html.getStyle(a,"padding-left"),a);b+=bb.html.convertToPixels(bb.html.getStyle(a,"padding-right"),a);return b;};portal._getNodeWidth=function _getNodeWidth(b){var a=b.offsetWidth;return bb.html.getStyle(b,"box-sizing")=="content-box"?a-portal._getBorderPaddingWidth(b):a;};portal._getMaximizedGadgetWidth=function _getMaximizedGadgetWidth(b,a){var c=b.viewGate.offsetWidth-portal._getBorderPaddingWidth(b.viewGate);if(bb.html.getStyle(a.viewNode,"box-sizing")=="content-box"){c-=portal._getBorderPaddingWidth(a.viewNode);}return c;};portal._getGadgetHeight=function _getGadgetHeight(d,f){if(f.colSpanItem){return portal._getGadgetHeight(f.colSpanItem.parentColumn,f.colSpanItem);}if(!f.offsetHeight){return 0;}var c=portal._getGadgetWidth(d,f);if(!c||!f.offsetHeight||c==portal._getNodeWidth(f)){return f.offsetHeight;}var e,a=f.style.width;bb.html.setStyle(f,"width",c+"px");if(f.controller){var b=bb.document.createEvent("CustomEvent");b.initEvent("resize",false,false);f.controller.dispatchEvent(b);}e=f.offsetHeight;bb.html.setStyle(f,"width",a);return e;};portal._getGadgetNextTop=function _getGadgetNextTop(b,d,a,e){if(d){var c=portal._getGadgetHeight(b,d);if(c!=0){c+=e;}a=d.absoluteTop+c;}return a;};portal._calculateColSpanTop=function _calculateColSpanTop(f,e,g){if(f.colSpan&amp;&amp;f.colSpanItems){for(var c=0;c&lt;f.colSpan;c++){var b=f.colSpanItems[c];if(b&amp;&amp;b.parentColumn){if(b.parentColumn==f.parentColumn){break;}var d=b.parentColumn;var a=portal._getGadgetNextTop(d,d.items[bb.array.indexOf(d.items,b)-1],0,g);if(a&gt;e){e=a;}}}}else{if(f.colSpanItem){e=portal._calculateColSpanTop(f.colSpanItem,e,g);}}return e;};portal._updateColSpan=function _updateColSpan(d,f,e){if(f.colSpanItem){return;}if(!("colSpanMax" in f)){f.colSpanMax=0;}if(f.colSpanMax&lt;e){e=f.colSpanMax;}var a=Math.min(f.colSpanItems instanceof Array?f.colSpanItems.length:0,f.colSpanMax);if(f.colSpanMax&lt;a){while(f.colSpanItems.length&gt;f.colSpanMax){var c=f.colSpanItems.pop();if(c&amp;&amp;c.parentColumn){d.removeFromColumn(c);}}a=f.colSpanMax;}f.colSpan=a;if(f.colSpan&gt;e){for(var b=e;b&lt;f.colSpan;b++){var c=f.colSpanItems[b];if(c&amp;&amp;c.parentColumn){d.removeFromColumn(c);}}f.colSpanItems.splice(e,f.colSpan-e);f.colSpan=e;f.style.width=portal._getGadgetWidth(f.parentColumn,f)+"px";}else{if(e&gt;f.colSpan){var g=f.parentColumn,b=0;while(b++&lt;f.colSpan){g=g.nextColumn;}if(!f.colSpanItems){f.colSpanItems=[];}for(b=f.colSpan;b&lt;e;b++){g=g.nextColumn;if(!g){break;}if(!f.colSpanItems[b]){f.colSpanItems[b]={colSpanItem:f,iInitIndex:0};}d.appendToColumn(g,f.colSpanItems[b],0);f.colSpan++;}}}};portal._calculateColSpanWidth=function _calculateColSpanWidth(d,e){var a=d;for(var b=0,c=d;c&amp;&amp;b&lt;e.colSpan;b++){c=a.nextColumn;if(c){a=c;}}return a.pixLeft+a.pixWidth-d.pixLeft;};portal._applyColumnWidth=function _applyColumnWidth(a,f,c,e){var g;var h=a.getSetting("gadgetWindowMargin","integer");var b=a.getSetting("animationSpeed","integer");while(g=f.items[c++]){g.absoluteTop=e;if(!g.colSpanItem&amp;&amp;(f.pixLeft||f.pixWidth)){var d=portal._getGadgetWidth(f,g);if(b===0){bb.html.setStyle(g,"top",e+"px");bb.html.setStyle(g,"left",f.pixLeft+"px");bb.html.setStyle(g,"width",d+"px");}else{g.iAniTop=bb.smil.animate(g,{attributeName:"top",dur:b+"ms",to:e+"px",fill:"freeze"});bb.smil.animate(g,{attributeName:"left",dur:b+"ms",to:f.pixLeft+"px",fill:"freeze"});bb.smil.animate(g,{attributeName:"width",dur:b+"ms",to:d+"px",fill:"freeze"});}}e=portal._getGadgetNextTop(f,g,0,h);e=portal._calculateColSpanTop(g,e,h);}};portal._getColumnWidth=function _getColumnWidth(c,e,b){var d=portal._getNodeWidth(c.viewGate);if(e.cachedTotalWidth!==d){var f=c.getSetting("gadgetWindowMargin","integer");e.cachedTotalWidth=d;var a=0;if(e.width.match(/%$/)){d-=(f*(b-1));a=Math.round(parseFloat(e.width)/100*d);}else{a=parseInt(e.width);}e.cachedWidth=a;}return e.cachedWidth;};portal._layoutHeightChecker=function _layoutHeightChecker(h){if(h&amp;&amp;h._&amp;&amp;!h.pauseLayout){var a=h.getProperty("activeContainer");var o=a?a._._columns||[]:[];var v=0;var p=h.getSetting("gadgetWindowMargin","integer");var d=0;var k,x=0;if(a&amp;&amp;a._._maximizedGadget){var c=a._._maximizedGadget;c.viewNode.style.top=c.viewNode.style.left="0px";if(bb.html.getBoxObject(h.viewGate,"content").width!=bb.html.getBoxObject(c.viewNode,"border").width){bb.html.setStyle(c.viewNode,"width",portal._getMaximizedGadgetWidth(h,c)+"px");var n=bb.document.createEvent("CustomEvent");n.initEvent("resize",false,false);c.dispatchEvent(n);}if(c.getSetting("maximizedMode")=="exactfit"){var e=bb.html.getBoxObject(bb.viewport);var g=bb.html.getBoxObject(c.viewGate,"content");var s=bb.html.getBoxObject(c.viewNode);var q=0;var u=bb.html.getBoxObject(h.viewNode,"content");q=document.body.offsetHeight-(u.top+u.height)+4;var l=g.top-((g.top+g.height)-(s.top+s.height));var b=(e.height-l-q);if(b&lt;400){b=400;}if(b!=c.viewGate.offsetHeight){c.viewGate.style.height=b+"px";var n=bb.document.createEvent("CustomEvent");n.initEvent("resize",false,false);c.dispatchEvent(n);}}else{if(c.viewGate.style.height){c.viewGate.style.height="";}}v=c.viewNode.offsetHeight;}else{while(k=o[x++]){var w=portal._getColumnWidth(h,k,o.length);if(k.pixLeft!=d||k.pixWidth!=w){k.isChanged=true;k.pixLeft=d;k.pixWidth=w;}d+=w+p;}var k,x=0;while(k=o[x++]){var r=k.items,t=0,m,f=null,l=0;while(m=r[t++]){if(k.isChanged&amp;&amp;!m.colSpanItem){bb.html.setStyle(m,"left",k.pixLeft+"px");bb.html.setStyle(m,"width",portal._getGadgetWidth(k,m)+"px");if(m.controller){var n=bb.document.createEvent("CustomEvent");n.initEvent("resize",false,false);m.controller.dispatchEvent(n);}}if(m.colSpanItem){l=m.absoluteTop=m.colSpanItem.absoluteTop;}else{l=portal._getGadgetNextTop(k,f,l,p);l=portal._calculateColSpanTop(m,l,p);if(l!==m.absoluteTop){if(m.iAniTop){bb.smil.stop(m.iAniTop);m.iAniTop=null;}bb.html.setStyle(m,"top",l+"px");m.absoluteTop=l;}}v=Math.max(l+portal._getGadgetHeight(k,m),v);f=m;}delete k.isChanged;}}if(v!==h.viewGate.cachedHeight){h.viewGate.cachedHeight=v;h.viewGate.style.height=v+"px";}}};portal._object=function portal_object(b){if(b instanceof Object){var c=this.copy(b);for(var a in c){if(c.hasOwnProperty(a)){this[a]=c[a];}}}};portal._object.prototype={};portal._object.prototype.copy=function portal_object_copy(d){var b;if(!arguments.length){d=this;}if(d instanceof Array){b=[];for(var c=0;c&lt;d.length;c++){b[c]=arguments.callee(d[c]);}}else{if(d instanceof Object){b={};for(var a in d){if(d.hasOwnProperty(a)){b[a]=arguments.callee(d[a]);}}}else{if(typeof d=="function"){}else{b=d;}}}return b;};portal._object.prototype.equals=function portal_object_equals(c,a){if(c instanceof Object){for(var b in this){if(this.hasOwnProperty(b)&amp;&amp;!(b in c)){return false;}}for(var b in c){if(c.hasOwnProperty(b)){if(!(b in this)){return false;}else{if(this[b] instanceof Object){if(!portal._object.prototype.equals.call(this[b],c[b],a)){return false;}}else{if(a&amp;&amp;this[b]!==c[b]){return false;}else{if(this[b]!=c[b]){return false;}}}}}}return true;}return a?(c===this):(c==this);};(function(){var o="http://www.backbase.com/2008/gadget",r="http://www.backbase.com/2006/tdl",a="http://www.w3.org/1999/xhtml";function c(s){s=s||{};this.requireSubmit=false;this.preferences={};this.handlers={};this.includes=[];this.src=String(s.src);this.content="";this.icon="";this.title="";this.htmlClass="";this.htmlStyle="";this.bodyClass="";this.bodyStyle="";this.noVisiblePreferences=true;this.isLoaded=Boolean(s.isLoaded)||false;this.callbackQueue=[];if(!this.isLoaded){this.requiresQueue={internal:false};}}c.prototype.executeWhenReady=function(t){if(this.isLoaded){var s=this;setTimeout(function(){t(s);},1);}else{this.callbackQueue.push(t);}};c.prototype.build=function(s){if(this.isLoaded){return;}var E=s.documentElement;var Q=s.getElementsByTagName("head")[0];var D=s.getElementsByTagName("body")[0];if(Q){var A=Q.getElementsByTagName("*"),w=0,K,v=[],C,y=[];while(K=A[w++]){C=K.getAttribute("name");switch(K.namespaceURI){case"http://www.backbase.com/2008/gadget":switch(portal.xml.getLocalName(K)){case"preferences":this.requireSubmit=K.getAttribute("requireSubmit")=="true";break;case"preference":this.preferences[C]={type:K.getAttribute("type"),"default":K.getAttribute("default")||"",label:K.getAttribute("label"),onchange:K.getAttribute("onchange"),values:[]};if(this.preferences[C].type=="range"){var L=parseInt(K.getAttribute("min"),10);var M=parseInt(K.getAttribute("max"),10);var F=parseInt(K.getAttribute("step"),10)||1;for(var O=L;O&lt;=M;O=O+F){this.preferences[C].values.push({value:O});}}break;case"enumeration":var R={value:K.getAttribute("value")||K.textContent||K.text};R.label=K.getAttribute("label")||R.value;this.preferences[K.parentNode.getAttribute("name")].values.push(R);break;default:throw"Unknown element in gadget definition "+K.nodeName;break;}break;case"http://www.w3.org/1999/xhtml":switch(portal.xml.getLocalName(K)){case"style":v.push(K.textContent||K.text||"");break;case"link":var N=K.getAttribute("href");if(N){if(N.match(/standalone\\.css$/)){break;}N=bb.uri.resolveUri(N,this.src);var J=K.getAttribute("rel");if(J=="icon"){this.icon=N;}else{if(J=="stylesheet"){if(!e[N]){e[N]={loaded:true,src:N};var x=document.createElement("link");x.type="text/css";x.rel=J;x.href=N;document.head.appendChild(x);}}}}break;case"script":var N=K.getAttribute("src");if(!N){N=K.textContent||K.text||"";if(N.length){f(this,N,"internal_javascript");}}else{if(N.match(/standalone\\.js$/)||N.match(/engine\\/backbase\\.js$/)){break;}f(this,bb.uri.resolveUri(N,this.src),"external_javascript");}break;case"title":this.title=bb.xml.serialize(K,true);break;}break;}}var z=v.join("");if(z.length){bb.html.addStyleSheet(i(z,this.src));}}var A=D.getElementsByTagName("*"),w=0,K,u;while(K=A[w++]){switch(K.namespaceURI){case"http://www.w3.org/1999/xhtml":var P=portal.xml.getLocalName(K);switch(P){case"area":case"a":u=K.getAttribute("href");if(u&amp;&amp;u.indexOf("://")&lt;0){K.setAttribute("href",bb.uri.resolveUri(u,this.src));}break;case"img":case"input":case"iframe":u=K.getAttribute("src");if(u&amp;&amp;u.indexOf("://")&lt;0){var H=bb.uri.resolveUri(u,this.src);if(P=="iframe"&amp;&amp;bb.browser.gecko){var G=K.ownerDocument.createElement("dummy");K.parentNode.replaceChild(G,K);K.setAttribute("src",H);G.parentNode.replaceChild(K,G);}else{K.setAttribute("src",H);}}break;case"form":u=K.getAttribute("action");if(u&amp;&amp;u.indexOf("://")&lt;0){K.setAttribute("action",bb.uri.resolveUri(u,this.src));}break;case"script":if(K.getAttribute("type")=="text/backbase+xml"||K.getAttribute("type")=="application/backbase+xml"||K.getAttribute("type")=="application/backbase+ssr"){K.setAttribute("xml:base",this.src);m(K);}else{bb.command.trace(null,\'Script tag with type "\'+K.getAttribute("type")+\'" than text/backbase+xml detected in body of gadget. This script tag is ignored\');}break;}break;}}this.buildTDL(D);this.buildIncludes(D);for(var O in this.preferences){if(this.preferences[O]["type"]!="hidden"&amp;&amp;this.preferences[O]["type"]!="readonly"){this.noVisiblePreferences=false;break;}}this.content=bb.string.trim(bb.xml.serialize(D,true).replace(/&lt;([\\w:]+)([^&gt;]*)\\/&gt;/gi,"&lt;$1$2&gt;&lt;/$1&gt;"));this.htmlClass=E.getAttribute("class");this.htmlStyle=E.getAttribute("style");this.bodyClass=D.getAttribute("class");this.bodyStyle=D.getAttribute("style");var t=D.attributes;for(var w=0,I,B;I=t[w];w++){B=portal.xml.getLocalName(I);if(I.namespaceURI=="http://www.backbase.com/2008/gadget"&amp;&amp;B.substr(0,2)=="on"){this.handlers[B.substr(2)]=I.nodeValue;}}l(this.src,"internal");};c.prototype.buildTDL=function(t){var w=bb.xml.getElementsByTagNameNS(t,r,"tdl").concat(bb.xml.getElementsByTagNameNS(t,r,"namespace")),s=c.builders[r],v=0,u=null;while(u=w[v++]){s[portal.xml.getLocalName(u)].call(this,u);}};c.prototype.buildIncludes=function(t){var v=bb.xml.getElementsByTagNameNS(t,o,"include"),s=c.builders[o]["include"],u=null,w=0;while(u=v[w++]){this.includes.push(s(u));}};c.prototype.executeQueue=function(){var s=this.callbackQueue;while(s.length){s.shift().apply(this,arguments);}};c.builders={};c.builders[o]={};c.builders[o]["include"]=function(u){var t=u.ownerDocument.createElement("div"),v=new portal.gadget.IncludeConfig({url:String(u.getAttribute("src")||""),proxy:(u.getAttribute("proxy")||"").toLowerCase()=="true",method:(u.getAttribute("method")||"GET").toUpperCase()});for(var s=0,w=null;s&lt;u.childNodes.length;++s){w=u.childNodes[s];var x=portal.xml.getLocalName(w);if(w.namespaceURI==o&amp;&amp;/http-(proxy-)?param/.test(x)){v.httpParams.add(new portal.gadget.HttpParam(w.getAttribute("name"),w.getAttribute("value"),x=="http-proxy-param"?"proxy":"target",w.getAttribute("method")));}else{if(w.namespaceURI==o&amp;&amp;x=="http-preference-param"){v.httpParams.add(new portal.gadget.HttpPreferenceParam(w.getAttribute("name"),w.getAttribute("method")));}else{if(w.nodeType!=1||w.namespaceURI==a){t.appendChild(w.cloneNode(true));}}}}t.setAttribute("class",portal.gadget.IncludeConfig.CSS_CLASS);u.parentNode.replaceChild(t,u);return v;};c.builders[r]={};c.builders[r]["tdl"]=c.builders[r]["namespace"]=function(s){s.setAttribute("xml:base",this.src);m(s);return bb.construct(s);};var g={};g["about:blank"]=g[""]=new c({src:"about:blank",isLoaded:true});portal._unload=function(){g=null;e=null;q=null;};var e={};var q=[];var h=null;var p=false;function f(A,t,s){A.requiresQueue[t]=false;var y=A.src;if(!p){p=true;var z=document.getElementsByTagName("script"),u,w=0,B;while(u=z[w++]){if(B=u.src){if(B.indexOf("://")&lt;0){B=bb.uri.resolveUri(B,bb.document.getProperty("baseURI"));}e[B]={loaded:true,src:B};}}var x=document.getElementsByTagName("link"),v,w=0;while(v=x[w++]){if(B=v.href){if(B.indexOf("://")&lt;0){B=bb.uri.resolveUri(B,bb.document.getProperty("baseURI"));}e[B]={loaded:true,src:B};}}}var C=e[t];if(C){if(C.loaded){setTimeout(function(){l(y,t);},1);}else{C.queue.push(y);}}else{q.push([y,t,s]);if(q.length==1){b(q[0]);}}}function b(s){var v=s[0];var t=s[1];var y=s[2];var x={};x.loaded=false;x.src=t;x.queue=[v];e[t]=x;h=x;var w=document.getElementsByTagName("head")[0];switch(y){case"internal_javascript":t=t+";\\nportal.loadExternalQueueReadyHelper();";if(bb.browser.ie){window.execScript(t);}else{var u=document.createElement("script");u.type="text/javascript";u.appendChild(document.createTextNode(t));w.appendChild(u);}break;case"external_javascript":var u=document.createElement("script");u.type="text/javascript";if(!bb.browser.opera){u.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){portal.loadExternalQueueReadyHelper();}};}u.onerror=u.onload=portal.loadExternalQueueReadyHelper;if(bb.browser.opera){setTimeout(function(){u.src=t;},0);}else{u.src=t;}w.appendChild(u);break;}}portal.loadExternalQueueReadyHelper=function(){var t=h;if(!t||t.loaded){return;}t.loaded=true;var s;while(s=t.queue.shift()){l(s,t.src);}h=null;q.shift();if(q.length){b(q[0]);}};function l(t,s){var v=g[t];if(s){v.requiresQueue[s]=true;}for(var u in v.requiresQueue){if(v.requiresQueue[u]==false){return;}}v.isLoaded=true;v.executeQueue(v);}function m(z,s){var A={};var x=z;if(!s){s=z;x=z.parentNode;}while(x){var v=x.attributes,u=0,y;if(v){while(y=v[u++]){if(y.namespaceURI=="http://www.w3.org/2000/xmlns/"||(!y.namespaceURI&amp;&amp;y.prefix=="xmlns")){var w=String(y.nodeName).toLowerCase();if(!(w in A)){A[w]=y.nodeValue;}}}}x=x.parentNode;}for(var t in A){if("setAttributeNS" in s){if(!s.getAttributeNS("http://www.w3.org/2000/xmlns/",t)){s.setAttributeNS("http://www.w3.org/2000/xmlns/",t,A[t]);}}else{if(!s.getAttribute(t)){s.setAttribute(t,A[t]);}}}}var n=/url\\s*\\([^;}]+\\)/gi;var d=/(url\\s*)\\(\\s*([\'"]?)(.+)[\'"]?\\s*\\)/i;var k=/@import\\s+[\'"][^\'"]+[\'"]/gi;var j=/(@import\\s+[\'"])([^\'"]+)([\'"])/i;function i(x,w){var v=x.match(n),u,t,s;if(v){for(t=0,s=v.length;t&lt;s;t++){u=v[t].match(d);x=x.replace(u[0],"url(\'"+bb.uri.resolveUri(u[3].replace(/(\'|")$/,""),w)+"\')");}}v=x.match(k);if(v){for(t=0,s=v.length;t&lt;s;t++){u=v[t].match(j);x=x.replace(u[0],u[1]+bb.uri.resolveUri(u[2],w)+u[3]);}}return x;}portal._getButtons=function(y,A){var s=y.split(",");var w=0;var x,v=[];while(x=s[w++]){x=x.split(";");var u=A+" "+A+"-"+x[0];var z="";if(x[1]){z=\' title="\'+portal.getLocale(x[1])+\'"\';}var t="";if(x[2]){u+=" "+A+"-text";t=portal.getLocale(x[2]);}v.push(\'&lt;a class="\',u,\'"\',z,\' href="javascript:void(0)"&gt;\',t,"&lt;/a&gt;");}return v;};portal._getButtonType=function(s,t){return s.className.match(new RegExp(t+" "+t+"-([^- ]{1,})"))[1];};portal._getButtonClass=function(s,u,t){return u+"-"+this._getButtonType(s,u)+(arguments.length&gt;2?t:"");};portal._gatherValueFromInput=function(x){switch(x.type){case"select-multiple":var t=[];for(var s=0;s&lt;x.options.length;s++){if(x.options[s].selected){t.push(String(x.options[s].value));}}return t.join(",");break;case"radio":case"checkbox":var t=[];var v=x.form.elements;var w,u=0;while(w=v[u++]){if(w.name==x.name&amp;&amp;w.checked){if(x.type=="radio"){return String(w.value);}else{t.push(String(w.value));}}}return t.join(",");break;case"text":case"password":case"textarea":case"select-one":default:return String(x.value);}};portal.setGadgetClass=function(v,t){var s=bb.uri.resolveUri(v,bb.document.getProperty("baseURI"));var u=g[s];if(true){g[s]=u=new c({src:s});u.build(t);}};portal.getGadgetClass=function(v,u){var s=bb.uri.resolveUri(v,bb.document.getProperty("baseURI"));var t=g[s];if(!t){g[s]=t=new c({src:s});gadgets.io.makeRequest(s,function(w){if(w.errors.length){t.executeQueue(false);return delete g[s];}var x=bb.xml.parse(w.text,true);if(!x||!x.documentElement||!x.getElementsByTagName("body")[0]){t.executeQueue(false);return delete g[s];}t.build(x);},{type:"xml"});}if(u){t.executeWhenReady(u);}};})();</d:resource><d:template type="application/xhtml+xml"><div xmlns="http://www.w3.org/1999/xhtml" class="p-portal"><div class="p-column-resize-grippy"/><div class="p-column-resize-line"/><div class="p-portal-dragPlaceholder"/><d:content/></div></d:template><d:property name="containers" type="array" onget="return this.getElementsByTagNameNS(\'http://www.backbase.com/2008/portal\', \'container\')" onset=""/><d:property name="activeContainer" type="object" onset=""><d:getter type="text/javascript">return this._._activeContainer&amp;&amp;this._._activeContainer._?this._._activeContainer:null;</d:getter></d:property><d:property name="session"><d:getter type="text/javascript">return this._._session||null;</d:getter><d:setter type="text/javascript">if(!value){value={};}this._._session=null;clearInterval(this.tLayoutCheck);clearInterval(this.maximizedResize);var g=this.getProperty("containers"),e=0,d;while(d=g[e++]){bb.destruct(d);}this.addToSession(value);var c=this;this.tLayoutCheck=setInterval(function f(){portal._layoutHeightChecker(c);},portal.LAYOUT_CHECK_TIMEOUT);var b=bb.document.createEvent("CustomEvent");b.initEvent("sessionLoaded",false,false);this.dispatchEvent(b);var a=this.getProperty("containers")[0];if(!this.getProperty("activeContainer")&amp;&amp;a){this.activateContainer(a);}this._._loaded=true;</d:setter></d:property><d:method name="getContainersByTemplateId"><d:argument name="templateId" required="true"/><d:body type="text/javascript">var c=this.getProperty("containers");var a=[];for(var b=0;b&lt;c.length;b++){if(c[b].getProperty("templateId")==templateId){a.push(c[b]);}}return a;</d:body></d:method><d:method name="updateSession"><d:argument name="oThat" type="object" required="true"/><d:argument name="oSendData" type="object" required="true"/><d:argument name="oData" type="object" required="true"/><d:argument name="fnCallback" type="function" required="true"/><d:argument name="fnUserCallback" type="function"/><d:body type="application/javascript">if(this.getSetting("portalSyncType")=="delta"){var b=this;gadgets.io.makeRequest(bb.uri.resolveUri(this.getSetting("portalSyncURL"),this.getProperty("baseURI")),function(g){var f=g.errors.length==0;var i=String(g.data);var h=(i.indexOf("{")==0&amp;&amp;i.lastIndexOf("}")==i.length-1);if(f&amp;&amp;!h&amp;&amp;!oData.id){oData.id=i;}if(fnUserCallback){fnUserCallback(f,h?gadgets.json.parse(i):i);}if(f&amp;&amp;!h){fnCallback(oData);}if(!f){var e=bb.document.createEvent("CustomEvent");e.initCustomEventNS(null,"sessionError",false,false,i);b.dispatchEvent(e);}},{method:"POST",data:gadgets.io.encodeValues(oSendData)});}else{var d=this.getProperty("session");var c=oThat.getProperty("localName")=="gadgetWindow"?"gadgets":oThat.getProperty("localName")+"s";var a=c.substr(0,1);setTimeout(function(){var e=true||confirm("Allow / Deny?");var f="";if(!oData.id){var g=1;while(d[c][a+g]){g++;}f=a+g;oData.id=f;}if(fnUserCallback){fnUserCallback(e,oData.id);}fnCallback(oData);},10);}</d:body></d:method><d:method name="addToSession"><d:argument name="sessionToAdd" type="object" required="true"/><d:body type="text/javascript">portal.overRideAnimation=true;var k=this._._session;if(!k){k=this._._session={};}if(!k.portals){k.portals={};}if(!k.containers){k.containers={};}if(!k.gadgets){k.gadgets={};}if(!k.settings){k.settings={};}if(!sessionToAdd.portals){sessionToAdd.portals={};}if(!sessionToAdd.containers){sessionToAdd.containers={};}if(!sessionToAdd.gadgets){sessionToAdd.gadgets={};}if(!sessionToAdd.settings){sessionToAdd.settings={};}var e,m;for(e in sessionToAdd.settings){k.settings[e]=sessionToAdd.settings[e];}for(e in sessionToAdd.portals){m=sessionToAdd.portals[e];m.preferences=m.preferences||{};this.setPortal(null,m.preferences,m.settings?k.settings[m.settings]:{},m.tid);this._._id=e;break;}var g,l,n;for(e in sessionToAdd.gadgets){m=k.gadgets[e]=sessionToAdd.gadgets[e];m.preferences=m.preferences||{};g=m.instance||this.createGadgetWindowFromConfig(e,m);if(m.instance){g._._src=m.src;g._._preferences=new portal._object(m.preferences||{});g._._settings=m.settings?k.settings[m.settings]:{};g._._templateId=m.tid||"";g.setAttribute("id",e);g._._id=e;}else{this.appendChild(g);}}for(e in sessionToAdd.containers){m=k.containers[e]=sessionToAdd.containers[e];m.preferences=m.preferences||{};l=m.instance||this.createContainer(m.src,m.preferences,m.settings?k.settings[m.settings]:{},m.tid);if(m.instance){l._._preferences=new portal._object(m.preferences||{});l._._settings=m.settings?k.settings[m.settings]:{};l._._templateId=m.tid||"";}l.setAttribute("id",e);l._._id=e;if(!m.instance||l.getProperty("parentNode")!=this){this.appendChild(l);}l.load();}for(e in sessionToAdd.portals){if(e in k.portals){}else{for(var d in k.portals){return;}m=k.portals[e]=sessionToAdd.portals[e];var b=m.content||{},c,h,l;var a=[];for(h in b){c=b[h];l=bb.document.getElementById(h);if(l&amp;&amp;c){a[parseInt(c.pos,10)||0]=l;}}var f=this.getProperty("containers"),d=0,l;while(l=f[d++]){if(bb.array.indexOf(a,l)==-1){a.push(l);}}for(d=0;d&lt;a.length;d++){l=a[d];if(l){this.appendChild(l);}}}break;}portal.overRideAnimation=false;</d:body></d:method><d:method name="activateContainer"><d:argument name="oContainer"/><d:body type="text/javascript">var d=this.getProperty("activeContainer");if(d!=oContainer){if(d&amp;&amp;d._){var b=d.getSetting("className","string");if(b.length){bb.html.removeClass(this.viewNode,b);}var g=d.getProperty("gadgets");var a,e=0;while(a=g[e++]){a.viewNode.style.display="none";}var c=bb.document.createEvent("CustomEvent");c.initEvent("deactivateContainer",true,false);d.dispatchEvent(c);}if(!oContainer||!oContainer._||!oContainer.instanceOf("http://www.backbase.com/2008/portal","container")){oContainer=null;}this._._activeContainer=oContainer;if(oContainer){var f=oContainer.getProperty("maximizedGadget");if(f){f.load();f.viewNode.absoluteTop=-1;if(f.viewNode.parentColumn){f.viewNode.parentColumn.isChanged=true;}f.viewNode.style.display="";}else{var g=oContainer.getProperty("gadgets"),e=0,a;while(a=g[e++]){a.load();a.viewNode.absoluteTop=-1;if(a.viewNode.parentColumn){a.viewNode.parentColumn.isChanged=true;}a.viewNode.style.display="";}}var b=oContainer.getSetting("className","string");if(b.length){bb.html.addClass(this.viewNode,b);}var c=bb.document.createEvent("CustomEvent");c.initEvent("activateContainer",true,false);oContainer.dispatchEvent(c);}portal._layoutHeightChecker(this);}</d:body></d:method><d:method name="createContainer"><d:argument name="oDefinition" type="object"/><d:argument name="oPreferences" type="object"/><d:argument name="oSettings" type="object"/><d:argument name="sTemplateId" type="string"/><d:body type="text/javascript">portal._currentPortal=this;var a=bb.document.createElementNS("http://www.backbase.com/2008/portal","container");delete portal._currentPortal;a._._preferences=new portal._object(oPreferences||{});a._._settings=oSettings||{};a._._templateId=sTemplateId||"l"+this.getSetting("defaultContainerTemplate");return a;</d:body></d:method><d:method name="setPortal"><d:argument name="oDefinition" type="object"/><d:argument name="oPreferences" type="object"/><d:argument name="oSettings" type="object"/><d:argument name="sTemplateId" type="string"/><d:body type="text/javascript">this._._preferences=new portal._object(oPreferences||{});this._._settings=oSettings||{};this._._templateId=sTemplateId||"";gadgets.config.proxyUrl=bb.uri.resolveUri(this.getSetting("portalPTCURL"),this.getProperty("baseURI"));</d:body></d:method><d:method name="resetPortal"><d:body type="text/javascript">var a=this;this.synchronize("reset",function(c,b){if(c){a.setProperty("session",b);}});</d:body></d:method><d:method name="addContainer"><d:argument name="oContainer" required="true"/><d:argument name="oBeforeContainer" type="object"/><d:argument name="bMakeActive" type="boolean"/><d:body type="text/javascript">this.insertBefore(oContainer,oBeforeContainer||null);var b;if(bMakeActive){b=this.getProperty("activeContainer");this.activateContainer(oContainer);}var a=this;oContainer.synchronize("add",function(c,g,e){if(c){if(typeof g=="string"){oContainer.setAttribute("id",g);oContainer._._id=g;}else{var f=g;for(var d in f.containers||{}){f.containers[d].instance=oContainer;break;}a.addToSession(f);delete f.containers[d].instance;}oContainer.load();}else{if(bMakeActive){a.activateContainer(b);}bb.destruct(oContainer);}});</d:body></d:method><d:method name="removeContainer"><d:argument name="oContainer" required="true"/><d:body type="text/javascript">if(oContainer.getSetting("closable","boolean")){var a=oContainer.getProperty("nextSibling");oContainer.synchronize("remove",function(c){if(c){bb.destruct(oContainer);}else{oContainer.getProperty("portal").moveContainer(oContainer,a);}});if(this.getProperty("activeContainer")==oContainer){for(var b=oContainer.getProperty("nextSibling");b&amp;&amp;b._&amp;&amp;!b.instanceOf("http://www.backbase.com/2008/portal","container");b=b.getProperty("nextSibling")){}if(b){this.activateContainer(b);}else{for(var b=oContainer.getProperty("previousSibling");b&amp;&amp;b._&amp;&amp;!b.instanceOf("http://www.backbase.com/2008/portal","container");b=b.getProperty("previousSibling")){}this.activateContainer(b);}}oContainer.getProperty("portal").removeChild(oContainer);}</d:body></d:method><d:method name="moveContainer"><d:argument name="container" required="true"/><d:argument name="before"/><d:body type="text/javascript">this.insertBefore(container,before||null);container.synchronize("update");</d:body></d:method><d:method name="resetContainer"><d:argument name="container" required="true"/><d:body type="text/javascript">var a=this;container.synchronize("reset",function(c,h){if(c){var f=container.getProperty("gadgets"),b,e=0;while(b=f[e++]){bb.destruct(b);}if(typeof h!="string"){var g=h;for(var d in g.containers||{}){g.containers[d].instance=container;break;}container._._loadMethodCalled=false;container._._loaded=false;a.addToSession(g);delete g.containers[d].instance;}}});</d:body></d:method><d:method name="createGadget"><d:argument name="sSrc" type="string"/><d:argument name="oPreferences" type="object"/><d:argument name="oSettings" type="object"/><d:argument name="sTemplateId" type="string"/><d:body type="text/javascript">portal._currentPortal=this;var a=bb.document.createElementNS("http://www.backbase.com/2008/portal","gadgetWindow");delete portal._currentPortal;a._._src=sSrc;a._._preferences=new portal._object(oPreferences||{});a._._settings=oSettings||{};a._._templateId=sTemplateId||"";return a;</d:body></d:method><d:method name="createGadgetWindowFromConfig"><d:argument name="sId" type="string"/><d:argument name="oConfig" type="object"/><d:body type="text/javascript">var b=this._._session,a=null;a=this.createGadget(oConfig.src,oConfig.preferences,oConfig.settings?b.settings[oConfig.settings]:{},oConfig.tid);a.setAttribute("id",sId);a._._id=sId;return a;</d:body></d:method><d:method name="addGadget"><d:argument name="oGadget" required="true"/><d:argument name="oContainer" type="object"/><d:argument name="oOccurrence" type="variant"/><d:argument name="iIndex" type="number"/><d:body type="text/javascript">var a=oContainer.getProperty("maximizedGadget");if(a){a.restore();}if(typeof oOccurrence=="number"){bb.command.trace(this,"the addGadget API currently used has been deprecated, please use the new API",1);oOccurrence={pos:iIndex,col:oOccurrence};}else{oOccurrence=oOccurrence||{};}if(oOccurrence[portal.GADGET_UNMANAGED]!=="true"&amp;&amp;oGadget.viewNode.parentNode!=this.viewGate){this.viewGate.appendChild(oGadget.viewNode);}portal.overRideAnimation=true;this.moveGadget(oGadget,oContainer,oOccurrence);portal.overRideAnimation=false;var b=this;oGadget.synchronize("add",function(c,f){if(c){if(typeof f=="string"){oGadget.setAttribute("id",f);oGadget._._id=f;}else{var e=f;for(var d in e.gadgets||{}){e.gadgets[d].instance=oGadget;break;}b.addToSession(e);delete e.gadgets[d].instance;}if(oContainer=b.getProperty("activeContainer")){oGadget.load();}}else{bb.destruct(oGadget);}});</d:body></d:method><d:method name="removeGadget"><d:argument name="oGadget" required="true"/><d:body type="text/javascript">var b=oGadget.getProperty("container"),d=oGadget.viewNode.parentColumn,a,c;if(b&amp;&amp;d){a=bb.array.indexOf(b.getProperty("columns"),d);c=bb.array.indexOf(d.items,oGadget.viewNode);}oGadget.synchronize("remove",function(e){if(e){bb.destruct(oGadget);}else{if(b&amp;&amp;d){b.appendToColumn(d,oGadget.viewNode,c);}}});if(b&amp;&amp;d){b.removeFromColumn(oGadget.viewNode);if(oGadget.getProperty("maximized")){b.setProperty("maximizedGadget",null);}}</d:body></d:method><d:method name="moveGadget"><d:argument name="oGadget"/><d:argument name="oContainer" type="object"/><d:argument name="oOccurrence" type="variant"/><d:argument name="iIndex" type="number"/><d:body type="text/javascript">oContainer.appendChild(oGadget);oOccurrence=oOccurrence||{};if(typeof oOccurrence=="number"){bb.command.trace(this,"the moveGadget API currently used has been deprecated, please use the new API",1);oOccurrence={pos:iIndex,col:oOccurrence};}if(oOccurrence[portal.GADGET_UNMANAGED]==="true"){var b=portal.GADGET_PLACEHOLDER+"-"+oContainer.getProperty("templateId")+"-"+oGadget.getProperty("templateId");var a=document.getElementById(b);oGadget.viewNode.style.position="static";if(a){if(oGadget.viewNode.parentNode!=a){a.appendChild(oGadget.viewNode);}}else{bb.command.trace(this,\'Trying to add unmanaged gadget but placeholder doesnt exist with id="\'+b+\'", adding it before the portal now\');oPortal.viewNode.parentNode.insertBefore(oGadget.viewNode,oPortal.viewNode);}}else{oGadget.viewNode.colSpanMax=oOccurrence.colspan?parseInt(oOccurrence.colspan,10)-1:0;var d=oContainer.getProperty("columns");var c=d[parseInt(oOccurrence.col,10)]||d[0];oContainer.appendToColumn(c,oGadget.viewNode,parseInt(oOccurrence.pos,10));}oGadget.synchronize("update");</d:body></d:method><d:method name="resetGadget"><d:argument name="gadget" required="true"/><d:body type="text/javascript">var a=this;gadget.synchronize("reset",function(k,f){if(k){if(typeof f!="string"){var g=f,j,i=gadget.getProperty("class"),d=0;for(var e in g.gadgets||{}){j=g.gadgets[e].preferences||{};break;}for(var c in i.preferences){var b=i.preferences[c];d=Math.max(d,gadget._setPreference(c,j[c]||b["default"]));}if(d&gt;0){var h=bb.selector.query(gadget.viewNode,".p-gadget-preferences form");if(bb.html.hasClass(gadget.viewNode,"p-gadget-preferences-open")&amp;&amp;h){gadget.applyPreferencesToForm(h);}var l=bb.document.createEvent("CustomEvent");l.initEvent("change",false,false);gadget.dispatchEvent(l);}}}});</d:body></d:method><d:method name="_addDragOverlay"><d:body type="text/javascript">var a=bb.html.createElementFromString(\'&lt;div class="p-portal-dragOverlay"&gt;&lt;/div&gt;\');this.viewGate.appendChild(a);</d:body></d:method><d:method name="_removeDragOverlay"><d:body type="text/javascript">var a=bb.selector.query(this.viewGate,".p-portal-dragOverlay");if(a&amp;&amp;a.parentNode==this.viewGate){this.viewGate.removeChild(a);}</d:body></d:method><d:method name="getOccurrence"><d:argument name="oContainer"/><d:body type="application/javascript">return new portal._object({pos:String(bb.array.indexOf(this.getProperty("containers"),oContainer))});</d:body></d:method><d:method name="updateOccurrences"><d:argument name="newSessionData"/><d:body type="text/javascript">var b=this.getProperty("session").portals;var c=newSessionData.pid in b?b[newSessionData.pid].content:null;var e=newSessionData.opid||newSessionData.pid;var d=(e in b?b[e].content:null)||{};var a=c?c[newSessionData.id]:null;if(a){var f=parseInt(a.pos,10);for(var g in c){var h=c[g];if(g==newSessionData.id){delete c[g];}else{if(parseInt(h.pos,10)&gt;f){h.pos=String(parseInt(h.pos,10)-1);}}}}var i=parseInt(newSessionData.occurrences.pos,10);for(var g in d){var h=d[g];if(parseInt(h.pos,10)&gt;=i){h.pos=String(parseInt(h.pos,10)+1);}}d[newSessionData.id]=newSessionData.occurrences;</d:body></d:method><d:handler event="destruct" type="text/javascript">portal._unload();</d:handler><d:handler event="drag" type="text/javascript">var l=event.dragSource;if(!(l&amp;&amp;l._&amp;&amp;l.instanceOf("http://www.backbase.com/2008/portal","gadgetWindow"))){return;}var m=bb.html.getBoxObject(this.viewGate);var c=event.pageX-m.left;var b=event.pageY-m.top;var g=bb.selector.query(this.viewNode,".p-portal-dragPlaceholder");var a=this.getProperty("activeContainer");var k=event.dragSource.viewNode==btl.drag.dragManager.symbol?bb.selector.query(l.viewNode,".p-gadget-header"):btl.drag.dragManager.symbol;var e=this;if(!e._._autoScroll){e._._autoScroll={newTop:0,curTop:0,animation:0,newGTop:0};}if(!e._._autoScroll.animation){e._._autoScroll.animation=setInterval(function(){var y=true;var w=e._._autoScroll;if(btl.drag&amp;&amp;btl.drag.dragManager.isDragging&amp;&amp;btl.drag.dragManager.source==l){var C=bb.html.getBoxObject(e.viewNode);var x=C.top+C.height;var i=bb.html.getBoxObject(bb.viewport);var B=Math.max(i.top,bb.viewport.scrollTop);var z=B+i.height;var j=bb.html.getBoxObject(k);j.bottom=j.top+j.height+20;w.newGTop=parseInt(l.viewNode.style.top);if((j.bottom&gt;z)&amp;&amp;((z-j.height)&lt;x)){y=false;w.newTop=B+150;}else{if(j.top&lt;B&amp;&amp;B&gt;0){y=false;w.newTop=0;w.curTop=bb.viewport.scrollTop;}}}if(y){clearInterval(w.animation);w.animation=null;return;}var A=w.newTop-w.curTop;if(A!=0){A=Math.floor(A/3);if(Math.abs(A)&gt;50){A=A&gt;0?50:-50;}w.curTop+=A;if(Math.abs(w.newTop-w.curTop)&lt;10){w.curTop=w.newTop;}l.viewNode.style.top=(w.newGTop+A)+"px";bb.viewport.scrollTop=w.curTop;}else{clearInterval(w.animation);w.animation=null;}},50);}var p=a.getProperty("columns");var q=this.getSetting("gadgetWindowMargin","integer");for(var t=0,u=p.length-l.viewNode.colSpan;t&lt;u;t++){var h=p[t];if(c&gt;h.pixLeft&amp;&amp;c&lt;h.pixLeft+h.pixWidth){var o=-1;if(!h.items[0]||b&lt;portal._getGadgetHeight(h,h.items[0])/2){o=0;}else{for(var r=0;r&lt;h.items.length;r++){var n=h.items[r];var d=portal._getGadgetHeight(h,n);if(b&gt;=n.absoluteTop&amp;&amp;b&lt;=n.absoluteTop+d+q){if(d/4&gt;b-n.absoluteTop){if(h.items[r-1]==g){o=r-1;}else{o=r;}}else{if(h.items[r+1]==g){o=r+1;}else{o=r;}}break;}}}if(a==this.dragContainer&amp;&amp;this.dragColumn==t&amp;&amp;this.dragIndex==o){return;}this.dragContainer=a;this.dragColumn=t;this.dragIndex=o;var n=event.dragSource.viewNode;var d=portal._getGadgetHeight(h,n);if(bb.html.getStyle(g,"box-sizing")=="content-box"){d-=(bb.html.getBoxObject(g,"border").height-bb.html.getBoxObject(g,"content").height);}bb.html.setStyle(g,"height",d+"px");var v=this.getSetting("animationSpeed","integer");var s=portal._getGadgetWidth(h,n);if(s&lt;-btl.drag.dragManager.offsetLeft){btl.drag.dragManager.offsetLeft=btl.drag.dragManager.offsetLeft+(-btl.drag.dragManager.offsetLeft-s+100);}if(v===0){bb.html.setStyle(n,"width",s+"px");}else{var f={attributeName:"width",dur:v+"ms",to:s+"px",fill:"freeze"};bb.smil.animate(n,f);}n.style.display="";a.appendToColumn(h,g,o);break;}}</d:handler><d:handler event="dragEnd" type="text/javascript">var a=event.dragSource;if(!(a&amp;&amp;a._&amp;&amp;a.instanceOf("http://www.backbase.com/2008/portal","gadgetWindow")&amp;&amp;a.getProperty("loaded"))){return;}event.preventDefault();var h=bb.selector.query(this.viewNode,".p-portal-dragPlaceholder");var e=this.getProperty("activeContainer");var g=h.parentColumn;var f=bb.array.indexOf(g.items,h);e.removeFromColumn(h);e.appendChild(a);e.appendToColumn(g,a.viewNode,f);this._removeDragOverlay();bb.html.setStyle(a.viewNode,"opacity",1);h.style.visibility="";var b=a.viewNode.style;var d=this.getSetting("animationSpeed","integer");var c=function(){b.zIndex="";h.style.top="";h.style.left="";h.style.height="";h.style.width="";};if(d){setTimeout(c,d);}else{c();}if(e!=a._orgContainer||g!=a._orgColumn||f!=a._orgIndex){a.synchronize("update");}a._orgContainer=null;a._orgColumn=null;a._orgIndex=null;</d:handler><d:handler event="mousemove" type="text/javascript">var r=this.getProperty("activeContainer");if(!window.btl||(btl.drag&amp;&amp;btl.drag.dragManager.isDragging)||(btl.resize&amp;&amp;btl.resize.isResizing)||!r||r.getProperty("maximizedGadget")||!r.getSetting("colResizable","boolean")){return;}var h=bb.html.getBoxObject(this.viewGate);var g=event.pageX-h.left;var b=event.pageY-h.top;if(b&lt;0){return;}var n=bb.selector.query(this.viewGate,".p-column-resize-grippy");var q=(n.offsetHeight&amp;65534)/2;var p=b+q&gt;h.height?h.height-n.offsetHeight:b-q;var f=r.getProperty("columns");for(var k=0,a=f.length;k&lt;a;k++){var m=f[k];var e=f[k+1];if(g&gt;m.pixLeft+m.pixWidth&amp;&amp;g&lt;(e||0).pixLeft){var o=this.getSetting("gadgetWindowMargin","integer");var d=o,c=0;while(oItem=m.items[c++]){if(oItem.colSpan||(oItem.colSpanItem&amp;&amp;oItem.colSpanItem.colSpanItems[oItem.colSpanItem.colSpan-1]!=oItem)){d+=portal._getGadgetHeight(m,oItem)+o;}else{break;}}var l=m.pixLeft+m.pixWidth+(o/2)-(n.offsetWidth/2);n.style.top=Math.max(p,d)+"px";n.style.left=l+"px";n.resizeIndex=k;n.resizeTotalWidth=m.pixWidth+e.pixWidth;return;}}if(n.style.left!=""){n.style.left="";}</d:handler><d:handler event="mouseleave" type="text/javascript">var b=this.getProperty("activeContainer");if(!window.btl||(btl.drag&amp;&amp;btl.drag.dragManager.isDragging)||(btl.resize&amp;&amp;btl.resize.isResizing)||!b||b.getProperty("maximizedGadget")||!b.getSetting("colResizable","boolean")){return;}var a=bb.selector.query(this.viewGate,".p-column-resize-grippy");if(a.style.left!=""){a.style.left="";}</d:handler><d:handler event="mousedown" type="text/javascript" match=".p-column-resize-grippy">if(!bb.instanceOf(this,"http://www.backbase.com/2006/btl","resizeBase")){bb.addBehavior(this,"http://www.backbase.com/2006/btl","resizeBase");}var e=bb.html.getBoxObject(this.viewNode);var d=event.pageX-e.left;var b=event.pageY-e.top;var c=this.getProperty("activeContainer").getProperty("columns");var g=event.currentView;var i=g.resizeTotalWidth;var f=c[g.resizeIndex];this._nowResize=f;var h=bb.selector.query(this.viewNode,".p-column-resize-line");h.style.top=g.style.top;h.style.left=f.pixLeft+"px";h.style.width=f.pixWidth+"px";g.style.left="";g.style.top="";var a=bb.html.convertToPixels(this.getSetting("minColWidth"),this.viewNode);btl.resize.startResize(this,h,btl.resize.RIGHT,event.pageX,0,h,a,0,i-a,0,null);event.preventDefault();</d:handler><d:handler event="resizeEnd" type="text/javascript">var f=this._nowResize;if(f){this._nowResize=null;var k=this.getSetting("gadgetWindowMargin","integer");var b=this.getProperty("activeContainer").getProperty("columns");var m=f.cachedTotalWidth-((b.length-1)*k);var h=event.newWidth;if(f.width.match(/%$/)){h=Math.round(h/(m/100)*1000)/1000+"%";}else{h=h+"px";}var g=bb.array.indexOf(b,f);var c=b[g+1];var a=c.pixWidth+(f.pixWidth-event.newWidth);if(c.width.match(/%$/)){a=Math.round(a/(m/100)*1000)/1000+"%";}else{a=a+"px";}var l="";bFirst=false;for(var d=0;d&lt;b.length;d++){if(!bFirst){bFirst=true;}else{l+=",";}if(d==g){l+=h;}else{if(d==g+1){l+=a;}else{l+=b[d].width;}}}var j=bb.selector.query(this.viewNode,".p-column-resize-line");j.style.top="";j.style.left="";j.style.width="";var e=this.getProperty("activeContainer");e.setPreference("columns",l);}</d:handler><d:constructor type="application/javascript">this._._portal=this;this._._preferences=new portal._object();</d:constructor></d:element><d:element name="container" extends="p:portalContainerItem"><d:attribute name="id"/><d:property name="columns"><d:setter type="text/javascript">if(typeof value=="string"){var b=value.split(",");var s=this.getProperty("portal");var q=s.getSetting("gadgetWindowMargin","integer");var f=this._._columns||[];var l=0;var d=0;for(var h=0,c=Math.max(b.length,f.length);h&lt;c;h++){if(f[h]){var n=f[h];if(b[h]){d=h;n.width=b[h];n.pixLeft=l;n.cachedTotalWidth=-1;n.pixWidth=portal._getColumnWidth(s,n,b.length);l+=n.pixWidth+q;}else{while(n.items[0]){this.appendToColumn(f[d],n.items[0]);}f.splice(h--,1);}}else{if(b[h]){var n={};var p=f[d];d=h;n.items=[];n.width=b[h];n.pixLeft=l;n.pixWidth=portal._getColumnWidth(s,n,b.length);l+=n.pixWidth+q;f.push(n);var m=[];if(p){for(var e=0;e&lt;p.items.length;e++){var o=p.items[e];if(o.colSpanItem||!o.occurrence){continue;}var r=parseInt(o.occurrence.col,10)||0;if(r&gt;=h){m.push(o);}}}while(o=m.shift()){this.appendToColumn(n,o);}}}}var g=b.length-1&gt;=0?b.length-1:0;var k=[];for(var h=0,c=f.length;h&lt;c;h++){var n=f[h];n.previousColumn=f[h-1];n.nextColumn=f[h+1];for(var e=0,a=n.items.length;e&lt;a;e++){if(n.items[e].colSpanMax){k[k.length]={item:n.items[e],colSpan:g-h};}}}for(var h=0;h&lt;k.length;h++){portal._updateColSpan(this,k[h].item,k[h].colSpan);}for(var h=0,c=f.length;h&lt;c;h++){portal._applyColumnWidth(s,f[h],0,0);}this._._columns=f;}else{bb.command.trace(this,"Unsupported value set, columns property currently only accepts string type");}</d:setter><d:getter type="text/javascript">return this._._columns||(this._._columns=[]);</d:getter></d:property><d:property name="maximizedGadget"><d:getter type="text/javascript">if(this._._maximizedGadget&amp;&amp;!this._._maximizedGadget._){this.setProperty(name,null);}return this._._maximizedGadget;</d:getter><d:setter type="text/javascript">var d=this._._maximizedGadget;if(d&amp;&amp;!value){var c=this.getProperty("gadgets"),a,b=0;while(a=c[b++]){a.load();a.viewNode.absoluteTop=-1;if(a.viewNode.parentColumn){a.viewNode.parentColumn.isChanged=true;}a.viewNode.style.display="";}}if(value){var c=this.getProperty("gadgets"),a,b=0;while(a=c[b++]){a.viewNode.style.display=(a==value)?"":"none";}}this._._maximizedGadget=value;if(d&amp;&amp;value){portal.overRideAnimation=true;d.restore();portal.overRideAnimation=false;}portal._layoutHeightChecker(this.getProperty("portal"));</d:setter></d:property><d:constructor type="application/javascript">if(!portal._currentPortal){bb.command.trace(this,"A container needs to be created using createContainer method");}this._._portal=portal._currentPortal;</d:constructor><d:handler event="destruct" type="text/javascript">var a=bb.document.createEvent("CustomEvent");a.initEvent("unload",false,false);this.dispatchEvent(a);this._._portal=null;this._._columns=null;</d:handler><d:method name="__attach"><d:argument name="sFnName" type="string"/><d:argument name="oNode" type="object" required="true"/><d:argument name="oRefNode" type="object"/><d:body type="text/javascript"/></d:method><d:method name="getSmallestColumn"><d:body type="text/javascript">var c=this.getProperty("columns"),b=0,e;var a=0;var d=Infinity;while(e=c[b++]){var f=e.items[e.items.length-1];if(f){if(d&gt;f.absoluteTop+f.offsetHeight){d=f.absoluteTop+f.offsetHeight;a=b-1;}}else{d=0;a=b-1;break;}}return a;</d:body></d:method><d:method name="appendToColumn"><d:argument name="oColumn" type="object" required="true"/><d:argument name="oItem" type="object" required="true"/><d:argument name="iIndex" type="number"/><d:body type="text/javascript">if(!(iIndex&gt;=0)){iIndex=-1;}var a=this.getProperty("portal");var d=a.getSetting("gadgetWindowMargin","integer");if(oItem.parentColumn==oColumn){if(iIndex==-1&amp;&amp;oColumn.items[oColumn.items.length-1]==oItem){return;}if(oColumn.items[iIndex]==oItem){return;}}if(oItem.parentColumn){this.removeFromColumn(oItem);}oItem.parentColumn=oColumn;if(iIndex==-1){iIndex=oColumn.items.length;}var c=oColumn.items[iIndex-1];var b=0;if(c&amp;&amp;c.denyInsert=="after"){c=oColumn.items[--iIndex-1];}else{if(oColumn.items[iIndex]&amp;&amp;(oColumn.items[iIndex].denyInsert=="before"||oColumn.items[iIndex].colSpanMax||oColumn.items[iIndex].colSpanItem)){c=oColumn.items[++iIndex-1];}}b=portal._getGadgetNextTop(oColumn,c,b,d);if(oColumn.items[iIndex-1]&amp;&amp;oColumn.items[iIndex-1].colSpanItem&amp;&amp;oColumn.items[iIndex-1].iInitIndex&gt;iIndex){delete oColumn.items[iIndex-1].iInitIndex;iIndex--;}oColumn.items.splice(iIndex,0,oItem);portal._updateColSpan(this,oItem,oItem.colSpanMax);if(this==a.getProperty("activeContainer")){portal._applyColumnWidth(a,oColumn,iIndex,b);}else{if(!oItem.colSpanItem){oItem.style.display="none";oItem.style.width="1px";}}</d:body></d:method><d:method name="removeFromColumn"><d:argument name="oItem" type="object" required="true"/><d:body type="text/javascript">if(oItem.parentColumn){var f=oItem.parentColumn;var g=bb.array.indexOf(f.items,oItem);if(g!=-1){if(oItem.colSpan){for(var e=0;e&lt;oItem.colSpan;e++){this.removeFromColumn(oItem.colSpanItems[e]);}}f.items.splice(g,1);oItem.parentColumn=null;var h=this.getProperty("portal").getSetting("animationSpeed","integer");var k=this.getProperty("portal").getSetting("gadgetWindowMargin","integer");var c=0;var oItem,d=f.items,b=0;while(oItem=d[b++]){oItem.absoluteTop=c;if(!oItem.colSpanItem){if(h===0){bb.html.setStyle(oItem,"top",c+"px");}else{var a={attributeName:"top",dur:h+"ms",to:c+"px",fill:"freeze"};oItem.iAniTop=bb.smil.animate(oItem,a);}}c=portal._getGadgetNextTop(f,oItem,0,k);c=portal._calculateColSpanTop(oItem,c,k);}}}</d:body></d:method><d:method name="load"><d:body type="application/javascript">if(this._._loadMethodCalled||this.getProperty("loaded")||!this.getAttribute("id")){return;}this._._loadMethodCalled=false;var h=this.getProperty("portal");var p=bb.document.createEvent("CustomEvent");p.initEvent("beforeload",false,false);this.dispatchEvent(p);this.setProperty("columns",this.getPreference("columns")||"100%");var q=this.getProperty("columns");var u=h.getProperty("session").containers[this.getAttribute("id")]||{};var d=u.content||{},r,x;var a=[];var o=[];for(var b in d){var m={id:b,col:parseInt(d[b]["col"],10)||0,pos:parseInt(d[b]["pos"],10)||0,data:d[b]};if(d[b][portal.GADGET_UNMANAGED]==="true"){o.push(m);continue;}if(!a[m.col]){a[m.col]=[];}a[m.col][m.pos]=m;}var v=[];for(var s=0;s&lt;a.length;s++){if(a[s]){v=v.concat(a[s]);}}v=v.concat(o);for(var s=0;s&lt;v.length;s++){if(v[s]==undefined){continue;}var r=v[s].data;x=v[s].id;var n=bb.document.getElementById(x);if(n&amp;&amp;r){this.appendChild(n);n.viewNode.occurrence=r;if(r[portal.GADGET_UNMANAGED]==="true"){var l=n.getProperty("templateId");var c=n.getProperty("container").getProperty("templateId");var g=portal.GADGET_PLACEHOLDER+"-"+c+"-"+l;var k=document.getElementById(g);n.viewNode.style.position="static";if(k){if(n.viewNode.parentNode!=k){k.appendChild(n.viewNode);}}else{bb.command.trace(this,\'Trying to add unmanaged gadget but placeholder doesnt exist with id="\'+g+\'", adding it before the portal now\');h.viewNode.parentNode.insertBefore(n.viewNode,h.viewNode);}}else{var t=parseInt(r.col,10);var i=parseInt(r.pos,10);var f=q[t]||q[q.length-1];if(!q[t]){i+=9999;}n.viewNode.colSpanMax=r.colspan?parseInt(r.colspan,10)-1:0;if(f.items[i]){var w=f.items[i].colSpanItem;while(w){if(f.items[i]&amp;&amp;f.items[i].colSpanItem){var e=bb.array.indexOf(f.items[i].colSpanItem.parentColumn.items,f.items[i].colSpanItem);if(e==i){i++;w=f.items[i]&amp;&amp;f.items[i].colSpanItem;}else{w=false;}}else{w=false;}}}f.isChanged=true;this.appendToColumn(f,n.viewNode,i);}if(r.minimized=="true"){bb.html.addClass(n.viewNode,n.minimizeClass);}if(this==h.getProperty("activeContainer")){n.load();}}}this._._loaded=true;var p=bb.document.createEvent("CustomEvent");p.initEvent("load",false,false);this.dispatchEvent(p);</d:body></d:method><d:method name="unload"><d:body type="application/javascript">if(this.getSetting("closable","boolean")){var a=bb.document.createEvent("CustomEvent");a.initEvent("beforeunload",false,true);this.dispatchEvent(a);if(!a.defaultPrevented){var b=this.getProperty("portal");b.removeContainer(this);}}</d:body></d:method><d:method name="getOccurrence"><d:argument name="oGadget"/><d:body type="application/javascript">var a={};if(oGadget.viewNode.parentColumn){a.pos=String(bb.array.indexOf(oGadget.viewNode.parentColumn.items,oGadget.viewNode));a.col=String(bb.array.indexOf(this.getProperty("columns"),oGadget.viewNode.parentColumn));if(oGadget.viewNode.colSpanMax){a.colspan=String(oGadget.viewNode.colSpanMax+1);}}else{a[portal.GADGET_UNMANAGED]="true";}if(oGadget.getProperty("minimized")){a.minimized="true";}return new portal._object(a);</d:body></d:method><d:method name="updateOccurrences"><d:argument name="newSessionData"/><d:body type="text/javascript">var b=this.getProperty("portal").getProperty("session").containers;var d=newSessionData.pid in b?b[newSessionData.pid].content:null;var f=newSessionData.opid||newSessionData.pid;var e=(f in b?b[f].content:null)||{};var a=d?d[newSessionData.id]:null;if(a){var c=a.col;var g=parseInt(a.pos,10);for(var i in d){var j=d[i];if(i==newSessionData.id){delete d[i];}else{if(j.col==c&amp;&amp;parseInt(j.pos,10)&gt;g){j.pos=String(parseInt(j.pos,10)-1);}}}}var k=newSessionData.occurrences.col;var l=parseInt(newSessionData.occurrences.pos,10);for(var i in e){var j=e[i];if(j.col==k&amp;&amp;parseInt(j.pos,10)&gt;=l){j.pos=String(parseInt(j.pos,10)+1);}}var h=bb.document.getElementById(newSessionData.id);if(h){h.viewNode.occurrence=newSessionData.occurrences;}e[newSessionData.id]=newSessionData.occurrences;</d:body></d:method><d:handler event="preferenceModified" type="text/javascript">if(event.attrName=="columns"){this.setProperty("columns",event.newValue);}</d:handler><d:handler event="DOMNodeRemoved" type="text/javascript">if(event.target.instanceOf("http://www.backbase.com/2008/portal","gadgetWindow")){this.removeFromColumn(event.target.viewNode);}</d:handler></d:element></d:namespace><d:namespace xmlns:b="http://www.backbase.com/2006/btl" xmlns:p="http://www.backbase.com/2008/portal" name="http://www.backbase.com/2008/portal" xml:base="bindings/www.backbase.com.2008.portal/gadgetWindow/gadgetWindow.xml"><d:element name="gadgetWindow" extends="p:portalItem b:dragBase"><d:template type="text/javascript">if(!portal._currentPortal){bb.command.trace(this,"A gadget needs to be created using createGadget method");}this.init();var i=portal._currentPortal,a=i.getSetting("gadgetWindowTemplate");if(a){if(!window[a]){bb.command.trace(this,\'Cannot find javascript function "\'+a+\'"\');}return window[a].apply(this);}else{if(!arguments.callee.oCloneCache){var f=i.getSetting("gadgetWindowButtons");var b=portal._getButtons(f,"p-gadget-button");b.push(\'&lt;div class="p-gadget-icon"&gt;&lt;/div&gt;&lt;div class="p-gadget-title-wrapper"&gt;&lt;div class="p-gadget-title"&gt;\',portal.getLocale("Loading..."),"&lt;/div&gt;&lt;/div&gt;");var c="";if(!(bb.browser.ie&amp;&amp;bb.browser.version&lt;"7")){c=\'&lt;div class="p-gadget-shadow"&gt;&lt;div class="p-gadget-shadow-top-left"&gt;&lt;div class="p-gadget-shadow-top-right"&gt;&lt;div class="p-gadget-shadow-top-center"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class="p-gadget-shadow-middle-left"&gt;&lt;/div&gt;&lt;div class="p-gadget-shadow-middle-right"&gt;&lt;/div&gt;&lt;div class="p-gadget-shadow-bottom-left"&gt;&lt;div class="p-gadget-shadow-bottom-right"&gt;&lt;div class="p-gadget-shadow-bottom-center"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\';}var h=\'&lt;div class="p-gadget-top-left"&gt;&lt;div class="p-gadget-top-right"&gt;&lt;div class="p-gadget-top-center"&gt;&lt;div onselectstart="return false;" class="p-gadget-header"&gt;\'+b.join("")+"&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;";var d=\'&lt;div class="p-gadget-middle-left"&gt;&lt;div class="p-gadget-middle-right"&gt;&lt;div class="p-gadget-center"&gt;&lt;div class="p-gadget-preferences" style="display:none;"&gt;&lt;/div&gt;&lt;div class="p-gadget-content"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\';var e=\'&lt;div class="p-gadget-bottom-left"&gt;&lt;div class="p-gadget-bottom-right"&gt;&lt;div class="p-gadget-bottom-center"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\';a=\'&lt;div class="p-gadget \'+this.loadingClass[0]+\'"&gt;\'+c+h+d+e+"&lt;/div&gt;";arguments.callee.oCloneCache=bb.html.createElementFromString(a);}this._._showLoadingCount=1;var g=arguments.callee.oCloneCache.cloneNode(true);g.colSpan=0;return[g,bb.selector.query(g,".p-gadget-content")];}</d:template><d:attribute name="id"/><d:property name="gadget"/><d:property name="class"><d:getter type="text/javascript">if(this._._class===undefined){bb.command.trace(this,\'The "class" property is not set probably because the gadget is not loaded yet.\');}return this._._class||null;</d:getter></d:property><d:property name="container" onset=""><d:getter type="text/javascript">var a=this.getProperty("parentNode");if(a&amp;&amp;a.instanceOf("http://www.backbase.com/2008/portal","container")){return a;}else{return null;}</d:getter></d:property><d:property name="maximized"><d:getter type="application/javascript">return bb.selector.match(this.viewNode,"."+this.maximizeClass[0]);</d:getter><d:setter type="application/javascript">if(value){this.maximize();}else{this.restore();}</d:setter></d:property><d:property name="minimized"><d:getter type="application/javascript">return bb.selector.match(this.viewNode,"."+this.minimizeClass[0]);</d:getter><d:setter type="application/javascript">if(value){this.minimize();}else{this.restore();}</d:setter></d:property><d:constructor type="text/javascript">this.init();</d:constructor><d:method name="init"><d:body type="text/javascript">if(!this._.__initialized){this._._portal=portal._currentPortal;this.minimizeClass=["p-gadget-minimized"];this.maximizeClass=["p-gadget-maximized"];this.hoverClass=["p-gadget-hover"];this.loadingClass=["p-gadget-loading"];this._._showLoadingCount=0;this._.__initialized=true;}</d:body></d:method><d:method name="load"><d:body type="text/javascript">if(this._._loadMethodCalled||this.getProperty("loaded")||!this.getAttribute("id")){return;}this._._loadMethodCalled=true;var b=bb.document.createEvent("CustomEvent");b.initEvent("beforeload",false,false);this.dispatchEvent(b);var c=this;var a=function(h){if(!c._){return;}var e=c.getAttribute("id");if(!h||!e.length){var g=bb.document.createEvent("CustomEvent");g.initCustomEventNS(null,"gadgetError",true,false,"gadgetClass could not be loaded or gadget ID is not defined");c.dispatchEvent(g);return;}var d=new portal.gadget.Gadget(e,c.viewGate,h,c);c.setProperty("class",h);c.setProperty("gadget",d);if(h.icon){d.setIcon(h.icon);}d.setTitle(h.title||"");if(h.noVisiblePreferences){((bb.selector.query(c.viewNode,".p-gadget-button-showPreferences")||0).style||0).display="none";((bb.selector.query(c.viewNode,".p-gadget-button-hidePreferences")||0).style||0).display="none";}if(h.bodyClass){bb.html.addClass(c.viewGate,h.bodyClass.split(" "));}if(h.bodyStyle){c.viewGate.style.cssText=h.bodyStyle;}if(h.htmlClass){bb.html.addClass(c.viewNode,h.htmlClass.split(" "));}c.buildContent(h);var i=bb.selector.queryAll(c.viewGate,"."+portal.gadget.IncludeConfig.CSS_CLASS);for(var f=0;f&lt;h.includes.length;++f){d.registerInclude(new portal.gadget.Include(d,i[f],h.includes[f]));}c.initIncludes(function(){var p;var o=c.viewGate.getElementsByTagName("script");var n=0;var m;var l=[];var k=[];while(m=o[n++]){if(m.getAttribute("type")=="text/backbase+xml"||m.getAttribute("type")=="application/backbase+xml"||m.getAttribute("type")=="application/backbase+ssr"){k.push(m);}}var q=function(){if(m=k.shift()){var H=m.textContent||m.innerHTML||m.text||"";var y={};var w=[\'&lt;?xml version="1.0"?&gt;\',"\\n",\'&lt;client:fragment xmlns:client="http://www.backbase.com/2006/client"\'];var E=m.attributes,D=0,x,u;while(x=E[D++]){if(x.specified){u=String(x.nodeName).toLowerCase();if((u=="xmlns"||u.indexOf("xmlns:")==0)&amp;&amp;!(u in y)){w.push(" ",u,\'="\',bb.string.escapeXml(y[u]=x.nodeValue),\'"\');}else{var C=x.nodeValue;if(!C){switch(u){case"class":C=m.className;break;case"style":C=m.style.cssText;break;default:C="";}}w.push(" ",u,\'="\',bb.string.escapeXml(C),\'"\');}}}if(!("xmlns" in y)){w.push(\' xmlns="http://www.w3.org/1999/xhtml"\');}w.push("&gt;",H,"&lt;/client:fragment&gt;");var t=bb.xml.parse(w.join(""),true).documentElement;bb.construct(t,function(){var L=bb.getControllerFromModel(t);if(m.getAttribute("fragment")=="true"){var K=L.getProperty("childNodes"),I=0,J;while(J=K[I++]){c.appendChild(J);m.parentNode.insertBefore(J.viewNode,m);}}else{c.appendChild(L);m.parentNode.insertBefore(L.viewNode,m);}m.parentNode.removeChild(m);q();});}else{for(var r in h.handlers){try{var z=h.handlers[r].replace(portal.TEMPLATE_NAME,e);c.addEventListener(r,new Function("event",z),false);}catch(G){var B=bb.document.createEvent("CustomEvent");B.initCustomEventNS(null,"gadgetError",true,false,\'Error while attaching event "\'+r+\'" of gadget: \'+(G.message||G));c.dispatchEvent(B);}}bb.html.removeClass(c.viewNode,c.loadingClass);c._._loaded=true;try{var B=bb.document.createEvent("CustomEvent");B.initEvent("load",false,false);c.dispatchEvent(B);}catch(G){bb.command.trace(c,G.message||G);}c.hideLoading();var v=c.getProperty("portal");var j=v.getProperty("activeContainer");if(j&amp;&amp;!j._._gLoadedEventFired){var s=j.getProperty("gadgets"),A,F=0;j._._gLoadedEventFired=true;while(A=s[F++]){if(!A.getProperty("loaded")){j._._gLoadedEventFired=false;break;}}if(j._._gLoadedEventFired){try{var B=bb.document.createEvent("CustomEvent");B.initEvent("gadgetsLoaded",false,false);v.dispatchEvent(B);}catch(G){bb.command.trace(c,G.message||G);}}}}};q();});};portal.getGadgetClass(this._._src,a);</d:body></d:method><d:method name="buildContent"><d:argument name="oGadgetClass"/><d:body type="text/javascript">var a=this.getAttribute("id"),b=document.createElement("div");b.innerHTML="x&lt;div&gt;"+oGadgetClass.content.replace(portal.TEMPLATE_NAME,a)+"&lt;/div&gt;";b=b.lastChild;while(b.firstChild){this.viewGate.appendChild(b.firstChild);}</d:body></d:method><d:method name="initIncludes"><d:argument name="fCallback"/><d:body type="text/javascript">this.getProperty("gadget").refreshIncludes(fCallback);</d:body></d:method><d:method name="minimize"><d:body type="text/javascript">if(!this.getProperty("maximized")&amp;&amp;this.getSetting("minimizable","boolean")&amp;&amp;!this.getProperty("minimized")){var b=this.getProperty("portal");var a=bb.document.createEvent("CustomEvent");a.initEvent("beforeminimize",false,true);var d=this;a.minimize=function e(){bb.html.addClass(d.viewNode,d.minimizeClass);var g=bb.document.createEvent("CustomEvent");g.initEvent("minimize",false,false);d.dispatchEvent(g);d.synchronize("update");};this.dispatchEvent(a);if(!a.defaultPrevented){var c=b.getSetting("animationSpeed","integer");if(c===0){a.minimize();}else{bb.html.setStyle(this.viewGate,"height",Math.max(this.viewGate.offsetHeight,1)+"px");var f={attributeName:"height",to:"0px",dur:c+"ms",fill:"freeze"};bb.smil.animate(this.viewGate,f,a.minimize);}}}</d:body></d:method><d:method name="getPreference"><d:argument name="sKey" type="string" required="true"/><d:body type="application/javascript">var a=(this.getProperty("class").preferences[sKey]||0);return(sKey in this._._preferences?this._._preferences[sKey]:a["default"])||"";</d:body></d:method><d:method name="setPreference"><d:argument name="sKey" type="string" required="true"/><d:argument name="sValue" type="string" required="true"/><d:body type="application/javascript">var a=this._setPreference(sKey,sValue);if(a==2){this.synchronize("update");}</d:body></d:method><d:method name="_setPreference"><d:argument name="sKey" type="string" required="true"/><d:argument name="sValue" type="string" required="true"/><d:body type="application/javascript">var e=this.getProperty("class");var a=0;if(e){var f=e.preferences[sKey];if(f){var g=f["default"];var d=this._._preferences[sKey];if(!d&amp;&amp;d!==""){d=g;}var c=d!=sValue;if(c){a=f.type=="readonly"?1:2;if(sKey in this._._preferences&amp;&amp;sValue==g){delete this._._preferences[sKey];}else{this._._preferences[sKey]=sValue;}var b=bb.document.createEvent("MutationEvent");b.initMutationEvent("preferenceModified",true,false,null,d,sValue,sKey);this.dispatchEvent(b);}}else{bb.command.trace(this,\'The preference "\'+sKey+\'" is not defined for gadget: \'+this._._src);}}return a;</d:body></d:method><d:method name="setPreferenceFromElement"><d:argument name="oInput" type="object" required="true"/><d:body type="application/javascript">var h=this,f=this.getProperty("class"),b=this.getProperty("gadget"),d=String(oInput.tagName).toLowerCase();if(f.requireSubmit&amp;&amp;d!="form"){return;}var a=0;switch(d){case"input":case"select":case"textarea":a=this._setPreference(oInput.name,portal._gatherValueFromInput(oInput));break;case"form":for(var g in f.preferences){oPreference=f.preferences[g];var e=oInput.elements[g];if(e&amp;&amp;e.nodeType!=1&amp;&amp;e.length){e=e[0];}if(oPreference.type=="hidden"||oPreference.type=="readonly"||!e){continue;}a=Math.max(a,this._setPreference(g,portal._gatherValueFromInput(e)));}break;}if(a&gt;0){var c=bb.document.createEvent("CustomEvent");c.initEvent("change",false,false);this.dispatchEvent(c);if(a==2){this.synchronize("update");}}</d:body></d:method><d:method name="maximize"><d:body type="text/javascript">if(this.getSetting("maximizable","boolean")&amp;&amp;!this.getProperty("maximized")){if(this.getProperty("minimized")){portal.overRideAnimation=true;this.restore();portal.overRideAnimation=false;}var a=bb.document.createEvent("CustomEvent");a.initEvent("beforemaximize",false,true);var e=this;var b=e.getProperty("portal");this._.oldOffsetHeight=this.viewGate.offsetHeight;a.maximize=function d(){b.pauseLayout=false;var g=e.getProperty("container");g.setProperty("maximizedGadget",e);bb.html.addClass(e.viewNode,e.maximizeClass);e.viewNode.style.zIndex="";var f=bb.document.createEvent("CustomEvent");f.initEvent("maximize",false,false);e.dispatchEvent(f);};this.dispatchEvent(a);if(!a.defaultPrevented){b.pauseLayout=true;var c=b.getSetting("animationSpeed","integer");this.viewNode.style.zIndex=999;if(c===0){a.maximize();}else{bb.smil.animate(this.viewNode,{attributeName:"left",to:"0px",dur:c+"ms",fill:"freeze"});bb.smil.animate(this.viewNode,{attributeName:"top",to:"0px",dur:c+"ms",fill:"freeze"});bb.smil.animate(this.viewNode,{attributeName:"width",to:portal._getMaximizedGadgetWidth(b,this)+"px",dur:c+"ms",fill:"freeze"});bb.smil.animate(this.viewGate,{attributeName:"height",to:"400px",dur:c+"ms",fill:"freeze"},a.maximize);}}}</d:body></d:method><d:method name="restore"><d:body type="text/javascript">var i=bb.document.createEvent("CustomEvent");i.initEvent("beforerestore",false,true);var b=this;var j=b.getProperty("portal");var e=j.getSetting("animationSpeed","integer");var h=this.getProperty("minimized");i.restore=function f(){if(h){bb.html.removeClass(b.viewNode,b.minimizeClass);bb.html.setStyle(b.viewGate.parentNode.parentNode.parentNode,"display","");}else{bb.html.removeClass(b.viewNode,b.maximizeClass);}b.viewGate.style.height="";var l=b.getProperty("container");if(l&amp;&amp;l.getProperty("maximizedGadget")==b){l.setProperty("maximizedGadget",null);}j.pauseLayout=false;var k=bb.document.createEvent("CustomEvent");k.initEvent("restore",false,false);b.dispatchEvent(k);b.synchronize("update");};this.dispatchEvent(i);if(!i.defaultPrevented){var j=this.getProperty("portal");if(e===0){i.restore();}else{if(h){i.isMinimized=true;var d=this.viewGate.style.height;bb.html.setStyle(this.viewGate.parentNode.parentNode.parentNode,"display","block");bb.html.setStyle(this.viewGate,"height","auto");var g=this.viewGate.offsetHeight;bb.html.setStyle(this.viewGate,"height",d);var a={attributeName:"height",to:g+"px",dur:e+"ms",fill:"freeze"};bb.smil.animate(this.viewGate,a,i.restore);}else{j.pauseLayout=true;var c=portal._getGadgetDimensions(this.viewNode);bb.smil.animate(this.viewNode,{attributeName:"left",to:c.left+"px",dur:e+"ms",fill:"freeze"});bb.smil.animate(this.viewNode,{attributeName:"top",to:c.top+"px",dur:e+"ms",fill:"freeze"});bb.smil.animate(this.viewNode,{attributeName:"width",to:c.width+"px",dur:e+"ms",fill:"freeze"});bb.smil.animate(this.viewGate,{attributeName:"height",to:this._.oldOffsetHeight+"px",dur:e+"ms",fill:"freeze"},i.restore);}}}</d:body></d:method><d:method name="showPreferences"><d:body type="text/javascript">var c=bb.selector.query(this.viewNode,".p-gadget-preferences");if(this.getSetting("editable")!="false"){var p=bb.document.createEvent("CustomEvent");p.initEvent("beforeShowPreferences",false,true);this.dispatchEvent(p);if(!p.defaultPrevented){bb.html.addClass(this.viewNode,"p-gadget-preferences-open");var o=this.getProperty("class");var k=this.getProperty("gadget");var i=k.identifier;var n=c.getElementsByTagName("form")[0];if(!n){var p=bb.document.createEvent("CustomEvent");p.initCustomEventNS(null,"editcreate",false,true,c);p.preferencePane=c;this.dispatchEvent(p);if(!p.defaultPrevented){var g=[],e;for(var f in o.preferences){e=o.preferences[f];if(e.type=="hidden"||e.type=="readonly"){continue;}var a=e.onchange||"";if(a.length){a="var __GADGET__ = "+i+";"+a;}g.push(\'&lt;tr&gt;&lt;td class="p-gadget-preferences-name"&gt;&lt;label for="\'+i+f+\'"&gt;\'+(e.label||f)+\'&lt;/label&gt;&lt;/td&gt;&lt;td class="p-gadget-preferences-value"&gt;\');switch(e.type){case"checkbox":g.push(\'&lt;input id="\'+i+f+\'" onclick="if (this.oldChecked != this.checked) { this.oldChecked = this.checked;\'+a+"; "+i+\'.setPreferenceFromElement(this); }" type="checkbox" name="\'+f+\'" value="true" /&gt;\');break;case"select-one":case"select-multiple":case"range":g.push(\'&lt;select id="\'+i+f+\'" name="\'+f+\'" onchange="\'+a+";"+i+\'.setPreferenceFromElement(this);"\');if(e.type=="select-multiple"){g.push(\' multiple="multiple"\');}g.push("&gt;");for(var b=0,l;l=e.values[b];b++){g.push(\'&lt;option value="\'+l.value+\'"&gt;\'+(l.label||l.value)+"&lt;/option&gt;");}g.push("&lt;/select&gt;");break;case"textarea":g.push(\'&lt;textarea id="\'+i+f+\'" name="\'+f+\'" onchange="\'+a+";"+i+\'.setPreferenceFromElement(this);"&gt;&lt;/textarea&gt;\');break;case"checkbox-multiple":for(var b=0,l;l=e.values[b];b++){g.push(\'&lt;div&gt;&lt;label for="\'+i+f+l.value+\'"&gt;\',(l.label||l.value),\'&lt;/label&gt; &lt;input id="\'+i+f+l.value+\'" onclick="if (this.oldChecked != this.checked) { this.oldChecked = this.checked;\'+a+";"+i+\'.setPreferenceFromElement(this);}" type="checkbox" name="\'+f+\'" value="\'+l.value+\'" /&gt;&lt;/div&gt;\');}break;case"radio":for(var b=0,l;l=e.values[b];b++){g.push(\'&lt;div&gt;&lt;label for="\'+i+f+l.value+\'"&gt;\',(l.label||l.value),\'&lt;/label&gt; &lt;input id="\'+i+f+l.value+\'" onclick="\'+a+";"+i+\'.setPreferenceFromElement(this);" type="radio" name="\'+f+\'" value="\'+l.value+\'" /&gt;&lt;/div&gt;\');}break;case"password":g.push(\'&lt;input id="\'+i+f+\'" onchange="\'+a+";"+i+\'.setPreferenceFromElement(this);" type="password" name="\'+f+\'" /&gt;\');break;case"text":default:g.push(\'&lt;input id="\'+i+f+\'" onchange="\'+a+";"+i+\'.setPreferenceFromElement(this);" type="text" name="\'+f+\'" /&gt;\');break;}g.push("&lt;/td&gt;&lt;/tr&gt;");}if(o.requireSubmit){g.push(\'&lt;tr&gt;&lt;td colspan="2"&gt; &lt;input class="p-gadget-options-submit" type="submit" onclick="\'+i+\'.hidePreferences()" value="Save" /&gt; &lt;input class="p-gadget-options-cancel" onclick="\'+i+\'.hidePreferences()" type="button" value="Cancel" /&gt;&lt;/td&gt;&lt;/tr&gt;\');}c.innerHTML=\'&lt;form class="\'+i+\'-p-gadget-preferences-form" onsubmit="\'+i+\'.setPreferenceFromElement(this); return false;"&gt;&lt;table style="width:100%"&gt;&lt;tbody&gt;\'+g.join("")+"&lt;/tbody&gt;&lt;/table&gt;&lt;/form&gt;";}n=c.getElementsByTagName("form")[0];if(!n){bb.command.trace(this,"Could not find FORM element inside preference pane, this element is required");}}this.applyPreferencesToForm(n);var q=this.getProperty("portal");var j=q.getSetting("animationSpeed","integer");if(j===0){c.style.display="";}else{c.style.display="";var m=c.offsetHeight;c.style.height="1px";var d={attributeName:"height",to:m+"px",dur:j+"ms",fill:"freeze"};var h=function(){c.style.height="";};bb.smil.animate(c,d,h);}}}</d:body></d:method><d:method name="applyPreferencesToForm"><d:argument name="oForm" type="object" required="true"/><d:body type="text/javascript">var k=this.getProperty("class");var f=this.getProperty("gadget");var j;for(var c in k.preferences){var b=k.preferences[c];var j=String(f.getPreference(c));if(!oForm.elements[c]){continue;}switch(b.type){case"checkbox":oForm.elements[c].checked=(j=="true"||j=="on");break;case"select-one":case"range":var d=oForm.elements[c];d.value=j;break;case"select-multiple":var d=oForm.elements[c];var h=j.split(/\\s*,\\s*/);for(var a=0;a&lt;d.options.length;a++){var g=d.options[a];for(var e=0;e&lt;h.length;e++){if(g.value==h[e]){g.selected=true;break;}}}break;case"checkbox-multiple":var h=j.split(/\\s*,\\s*/);for(var a=0;a&lt;oForm.elements.length;a++){var g=oForm.elements[a];if(g.name==c){var i=false;for(var e=0;e&lt;h.length;e++){if(g.value==h[e]){i=true;break;}}g.checked=i;}}break;case"radio":for(var a=0;a&lt;oForm.elements.length;a++){if(oForm.elements[a].name==c){oForm.elements[a].checked=(oForm.elements[a].value==j);}}break;case"text":case"password":case"hidden":case"readonly":default:oForm.elements[c].value=j;break;}}var l=bb.document.createEvent("CustomEvent");l.initCustomEventNS(null,"preferencesApplied",false,false,oForm);this.dispatchEvent(l);</d:body></d:method><d:method name="hidePreferences"><d:body type="text/javascript">if(!bb.html.hasClass(this.viewNode,"p-gadget-preferences-open")){return;}var g=bb.selector.query(this.viewNode,".p-gadget-preferences");if(document.activeElement&amp;&amp;bb.selector.queryAncestor(document.activeElement,".p-gadget-preferences")==g){document.activeElement.blur();}var a=bb.document.createEvent("CustomEvent");a.initEvent("beforeHidePreferences",false,true);this.dispatchEvent(a);if(!a.defaultPrevented){bb.html.removeClass(this.viewNode,"p-gadget-preferences-open");var c=this.getProperty("portal");var d=c.getSetting("animationSpeed","integer");var e=this;var b=function(){var i=bb.document.createEvent("CustomEvent");i.initEvent("hidePreferences",false,false);e.dispatchEvent(i);};if(d===0){g.style.display="none";b();}else{bb.html.setStyle(g,"height",Math.max(g.offsetHeight,1)+"px");var h={attributeName:"height",to:"1px",dur:d+"ms",fill:"freeze"};var f=function(){g.style.height="";g.style.display="none";b();};bb.smil.animate(g,h,f);}}</d:body></d:method><d:method name="showLoading"><d:body type="text/javascript">this._._showLoadingCount++;this.getProperty("gadget").loading=true;bb.html.addClass(this.viewNode,this.loadingClass);</d:body></d:method><d:method name="hideLoading"><d:body type="text/javascript">if(this._._showLoadingCount&gt;0){this._._showLoadingCount--;}if(this._._showLoadingCount==0){this.getProperty("gadget").loading=false;bb.html.removeClass(this.viewNode,this.loadingClass);var b=this.getProperty("portal");var d=b.getProperty("activeContainer");if(d&amp;&amp;!d._._gReadyEventFired){var e=d.getProperty("gadgets"),f,c=0;d._._gReadyEventFired=true;while(f=e[c++]){if(f._._showLoadingCount&gt;0){d._._gReadyEventFired=false;break;}}if(d._._gReadyEventFired){var a=bb.document.createEvent("CustomEvent");a.initEvent("gadgetsReady",false,false);b.dispatchEvent(a);d._._gReadyEventFired=false;}}return true;}return false;</d:body></d:method><d:method name="setTitle"><d:argument name="sTitle" type="string" required="true"/><d:body type="text/javascript">this.getProperty("gadget").title=sTitle;bb.selector.query(this.viewNode,".p-gadget-title").innerHTML=sTitle;</d:body></d:method><d:method name="setIcon"><d:argument name="sIcon" type="string" required="true"/><d:body type="text/javascript">if(!sIcon){return;}this.getProperty("gadget").icon=sIcon;var a=bb.selector.query(this.viewNode,".p-gadget-icon");if(sIcon.indexOf("url(")==-1){bb.html.setStyle(a,"background-image","url("+sIcon+")");bb.html.setStyle(a,"background-position","0 0");}else{bb.html.setStyle(a,"background",sIcon);}</d:body></d:method><d:method name="unload"><d:body type="application/javascript">if(this.getSetting("closable","boolean")){var c=this.getProperty("container");if(c&amp;&amp;c.getProperty("maximizedGadget")==this){c.setProperty("maximizedGadget",null);}var a=bb.document.createEvent("CustomEvent");a.initEvent("beforeunload",false,true);this.dispatchEvent(a);if(!a.defaultPrevented){var b=this.getProperty("portal");b.removeGadget(this);}}</d:body></d:method><d:method name="refresh"><d:body type="application/javascript">var a=bb.document.createEvent("CustomEvent");a.initEvent("refresh",false,false);this.dispatchEvent(a);</d:body></d:method><d:method name="setAutoRefresh"><d:argument name="minutes"/><d:body type="application/javascript">return portal._autoRefresh.set(this,minutes);</d:body></d:method><d:handler event="beforeload" type="application/javascript">if(!this.getSetting("closable","boolean")){((bb.selector.query(this.viewNode,".p-gadget-button-unload")||0).style||0).display="none";}if(!this.getSetting("editable","boolean")){((bb.selector.query(this.viewNode,".p-gadget-button-showPreferences")||0).style||0).display="none";((bb.selector.query(this.viewNode,".p-gadget-button-hidePreferences")||0).style||0).display="none";}if(!this.getSetting("minimizable","boolean")){((bb.selector.query(this.viewNode,".p-gadget-button-minimize")||0).style||0).display="none";}if(!this.getSetting("maximizable","boolean")||!this.viewNode.parentColumn){((bb.selector.query(this.viewNode,".p-gadget-button-maximize")||0).style||0).display="none";}if(!this.getSetting("refreshable","boolean")){((bb.selector.query(this.viewNode,".p-gadget-button-refresh")||0).style||0).display="none";}if(this.viewNode.colSpan||!this.viewNode.parentColumn||!this.getSetting("draggable","boolean")){((bb.selector.query(this.viewNode,".p-gadget-top-left")||0).style||0).cursor="default";}this.viewNode.denyInsert=this.getSetting("denyInsert")||"none";this.setAutoRefresh(parseInt(this.getSetting("autoRefresh")||0));var d=this.getSetting("className");if(d){var a=d.split(" ");var b=0;bb.html.addClass(this.viewNode,a);while(d=a[b++]){this.minimizeClass.push(d+"-minimized");this.maximizeClass.push(d+"-maximized");this.hoverClass.push(d+"-hover");this.loadingClass.push(d+"-loading");}if(bb.selector.match(this.viewNode,"."+this.minimizeClass[0])){bb.html.addClass(this.viewNode,this.minimizeClass);}if(bb.selector.match(this.viewNode,"."+this.loadingClass[0])){bb.html.addClass(this.viewNode,this.loadingClass);}}</d:handler><d:handler event="dragStart" type="text/javascript">var l=this.getProperty("portal");var k=this.getProperty("container");if(k&amp;&amp;l&amp;&amp;!this.viewNode.colSpanMax&amp;&amp;this.viewNode.parentColumn&amp;&amp;this.getSetting("draggable","boolean")&amp;&amp;!this.getProperty("maximized")&amp;&amp;bb.selector.match(event.viewTarget,".p-gadget-top-left, .p-gadget-top-left *")&amp;&amp;!bb.selector.match(event.viewTarget,".p-gadget-button, .p-gadget-button *")){var h=this.viewNode;var j=bb.selector.query(l.viewNode,".p-portal-dragPlaceholder");j.style.left=h.style.left;j.style.top=h.style.top;var b=h.offsetWidth;var a=h.offsetHeight;if(bb.html.getStyle(j,"box-sizing")=="content-box"){b-=(bb.html.getBoxObject(j,"border").width-bb.html.getBoxObject(j,"content").width);a-=(bb.html.getBoxObject(j,"border").height-bb.html.getBoxObject(j,"content").height);}bb.html.setStyle(j,"width",b+"px");bb.html.setStyle(j,"height",a+"px");j.style.visibility="visible";j.colSpan=h.colSpan;var f=h.parentColumn;var g=bb.array.indexOf(f.items,h);this._orgContainer=k;this._orgColumn=f;this._orgIndex=g;k.removeFromColumn(h);k.appendToColumn(f,j,g);h.style.zIndex=2;var d=bb.html.getBoxObject(h);var i=d.left-event.startX;var c=d.top-event.startY;var e=bb.selector.queryAll(document.body,".portal-droppable");l._addDragOverlay();btl.drag.dragManager.doDrag(l,this,event.startX,event.startY,h,i,c,1,false,e);}</d:handler><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript">bb.html.disableUserSelect(bb.selector.query(this.viewNode,".p-gadget-top-left"));</d:handler><d:handler event="mouseenter" type="text/javascript" match=".p-gadget-top-left">bb.html.addClass(event.currentView,"p-gadget-top-hover");</d:handler><d:handler event="mouseleave" type="text/javascript" match=".p-gadget-top-left">bb.html.removeClass(event.currentView,"p-gadget-top-hover");</d:handler><d:handler event="mouseenter" type="text/javascript" match=".p-gadget-header &gt; a.p-gadget-button">var a=event.currentView;bb.html.addClass(a,portal._getButtonClass(a,"p-gadget-button","-hover"));</d:handler><d:handler event="mouseenter" type="text/javascript" match=".p-gadget-header &gt; a.p-gadget-button.p-gadget-button-press">var a=event.currentView;bb.html.addClass(a,portal._getButtonClass(a,"p-gadget-button","-press"));</d:handler><d:handler event="mousedown" type="text/javascript" match=".p-gadget-header &gt; a.p-gadget-button">var b=event.currentView;var c=["p-gadget-button-press",portal._getButtonClass(b,"p-gadget-button","-press")];bb.html.addClass(b,c);var a=function(){bb.html.removeClass(b,c);this.removeEventListener("mouseup",a,false);};bb.document.addEventListener("mouseup",a,false);event.preventDefault();</d:handler><d:handler event="mouseleave" type="text/javascript" match=".p-gadget-header &gt; a.p-gadget-button">var a=event.currentView;var b=portal._getButtonClass(a,"p-gadget-button");bb.html.removeClass(a,[b+"-hover",b+"-press"]);</d:handler><d:handler event="click" type="text/javascript" match=".p-gadget-header &gt; a.p-gadget-button">var b=event.currentView;if(bb.selector.match(this.viewNode,"."+this.loadingClass[0])){return;}var a=bb.document.createEvent("CustomEvent");a.initCustomEventNS(null,"buttonClick",false,false,portal._getButtonType(b,"p-gadget-button"));this.dispatchEvent(a);event.preventDefault();</d:handler><d:handler event="buttonClick" type="text/javascript">switch(event.detail){case"refresh":this.refresh();break;case"maximize":this.maximize();break;case"minimize":this.minimize();break;case"restore":this.restore();break;case"showPreferences":this.showPreferences();break;case"hidePreferences":this.hidePreferences();break;case"unload":this.unload();break;default:}</d:handler><d:handler event="mouseenter" type="text/javascript">bb.html.addClass(this.viewNode,this.hoverClass);</d:handler><d:handler event="destruct" type="text/javascript">var a=bb.document.createEvent("CustomEvent");a.initEvent("unload",false,false);this.dispatchEvent(a);this._._portal=null;this.viewNode.occurrence=null;var b=this._._gadget;if(b){window[b.identifier]=null;b.body=null;b._window=null;}this._._gadget=null;if(this.viewNode.parentNode){this.viewNode.parentNode.removeChild(this.viewNode);}</d:handler><d:handler event="mouseleave" type="text/javascript">bb.html.removeClass(this.viewNode,this.hoverClass);</d:handler></d:element></d:namespace><d:namespace name="http://www.backbase.com/2008/portal" xml:base="bindings/www.backbase.com.2008.portal/portalObserver/portalObserver.xml"><d:element name="portalObserver" abstract="true"><d:attribute name="portal"/><d:property name="portal"><d:getter type="text/javascript">var a=this._._portal;if(!a||!a._){a=this._._portal=null;}return a;</d:getter><d:setter type="text/javascript">var c=this.getProperty("portal");if(c===value){return;}if(c){var a=bb.document.createEvent("Events");a.initEvent("disconnected",false,false);a.relatedTarget=c;this.dispatchEvent(a);this._._portal=null;}if(Boolean(value&amp;&amp;value.instanceOf("http://www.backbase.com/2008/portal","portal"))){this._._portal=value;var a=bb.document.createEvent("Events");a.initEvent("connected",false,false);a.relatedTarget=value;this.dispatchEvent(a);}else{if(value!=null){var b="An invalid value for the "+name+" property was set: "+value+".";b+=" Make sure a valid http://www.backbase.com/2008/portal#portal is set.";bb.command.trace(this,b);}}</d:setter></d:property><d:handler event="DOMNodeInsertedIntoDocument" type="text/javascript">if(!this.hasAttribute("portal")){bb.command.trace(this,"The portal attribute is not specified on an element which is a portalObserver, this attribute is mandatory");}if(!this.getProperty("portal")&amp;&amp;this.hasAttribute("portal")){var b=this;var d=function(){var f=b.getAttribute("portal");var e=null;if(f){e=bb.evaluateSmart(f,b,b);}return e;};var a=d();if(a){this.setProperty("portal",a);}else{var c=function(e){b.setProperty("portal",d());bb.document.removeEventListener("load",arguments.callee,false);};bb.document.addEventListener("load",c,false);}}</d:handler><d:handler event="destruct" type="text/javascript">this.setProperty("portal",null);</d:handler></d:element></d:namespace><d:namespace xmlns:ssr="http://www.backbase.com/2009/ssr" name="http://www.backbase.com/2009/ssr" xml:base="bindings/www.backbase.com.2009.ssr/ssr.xml"><d:resource type="text/javascript">portal.ssr={};portal.ssr.namespaceURI="http://www.backbase.com/2009/ssr";portal.ssr.Error=function(a){this.toString=function(){return"[SSR Error: "+a+"]";};};portal.ssr.ElementNotFoundError=function(a){portal.ssr.Error.call(this,"The template with id \'"+a+"\' was not found in the document!");};portal.ssr.tryToGetElementById=function(a){var b=document.getElementById(a);if(!b){throw new portal.ssr.ElementNotFoundError(a);}return b;};portal.ssr.readGadgetClasses=function(b){var c=b.firstChild,a="";while(c){if(c.nodeType==1){a=c.getAttribute("src");if(a){portal.setGadgetClass(a,bb.xml.parse(c.textContent?c.textContent:c.innerHTML,true));}}c=c.nextSibling;}};</d:resource><d:behavior name="pickupView"><d:attribute name="viewNode"/><d:attribute name="viewGate"/><d:method name="__beforeTemplate"><d:body type="application/javascript">var a=this.getAttribute("viewNode");if(a){var c=document.documentElement;var b=a!="body"?bb.selector.query(c,a):document.body;if(b){this.viewNode=b;var d=this.getAttribute("viewGate");if(d){this.viewGate=bb.selector.query(b,d);}if(!this.viewGate){this.viewGate=b;}}else{bb.command.trace(this,\'http://www.backbase.com/2009/ssr#pickupView behavior could not find element: "\'+a+\'"\');}return true;}return false;</d:body></d:method></d:behavior><d:behavior name="portal"><d:attribute name="pickGadgetsContentOnly" default="false"/><d:method name="__beforeTemplate"><d:body type="text/javascript">var a=portal.ssr.tryToGetElementById(this.getAttribute("id"));a.removeAttribute("style");this.viewNode=this.viewGate=a;return true;</d:body></d:method><d:method name="createGadgetWindowFromConfig"><d:argument name="sId" type="string"/><d:argument name="oConfig" type="object"/><d:body type="text/javascript">var c=this._._session,a=null,b=this.getAttribute("pickGadgetsContentOnly")==="true";if(oConfig.preRendered){portal._currentPortal=this;a=bb.construct(bb.xml.parse(\'&lt;g:gadgetWindow xmlns:g="http://www.backbase.com/2008/portal" xmlns:ssr="http://www.backbase.com/2009/ssr" xmlns:e="http://www.backbase.com/2006/xel" id="\'+sId+\'" e:behavior="\'+(b?"ssr:gadgetWindowContent":"ssr:gadgetWindow")+\'" /&gt;\'));delete portal._currentPortal;a._._src=oConfig.src;a._._preferences=new portal._object(oConfig.preferences||{});a._._settings=oConfig.settings&amp;&amp;c.settings[oConfig.settings]||{};a._._templateId=oConfig.tid||"";a._._showLoadingCount=1;a._._id=sId;delete oConfig.preRendered;}else{bb.removeBehavior(this,portal.ssr.namespaceURI,"portal");a=this.createGadgetWindowFromConfig(sId,oConfig);bb.addBehavior(this,portal.ssr.namespaceURI,"portal");}return a;</d:body></d:method><d:method name="__attach"><d:argument name="sFnName" type="string"/><d:argument name="oNode" type="object" required="true"/><d:argument name="oRefNode" type="object"/><d:body type="text/javascript">if(!bb.instanceOf(oNode,portal.ssr.namespaceURI,"gadgetWindow")){bb.removeBehavior(this,portal.ssr.namespaceURI,"portal");this.__attach(sFnName,oNode,oRefNode);bb.addBehavior(this,portal.ssr.namespaceURI,"portal");}</d:body></d:method></d:behavior><d:behavior name="gadgetWindow"><d:method name="__beforeTemplate"><d:body type="text/javascript">var a=portal.ssr.tryToGetElementById(this.getAttribute("id"));a.removeAttribute("style");a.removeAttribute("id");this.viewNode=a;this.viewGate=bb.selector.query(a,".p-gadget-content");return true;</d:body></d:method><d:method name="buildContent"><d:argument name="oGadgetClass"/><d:body type="text/javascript"/></d:method><d:method name="initIncludes"><d:argument name="fCallback"/><d:body type="text/javascript">bb.removeBehavior(this,portal.ssr.namespaceURI,"gadgetWindow");fCallback();</d:body></d:method></d:behavior><d:behavior name="gadgetWindowContent"><d:method name="buildContent"><d:argument name="oGadgetClass"/><d:body type="text/javascript">var a=portal.ssr.tryToGetElementById("SSR-body-"+this.getAttribute("id"));while(a.firstChild){this.viewGate.appendChild(a.firstChild);}</d:body></d:method><d:method name="initIncludes"><d:argument name="fCallback"/><d:body type="text/javascript">bb.removeBehavior(this,portal.ssr.namespaceURI,"gadgetWindowContent");fCallback();</d:body></d:method></d:behavior></d:namespace><d:namespace xmlns:p="http://www.backbase.com/2008/portal" name="http://www.backbase.com/2009/portal/navigation" xml:base="bindings/www.backbase.com.2009.portal.navigation/rules/rules.xml"><d:element name="rules" extends="p:portalObserver"><d:resource type="text/javascript" xml:base="rules.js">portal.navigation={};(function(){var k="http://www.backbase.com/2009/portal/navigation";function h(q,p,r){this.collection=q;if(r&amp;&amp;p){this.test=function(s){return(portal.xml.getLocalName(s)==r&amp;&amp;s.namespaceURI==p);};}else{if(p){this.test=function(s){return(s.namespaceURI==p);};}}}h.prototype.each=function(q){var p=this.collection,s=null;for(var r=0;r&lt;p.length;++r){s=p[r];s.nodeType==1&amp;&amp;this.test(s)&amp;&amp;q(s);}};h.prototype.test=function(p){return true;};function f(){}f.prototype.execute=function(p,q){};f.prototype.executeWhenReady=function(p,q){};function n(p){this._container=p;f.call(this);}n.prototype=new f();n.prototype.getContainer=function(q,t){var u=q.getProperty("containers"),s=null,p=0,r=t.apply(this._container);while(s=u[p++]){if(s.getProperty("templateId")==r){return s;}}s=q.createContainer(null,null,null,r);q.addContainer(s,null,false);return s;};n.prototype.executeWhenReady=function(q,r){var p=this.getContainer(q,r),s=this;if(p.getProperty("loaded")){s.execute(p,q,r);}else{p.addEventListener("load",function(){s.execute(p,q,r);this.removeEventListener("load",arguments.callee,false);},false);}};function b(p){n.call(this,p);}b.prototype=new n();b.prototype.execute=function(r,p,q){r&amp;&amp;p.activateContainer(r);};function d(p){n.call(this,p);}d.prototype=new n();d.prototype.execute=function(r,p,q){var s=r?r.getProperty("maximizedGadget"):null;s&amp;&amp;s.restore();};function o(p,q,r){this._name=q;this._value=r;n.call(this,p);}o.prototype=new n();o.prototype.execute=function(r,p,q){r&amp;&amp;r.setPreference(q.apply(this._name),q.apply(this._value));};function i(q,s,r,p){this._type=s;this._cancelable=p||false;this._bubbles=r||false;n.call(this,q);}i.prototype=new n();i.prototype.createEvent=function(){var p=bb.document.createEvent("CustomEvent");p.initEvent(this._type,this._cancelable,this._bubbles);return p;};i.prototype.execute=function(r,p,q){r&amp;&amp;r.dispatchEvent(this.createEvent());};function g(q,p){this._gadget=p;n.call(this,q);}g.prototype=new n();g.prototype.getGadget=function(r,t){var q=t.apply(this._gadget),s=this.getContainer(r,t),v=s.getGadgetsByTemplateId(q),p=null,u=0;while(p=v[u++]){p.load();return p;}p=r.createGadget(null,null,null,q);r.addGadget(p,s,{col:s.getSmallestColumn()});return p;};g.prototype.executeWhenContainerIsReady=function(q,r){var p=this.getGadget(q,r),s=this;if(p.getProperty("loaded")){s.execute(p,q,r);}else{p.addEventListener("load",function(){s.execute(p,q,r);this.removeEventListener("load",arguments.callee,false);},false);}};g.prototype.executeWhenReady=function(q,r){var p=this.getContainer(q,r),s=this;if(p.getProperty("loaded")){s.executeWhenContainerIsReady(q,r);}else{p.addEventListener("load",function(){s.executeWhenContainerIsReady(q,r);this.removeEventListener("load",arguments.callee,false);},false);}};function m(r,p,q){this._aPrefs=q;g.call(this,r,p);}m.prototype=new g();m.prototype.execute=function(q,s,u){var p=0;for(var t=0;t&lt;this._aPrefs.length;t++){p=q._setPreference(u.apply(this._aPrefs[t].name),u.apply(this._aPrefs[t].value))|p;}if(p){var r=bb.document.createEvent("CustomEvent");r.initEvent("change",false,false);q.dispatchEvent(r);if(p&gt;=2){q.synchronize("update");}}};function l(q,p){g.call(this,q,p);}l.prototype=new g();l.prototype.execute=function(p,q,r){p&amp;&amp;p.maximize();};function e(r,p,t,s,q){this._type=t;this._cancelable=q||false;this._bubbles=s||false;g.call(this,r,p);}e.prototype=new g();e.prototype.createEvent=i.prototype.createEvent;e.prototype.execute=function(p,q,r){p&amp;&amp;p.dispatchEvent(this.createEvent());};function a(p){this._matchExpr=new RegExp(p);this._actions=[];}a.prototype.match=function(q){var p=String(q).match(this._matchExpr);this._matches=p||[];this._matches.apply=function(s){var r=this;return s.replace(/\\$(\\d)+/g,function(t,u){return r[u]||"";});};return Boolean(p);};a.prototype.addAction=function(p){if(!(p instanceof f)){bb.command.trace(this,"Attempt to add non portal.navigation.Action instance to the rule actions sequence!");}this._actions.push(p);};a.prototype.removeAction=function(p){if(!(p instanceof f)){bb.command.trace(this,"Attempt to remove non portal.navigation.Action instance from the rule actions sequence!");}bb.array.removeObject(this._actions,p);};a.prototype.apply=function(q){var p=this._actions;for(var r=0;r&lt;p.length;++r){p[r].executeWhenReady(q,this._matches);}};function j(){}j.prototype.buildGadgetActions=function(s,t){var p=t.getAttribute("tid"),r=[],q=[];t.getAttribute("maximized")=="maximized"&amp;&amp;r.push(new l(s,p));(new h(t.childNodes,k,"preference")).each(function(u){q.push({name:u.getAttribute("name"),value:u.getAttribute("value")});});if(q.length){r.push(new m(s,p,q));}return r;};j.prototype.buildContainerActions=function(u){var t=u.getAttribute("tid"),p=this,s=[],r=false,q=false;u.getAttribute("selected")=="selected"&amp;&amp;s.push(new b(t));(new h(u.childNodes,k)).each(function(v){if(portal.xml.getLocalName(v)=="gadget"){s.push.apply(s,p.buildGadgetActions(t,v));r=r||(v.getAttribute("maximized")=="maximized");}else{if(portal.xml.getLocalName(v)=="preference"){s.push(new o(t,v.getAttribute("name"),v.getAttribute("value")));q=true;}}});q&amp;&amp;s.push(new i(t,"change",false,false));!r&amp;&amp;s.push(new d(t));return s;};j.prototype.buildActions=function(r){var q=[],p=this;(new h(r,k,"container")).each(function(s){q.push.apply(q,p.buildContainerActions(s));});return q;};function c(){}c.prototype.buildRule=function(q){var p=new portal.navigation.Rule(q.getAttribute("match")),r=(new j()).buildActions(q.childNodes);for(var s=0;s&lt;r.length;++s){p.addAction(r[s]);}return p;};c.prototype.buildRules=function(q){var s=new h(q,k,"rule"),r=[],p=this;s.each(function(t){r.push(p.buildRule(t));});return r;};this.Rule=a;this.RuleBuilder=c;this.namespaceURI=k;}).call(portal.navigation);</d:resource><d:method name="__children"><d:body type="text/javascript"/></d:method><d:constructor type="text/javascript">var b=this.getProperty("navigationBaseURI");this._._rules=(new portal.navigation.RuleBuilder()).buildRules(this.modelNode.childNodes).concat(new portal.navigation.Rule(b));var a=this;bb.document.addEventListener("history",function(c){a.execBookmark(c.bookmark);},false);bb.html.addEventListener(document,"click",function(e){if(!bb.browser.ie&amp;&amp;e.button!=0){return;}var c=e.target||e.srcElement;var d=bb.selector.queryAncestor(c,"a");if(d){var f=String(d.href);if(f.indexOf(b)==0){f=f.substr(b.length);try{bb.history.add(f);}catch(g){bb.command.trace(null,String(g.message||g));}if(e.preventDefault){e.preventDefault();}e.returnValue=false;return false;}}},false);this.execBookmark(bb.history.current);</d:constructor><d:property name="navigationBaseURI"><d:getter type="text/javascript">var a=this.getAttribute("targetURI")||".";return bb.uri.resolveUri(a,document.location.href);</d:getter></d:property><d:method name="execBookmark"><d:argument name="sBookmark" type="string" required="true"/><d:argument name="oPortal" type="object"/><d:body type="application/javascript">oPortal=oPortal||this.getProperty("portal");var a=null;if(oPortal){a=this.match(sBookmark);a&amp;&amp;a.apply(oPortal);}else{this._currentBookmark=sBookmark;}</d:body></d:method><d:method name="match"><d:argument name="location"/><d:body type="text/javascript">var c=this._._rules,a=null;for(var b=0;b&lt;c.length;++b){a=c[b];if(a.match(location)){return a;}}return null;</d:body></d:method></d:element></d:namespace></d:tdl>');var absa=window.absa||{};absa.version="@VERSION@";absa.touch=absa.touch||{};absa.gadgets=absa.gadgets||{};absa.apps=absa.apps||{};absa.initializeNewContent=function(b){phe.initializePHE(b);absa.form.attachHandlers(b)};absa.lazyLoadNode=function(g,b,f,c){var d=g.getAttribute("proxyurl");if(!d){return}if(!g._isLoaded||b){var e=bb.selector.query(g,".ap-loading-message");if(e){e.parentNode.removeChild(e)}else{e=document.createElement("div");e.className="ap-loading-message"}g.innerHTML="";g.appendChild(e);e.style.display="";phe.loadingMessage.showLoadingMessage(e);if(typeof f==="function"){g._fnCallBack=f}var f=f||null;absa.io.makeRequest(d,function(k){if(e){e.style.display="none";phe.loadingMessage.hideLoadingMessage(e)}g.innerHTML="";if(!k.errors.length){var j=bb.html.createElementFromString(k.text);if(j!=null){g.appendChild(j)}g._isLoaded=true;absa.initializeNewContent(g);if(g._fnCallBack){g._fnCallBack.call(this,g)}var h=absa.util.attributeToFunction(g,"onlazyloadnode");if(h){h.call(g)}g._hasIOError=false;if(!c){var m=bb.selector.query(g,".ui-form-field");if(m){if(absa.VI=="true"){var l=bb.selector.queryAncestor(m,".ui-tabBody");absa.vi.addActiveContentDiv(l)}}}}else{absa.showIOErrorMessage(g);g._hasIOError=true}})}};absa.showIOErrorMessage=function(m){m.innerHTML="";var j=phe.message.createElement("error");m.appendChild(j);phe.message.setMessage(j,absa.locale["Common/General/Error/IOErrorMessage"]);var e=0;var k=bb.selector.queryAncestor(m,".ui-form");var b=bb.selector.query(k,".ui-formFoot");if(b!=null){var d=bb.selector.query(b,".ap-button-reset");var g=bb.selector.query(b,".ap-button-back");var n=bb.selector.query(b,".ap-button-cancel");var h=bb.selector.query(b,".ap-button-next");if(d!=null){phe.common.hide(d);e++}if(g!=null){phe.common.hide(g);e++}if(h!=null){phe.common.hide(h);e++}if(e>0){var f=absa.createButton("ap-button-cancel","absa.wizard.finishButton(this)",absa.locale["Common/General/Label/Close"],absa.locale["Common/General/Label/Close"]);var l=bb.selector.queryAncestor(m,".ui-buttonFooter");var c=bb.selector.query(l,".ui-exception-container");c.appendChild(f)}}};absa.createButton=function(e,c,d,g){var b=[];b[b.length]="<button ";if(c&&c!=""){b[b.length]='onclick="'+c+'" '}b[b.length]='aria-label="." type="button" tooltip="'+d+'" ';b[b.length]='class="ui-button '+e+'">';b[b.length]='<div class="ui-button-left">';b[b.length]='<div class="ui-button-right">';b[b.length]='<div class="ui-button-center">';b[b.length]=""+g+"";b[b.length]="</div>";b[b.length]="</div>";b[b.length]="</div>";b[b.length]="</button>";var f=bb.html.createElementFromString(b.join(""));return f};absa.openReport=function(b,c,d){b+=(b.indexOf("?")==-1?"?":"&")+"uniq="+new Date().getTime();b+="&nonce="+absa.NONCE;if(b.indexOf("forceDownload=")==-1){b+="&forceDownload=false"}b+="#toolbar=1";window.open(b,c||"",d||"top=0,left=0,width=850,height=600,resizable")};absa.hasPdfPlugin=function(){var c=false;try{acrobat4=new ActiveXObject("PDF.PdfCtrl.1");if(acrobat4){c=true}}catch(d){}if(!c){try{acrobat7=new ActiveXObject("AcroPDF.PDF.1");if(acrobat7){c=true}}catch(d){}if(!c&&navigator.plugins&&navigator.plugins.length>0){for(var b=0;b<navigator.plugins.length;b++){if(navigator.plugins[b].name.indexOf("Adobe Acrobat")>-1){c=true;break}}}}return c};absa.openDocHandler=absa.openDocHandler||{};absa.openDocHandler.window=null;absa.openDocHandler=function(d,f,b,e,c){if(f==null){f="2097152"}if(b==null){b="gif|jpg|jpeg|pdf|png|svg|doc|csv|xls"}if(c==null){c="default"}if(absa.openDocHandler.window!=null){absa.openDocHandler.window.focus()}else{setTimeout(function(){absa.openDocHandler.window=window.open("static/docHandler/docHandler.jsp","DocHandler",e||"top=0,left=0,width=850,height=600,scrollbars=1,resizable");if(absa.openDocHandler.window==null||typeof(absa.openDocHandler.window)=="undefined"){alert(absa.locale["Common/General/Label/DisablePopupBlocker"])}else{absa.openDocHandler.window.focus();absa.openDocHandler.window.document.write("<form novalidate name='docHandlerForm' id='docHandlerForm' method='POST' action='static/docHandler/docHandler.jsp'>");absa.openDocHandler.window.document.write("<input type='hidden' name='data' value='"+d+"'>");absa.openDocHandler.window.document.write("<input type='hidden' name='whoCalled' value='"+c+"'>");absa.openDocHandler.window.document.write("<input type='hidden' name='fileTypes' value='"+b+"'>");absa.openDocHandler.window.document.write("<input type='hidden' name='fileSize' value='"+f+"'>");absa.openDocHandler.window.document.write("<input type='hidden' name='uniq' value='"+new Date().getTime()+"'>");absa.openDocHandler.window.document.write("</form>");absa.openDocHandler.window.document.write("<script language='javascript'>function doDocHandler_Load(){ var dspF = document.getElementById('docHandlerForm'); dspF.submit(); } doDocHandler_Load();<\/script>")}},250)}};absa.closeDocHandler=function(){var c=parent.frames.DocHandler;if(c!=null){c.close();absa.openDocHandler.window=null}else{if(absa.openDocHandler.window!=null){absa.openDocHandler.window.close();absa.openDocHandler.window=null}}try{var d=bb.selector.query(document.body,".ap-ficaDocHandler");if(d){absa.index.clientComplianceController.reloadContent(d);absa.apps.ficaDocHandler.reloadGadgetContent(d)}}catch(b){}};absa.createButtonHTMLString=function(f,d,b,c){var d=d.length>0?'tooltip="'+d+'"':"";var c=c&&c.length>0?'onclick="'+c+'"':"";var e="";if(f.indexOf("ui-modal-genericButton")>-1){e='<button xmlns="http://www.w3.org/1999/xhtml" tabindex="0" type="button" class="'+f+'" '+d+" "+c+'><div class="ui-button-left"><div class="ui-button-right"><div class="ui-button-center"><span class="vi-screenreader-line ">. '+b+"</span></div></div></div></button>"}else{e='<button xmlns="http://www.w3.org/1999/xhtml" tabindex="0" type="button" class="ui-button '+f+'" '+d+" "+c+'><div class="ui-button-left"><div class="ui-button-right"><div class="ui-button-center"><span class="vi-screenreader-line ">. '+b+"</span></div></div></div></button>"}return e};absa.showPleaseWait=function(d){var c=document.getElementById("pleasewait"),b=document.getElementById("pleasewait-viewport"),e=document.getElementById("pleasewait-label");c.style.display="";e.innerHTML=arguments.length?d:"";absa.showPleaseWait.timeout=setTimeout(function(){c.style.height=document.body.clientHeight+"px";c.style.width=document.body.clientWidth+"px";b.style.height=("innerHeight" in window?window.innerHeight:document.documentElement.clientHeight)+"px";b.style.width=("innerWidth" in window?window.innerWidth:document.documentElement.clientWidth)+"px";b.style.top=document.documentElement.scrollTop+"px";b.style.left=document.documentElement.scrollLeft+"px";absa.showPleaseWait.timeout=setTimeout(arguments.callee,20)},0)};absa.hidePleaseWait=function(){var b=document.getElementById("pleasewait");b.style.display="none";if(absa.showPleaseWait.timeout){absa.showPleaseWait.timeout=clearTimeout(absa.showPleaseWait.timeout)}};absa.util=absa.util||{};absa.util.copyAttributes=function(b,d){for(var c=0;c<b.attributes.length;c++){if(b.attributes[c]&&b.attributes[c].nodeValue&&b.attributes[c].specified){if(bb.browser.ie&&bb.browser.version<=6&&b.attributes[c].nodeName=="class"){d.className=b.attributes[c].nodeValue}else{d.setAttribute(b.attributes[c].nodeName,b.attributes[c].nodeValue)}}}};absa.util.getOffset=function(b){if(b){rect=b.getBoundingClientRect();return{left:rect.left+window.scrollX,top:rect.top+window.scrollY}}};absa.util.attributeToFunction=function(g,j,d){var b=g.getAttribute(j);var h=null;if(b){var c=(d||[]).concat(b);try{h=Function.apply(window,c)}catch(f){bb.command.trace(null,"Error in "+j+" attribute: "+f.message||f)}}return h};absa.util.escapeJavaScriptHandler=function(b){return b.replace(/'/g,"\\'").replace(/"/g,"&#34")};absa.util.formatCurrency=function(f){f=f.toString().replace(/\$|\,/g,"");var e=parseFloat(f);var c=(e==(e=Math.abs(e)));e=Math.floor(e*100+0.50000000001);var g=e%100;var b=g.toString();e=Math.floor(e/100).toString();if(g<10){b="0"+b}for(var d=0;d<Math.floor((e.length-(1+d))/3);d++){e=e.substring(0,e.length-(4*d+3))+","+e.substring(e.length-(4*d+3))}return(((c)?"":"-")+"R "+e+"."+b)};absa.util.validateKeyPressEnter=function(d,b){if(d){var c;if(d.keyIdentifier){c=d.keyIdentifier.toLowerCase()}else{if(window.event){c=d.keyCode}else{if(d.which){c=d.which}}}if(c=="13"||c=="32"||c=="enter"||c=="u+0020"){b();bb.html.handlePreventDefault(d)}}};absa.util.validateKeyPressEnterNotSpace=function(d,b){if(d){var c;if(d.keyIdentifier){c=d.keyIdentifier.toLowerCase()}else{if(window.event){c=d.keyCode}else{if(d.which){c=d.which}}}if(c=="13"||c=="enter"){b();bb.html.handlePreventDefault(d)}}};absa.util.validateKeyPressTab=function(d,b){if(d){var c;if(d.keyIdentifier){c=d.keyIdentifier.toLowerCase()}else{if(window.event){c=d.keyCode}else{if(d.which){c=d.which}}}if(d.shiftKey==false){if(d.keyCode=="9"||c=="9"||c=="tab"||c=="u+0009"){b();bb.html.handlePreventDefault(d)}}}};absa.util.validateKeyPressShiftTab=function(d,b){if(d){var c;if(d.keyIdentifier){c=d.keyIdentifier.toLowerCase()}else{if(window.event){c=d.keyCode}else{if(d.which){c=d.which}}}if(d.shiftKey==true){if(d.keyCode=="9"||c=="9"||c=="tab"||c=="u+0009"){b();bb.html.handlePreventDefault(d)}}}};absa.util.stripTag=function(c){var b=c.indexOf(">");if(b!=-1){c=c.substring(b+1,c.length);var b=c.lastIndexOf("<");c=c.substring(0,b)}return c};absa.util.seperate=function(d){var c=d.length;var e="";for(var b=0;b<c;b++){e=e+d[b]+" "}return e};absa.util.realBrowserName=function(){var c=absa.BROWSERINFO;var d=absa.BROWSERINFO;var b;var e=c.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(e[1])){b=/\brv[ :]+(\d+)/g.exec(d)||[];return"IE"}if(e[1]==="Chrome"){b=d.match(/\b(OPR|Edge)\/(\d+)/);if(b!=null){return b[1]}}e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"];return e[0]};absa.util.realBrowserVersion=function(){var c=absa.BROWSERINFO;var d=absa.BROWSERINFO;var b;var e=c.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(e[1])){b=/\brv[ :]+(\d+)/g.exec(d)||[];return(b[1]||"")}if(e[1]==="Chrome"){b=d.match(/\b(OPR|Edge)\/(\d+)/);if(b!=null){return b[2]}}e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"];if((b=d.match(/version\/(\d+)/i))!=null){e.splice(1,1,b[1])}return e[1]};absa.util.isMobileDevice=function(){var b=navigator.userAgent;if((b.indexOf("Android")>-1)|(b.indexOf("Mobile")>-1)|(b.indexOf("iPhone")>-1)){return true}else{return false}};absa.util.isSupportedOS=function(){var b=navigator.userAgent;if((b.indexOf("Win16")>-1)|(b.indexOf("Windows 95")>-1)|(b.indexOf("Win95")>-1)|(b.indexOf("Windows_95")>-1)|(b.indexOf("Windows 98")>-1)|(b.indexOf("Win98")>-1)|(b.indexOf("Windows NT 5.0")>-1)|(b.indexOf("Windows 2000")>-1)|(b.indexOf("Windows NT 5.1")>-1)|(b.indexOf("Windows XP")>-1)|(b.indexOf("Windows NT 5.2")>-1)|(b.indexOf("Windows NT 6.0")>-1)|(b.indexOf("Windows NT 6.1")>-1)){return false}else{return true}};absa.modal=absa.modal||{};absa.modal.loadModal=function(f,o,e,n,l,h,j){var o=o||"";var h=h||"";var k=absa.locale["Common/General/Label/Processing"];if(l=="en"){var d=absa.locale["Common/General/Label/Print~en"];var b=absa.locale["Common/General/Label/Close~en"]}else{var d=absa.locale["Common/General/Label/Print"];var b=absa.locale["Common/General/Label/Close"]}var g=[];if(h!=""&&isNaN(h)==false){g[g.length]='<div class="ui-modal" style="width:'+h+'px;">'}else{g[g.length]='<div class="ui-modal ui-modal-standard">'}if(j==null){j=false}g[g.length]='<div class="ui-modalHeader">';g[g.length]='<div class="ui-modalHeader-title" tabindex="0">'+o+"</div>";g[g.length]='<div class="ui-modalHeader-icons">';g[g.length]='<button tooltip="'+d+'" type="button" class="ui-modal-printButton" onclick="absa.print.printPopupGeneric(this)" anchorpoint="mouse" offsetx="0" offsety="10">';g[g.length]='<div class="ui-button-left">';g[g.length]='<div class="ui-button-right">';g[g.length]='<div class="ui-button-center">';g[g.length]='<span class="vi-screenreader-line">'+d+"</span>";g[g.length]="</div>";g[g.length]="</div>";g[g.length]="</div>";g[g.length]="</button>";if(j==false){g[g.length]='<button tooltip="'+b+'" type="button" class="ui-modal-closeButton" onclick="phe.modal.onCloseModalButtonClick(this)" anchorpoint="mouse" offsetx="0" offsety="10">';g[g.length]='<div class="ui-button-left">';g[g.length]='<div class="ui-button-right">';g[g.length]='<div class="ui-button-center">';g[g.length]='<span class="vi-screenreader-line">'+b+"</span>";g[g.length]="</div>";g[g.length]="</div>";g[g.length]="</div>";g[g.length]="</button>"}g[g.length]="</div>";g[g.length]="</div>";g[g.length]='<div class="ui-modalBody"></div>';g[g.length]="</div>";var m=bb.html.createElementFromString(g.join(""));m._onClose=n;var c=bb.selector.query(m,".ui-modalBody");c.setAttribute("proxyurl",f);phe.modal.showModal("0.2",m,document.body,false);absa.lazyLoadNode(c,true,function(){if(typeof e==="function"){e.call(this,m)}phe.modal.updatePosition();if(c){c.focus()}});return m};absa.modal.addModalHeaderButton=function(f,d,m,j){var c=".ui-modalHeader";var k=bb.selector.query(f,c);if(k){var l="ui-modalHeader-icons";var b=bb.selector.query(k,"."+l);if(!b){b=document.createElement("div");b.className=l;k.appendChild(b)}var h=absa.locale[j]||j||"";var e=absa.createButtonHTMLString("ui-modal-genericButton "+d,h,h);var g=bb.html.createElementFromString(e);if(b.firstChild){b.insertBefore(g,b.firstChild)}else{b.appendChild(g)}if(m){bb.html.addEventListener(g,"click",function(){m.call(this,this)})}}};function triggerModal4Body(b){phe.modal.showModal(0.5,bb.selector.query(document.body,b),null,true)}absa.history=absa.history||{};absa.history.add=function(c){function b(){c=c.toLowerCase();bb.history.add(c)}if(absa.unconfirmedChanges){return absa.unconfirmedChanges.cancelNavigation(document.body,b)}else{return b()}};absa.form=absa.form||{};absa.form.attachHandlers=function(o,m){if(!m){m=absa.form.handlers}var h=bb.selector.queryAll(o,".ui-form");if(h.length){for(var k=0;k<h.length;k++){bb.html.addEventListener(h[k],"submit",function(c){if(c.stopPropagation){c.stopPropagation()}if(c.preventDefault){c.preventDefault()}if(bb.browser.ie){c.returnValue=false}if(this.getAttribute("formtype")!="nosubmit"){absa.form.validateAndSubmit(this)}return false});bb.html.addEventListener(h[k],"reset",function(c){var q=c.target||c.srcElement;absa.form.cleanValidate(q);if(q&&q._trackUnconfirmedChanges){q._changed=false}});absa.form.attachFormFieldHandlers(h[k],m)}}else{var p=bb.selector.queryAncestor(o,".ui-form");if(p){var f=bb.selector.queryAll(o,"input, select, button, textarea");if(f){absa.form.attachFormFieldHandlers(p,m,f)}}}var e=bb.selector.query(o,".ui-form-field[bbf_autofocus=true]");if(e&&e.offsetHeight>0){e.focus();e.focus()}var g=bb.selector.query(o,".ap-SVM-form");if(g){var j=phe.form.getAttribute(g,"data-timeStart");var d=phe.form.getAttribute(g,"data-timeRemaining");if(Number(d)==Number(j)){var b=phe.form.getAttribute(g,"data-isUnAuth");var l={};l.form=g;if(b=="true"){l.isUnAuth=true}gadgets.pubsub.publish("SVM-form-loaded",l)}}var n=bb.selector.query(o,".ap-simSwopHold-form");if(n){gadgets.pubsub.publish("simSwopHold-form-loaded",n)}};absa.form.disableEnableFormButtons=function(f,b){var e=b=="disable"?true:false;for(var g=0;g<f.elements.length;g++){var d=f.elements[g];if(d.tagName.toLowerCase()=="button"||d.getAttribute("type")=="submit"||d.getAttribute("type")=="reset"||d.getAttribute("type")=="button"){if(e){phe.button.disableButton(d)}else{phe.button.enableButton(d)}}}};absa.form.validateAndSubmit=function(d){if(bb.browser.ie){phe.helpText.hideHelptext()}absa.form.disableEnableFormButtons(d,"disable");var b=absa.form.validate(d);if(b){var e=absa.util.attributeToFunction(d,"oncallback",["response"]);var c=absa.util.attributeToFunction(d,"onbeforesubmit");absa.form.submit(d,e,c)}else{absa.form.disableEnableFormButtons(d,"enable")}};absa.form.attachFormFieldHandlers=function(q,r,u){var h=q.getAttribute("formtype");if(q.getAttribute("trackUnconfirmedChanges")==="true"){q._trackUnconfirmedChanges=true}else{q._trackUnconfirmedChanges=false}var t=(h!=null)?((absa[h]!=null)?absa[h]["handlers"]:null):null;var g=(t!=null)?((t.blur!=null)?t.blur:r.blur):r.blur;var j=(t!=null)?((t.change!=null)?t.change:r.change):r.change;var m=(t!=null)?((t.focus!=null)?t.focus:r.focus):r.focus;var d=(t!=null)?((t.mouseover!=null)?t.mouseover:r.mouseover):r.mouseover;var f=(t!=null)?((t.mouseout!=null)?t.mouseout:r.mouseout):r.mouseout;var l=u||q.elements||[];var p=bb.selector.queryAll(q,".ap-icon-info");if(p[0]){for(var o=0;o<p.length;o++){bb.html.addEventListener(p[o],"mouseover",function(b){if(bb.browser.ie){b.currentView=b.srcElement}else{b.currentView=b.currentTarget}absa.showMeHow.showHelpText(b.currentView)});bb.html.addEventListener(p[o],"mouseout",function(b){phe.helpText.hideHelptext()})}}for(var k=0;k<l.length;k++){var n=l[k];var e=n.tagName.toLowerCase();if((e=="input"&&(n.getAttribute("type")!="submit"))||e=="select"||e=="textarea"){bb.html.addEventListener(n,"blur",function(b){if(bb.browser.ie){b.currentView=b.srcElement}else{b.currentView=b.currentTarget}g(b.currentView)});bb.html.addEventListener(n,"change",function(b){if(bb.browser.ie){b.currentView=b.srcElement}else{b.currentView=b.currentTarget}j(b.currentView)});bb.html.addEventListener(n,"focus",function(b){if(bb.browser.ie){b.currentView=b.srcElement}else{b.currentView=b.currentTarget}m(b.currentView)});bb.html.addEventListener(n,"mouseover",function(b){if(bb.browser.ie){b.currentView=b.srcElement}else{b.currentView=b.currentTarget}d(b.currentView)});bb.html.addEventListener(n,"mouseout",function(b){if(bb.browser.ie){b.currentView=b.srcElement}else{b.currentView=b.currentTarget}f(b.currentView)})}}};absa.form.handlers=absa.form.handlers||{};absa.form.handlers.blur=function(b){b.isFocus=false;if(!b.name){return}var c=absa.form.validate.checkElement(b);phe.helpText.hideHelptext()};absa.form.handlers.change=function(d){if(!d.name){return}if(d.form&&d.form._trackUnconfirmedChanges&&d.getAttribute("trackUnconfirmedChanges")!="false"){d.form._changed=true}var e=absa.form.validate.checkElement(d);if(e){phe.helpText.hideHelptext()}var c=bb.selector.queryAncestor(d,".ap-container")||bb.selector.queryAncestor(d,".ui-modal-content");if(c){var b=bb.selector.query(c,".p-gadget-header");if(d.offsetHeight>0&&d.offsetWidth>0){if(b!=null){bb.html.addEventListener(b,"click",function(){if(d.form){d.form._changed=false}})}}else{if(b){bb.html.removeEventListener(b,"click",function(){return})}}}};absa.form.handlers.focus=function(b){var d=bb.selector.queryAncestor(b,".ui-tableBodyRowExpandableExtension")||bb.selector.queryAncestor(b,".p-gadget-content")||bb.selector.queryAncestor(b,".ui-modal-content")||bb.selector.queryAncestor(b,".ap-container")||bb.selector.queryAncestor(b,".ap-container-content");if(d&&bb.selector.match(d,".ui-showMeHow")){absa.showMeHow.showHelpText(b)}else{if(bb.selector.match(b,".ui-incorrect-value")){phe.helpText.showHelptext(b);absa.vi.setState(b,"aria-invalid","true");var c=". "+absa.locale["Common/General/Label/ErrorMessage"];c+=" "+b.getAttribute("helpText");if(bb.browser.ie){c+=". "+absa.locale["Common/General/Label/Invalid"]}absa.vi.applyInputLabel(b,c,absa.vi.getLabelObject(b))}else{phe.helpText.hideHelptext();absa.vi.setState(b,"aria-invalid","false");absa.vi.setInputLabel(b)}}b.isFocus=true};absa.form.handlers.mouseover=function(b){var c=bb.selector.queryAncestor(b,".ui-tableBodyRowExpandableExtension")||bb.selector.queryAncestor(b,".p-gadget-content")||bb.selector.queryAncestor(b,".ap-container-content")||bb.selector.queryAncestor(b,".ui-modal-content");if(c&&bb.selector.match(c,".ui-showMeHow")){absa.showMeHow.showHelpText(b)}else{if(bb.selector.match(b,".ui-incorrect-value")){phe.helpText.showHelptext(b)}}};absa.form.handlers.mouseout=function(b){var c=bb.selector.queryAncestor(b,".p-gadget-content")||bb.selector.queryAncestor(b,".ap-container-content")||bb.selector.queryAncestor(b,".ui-modal-content");if(bb.selector.match(b,".ui-incorrect-value")&&(!b.isFocus)||c&&bb.selector.match(c,".ui-showMeHow")){phe.helpText.hideHelptext()}};absa.form.submit=function(n,g,h){if(h){h.call(n)}absa.form.hideValidationErrors(n);var j=String(n.getAttribute("method")).toUpperCase();var d=String(n.getAttribute("action"));var l="";var p=bb.selector.queryAll(n,".ap-table-stickyRow");if(p.length>0){var e=document.createElement("form");var f=document.createElement("table");var m=document.createElement("tbody");for(var c=0;c<p.length;c++){var o=p[c].cloneNode(true);m.appendChild(o)}f.appendChild(m);e.appendChild(f);l=absa.form.buildQueryString(e.elements)}else{l=absa.form.buildQueryString(n.elements)}if(j=="POST"){if(!n){return}bb.html.addClass(n,"p-include-loading");var k={};k[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;k[gadgets.io.RequestParameters.POST_DATA]=l;phe.loadingMessage.showLoadingMessage(n,absa.locale["Common/General/Label/Processing"]+"...");var b=n.style.position;n.style.position="relative";phe.form.displayIOErrorMessage(n,false);absa.io.makeRequest(d,function(u){absa.form.disableEnableFormButtons(n,"enable");n.style.position=b;bb.html.removeClass(n,"p-include-loading");phe.loadingMessage.hideLoadingMessage(n);if(!u.errors.length){if(g){g.apply(n,arguments)}else{var v=bb.html.createElementFromString(u.text);var x=bb.selector.query(v,".validationErrors");if(x){absa.form.showValidationErrors(n,x)}else{n.parentNode.replaceChild(v,n);absa.initializeNewContent(v);var q=bb.selector.queryAncestor(v,".p-gadget-content");if(q==null){q=bb.selector.queryAncestor(v,".ui-tabBody-selected")}if(q==null){q=bb.selector.queryAncestor(v,".ap-container-content")}if(q!=null){var r=bb.selector.query(q,".ui-wizard");if(r==null){var w=bb.selector.queryAll(v,".ui-slider");if(w){if(w.length){for(var t=0;t<w.length;t++){phe.slider.initializeBehavior(w[t])}}}}}}}}else{phe.form.displayIOErrorMessage(n,true,u.status,u.errors)}},k)}else{bb.history.add(d+(d.indexOf("?")==-1?"?":"&")+l)}return false};absa.form.validate=function(n){var f=true;var d=0;for(var l=0;l<n.elements.length;l++){var m=n.elements[l];if(!m.disabled&&m.name&&m.getAttribute("type")!="hidden"&&(m.offsetHeight>0&&m.offsetWidth>0)){var e=m.tagName.toLowerCase();if(e=="input"||e=="select"||e=="textarea"||e=="checkbox"){var b;if(e=="select"){b="select"}else{if(e=="textarea"){b="textarea"}else{b=(m.getAttribute("type")!=null)?m.getAttribute("type").toLowerCase():"text"}}if((b=="checkbox")||(b=="text")||(b=="tel")||(b=="email")||(b=="number")||(b=="password")||(b=="select")||(b=="textarea")||(b=="input")){var j;if(bb.html.hasClass(m,"ui-fileUpload--value")){var k=bb.selector.queryAncestor(m,".ui-fileUpload"),h=bb.selector.query(k,".ui-fileUpload--input");if(bb.html.hasClass(m,"ui-fileUpload_working")){d++;f=false;j=phe.inputReadOnlyText.getAttribute(h,"data-fileUploadValidationText");h.setAttribute("helptext",j);bb.html.addClass(h,"ui-incorrect-value")}else{h.setAttribute("helptext",phe.inputReadOnlyText.getAttribute(h,"requiredText"));if(!absa.form.validate.checkElement(m)){d++;f=false;bb.html.addClass(h,"ui-incorrect-value")}else{bb.html.removeClass(h,"ui-incorrect-value")}}}else{if(!absa.form.validate.checkElement(m)){d++;f=false;if(d==1){m.focus()}}}}}}}var g=absa.util.attributeToFunction(n,"customValidation");if(g){if(!g.call(n)){f=false}}absa.form.validate.toggleErrorMessage(n,f);return f};absa.form.cleanValidate=function(e){for(var g=0;g<e.elements.length;g++){var d=e.elements[g];if(!d.disabled){var b=d.tagName.toLowerCase();if(b=="input"||b=="select"||b=="textarea"){var f;if(b=="select"){f="select"}else{if(b=="textarea"){f="textarea"}else{f=(d.getAttribute("type")!=null)?d.getAttribute("type").toLowerCase():"text"}}if((d.name)&&((f=="checkbox")||(f=="text")||(f=="password")||(f=="select")||(f=="textarea"))){absa.form.validate.toggleErrorMessage(d,true)}}}}absa.form.validate.toggleErrorMessage(e,true)};absa.form.validate.REQUIRED_VALIDATION_ERROR=1;absa.form.validate.SCHEMA_TYPE_VALIDATION_ERROR=2;absa.form.validate.DATE_PICKER_VALIDATION_ERROR=3;absa.form.validate.CUSTOM_VALIDATION_ERROR=4;absa.form.validate.FILE_NOT_UPLOADED_VALIDATION_ERROR=5;absa.form.validate.DATE_PICKER2_VALIDATION_ERROR=6;absa.form.validate.checkElement=function(g,f,l,o){var k=bb.selector.query(g,"input");if(k){g=k}var c=true;var n=g.getAttribute("bbf_required")=="true";var m=(f?f.join("-"):g.value);var b=(f?l:bb.string.trim(m)=="");var p=g.getAttribute("bbf_type");var j=0;if(g.getAttribute("type")&&g.getAttribute("type").toLowerCase()=="checkbox"){b=!g.checked}if((absa.VI=="true")&&g.getAttribute("type")&&g.getAttribute("type").toLowerCase()=="text"){var e=k.value;k.value=bb.string.trim(e)}if(n){c=!b;if(!c){j=absa.form.validate.REQUIRED_VALIDATION_ERROR}}if(c&&p&&!b){p=p.split(":")[1]||p;var h=bb.schema.getType("http://ws.online.absa.co.za/common/simpleTypes/",p);if(h){c=c&&bb.schema.validateSimpleType(m,h,null);if(!c){j=absa.form.validate.SCHEMA_TYPE_VALIDATION_ERROR}}}if(c&&bb.html.hasClass(g,"ui-datePicker--input")){c=c&&phe.datePicker.validateDate(g);if(!c){j=absa.form.validate.DATE_PICKER_VALIDATION_ERROR}}if(c&&bb.html.hasClass(g,"ui-datePicker2--input")){c=c&&phe.datePicker2.validateDate(g);if(!c){j=absa.form.validate.DATE_PICKER2_VALIDATION_ERROR}}var d=absa.util.attributeToFunction(g,"customValidation");if(c&&d){c=c&&d.call(g);if(!c){j=absa.form.validate.CUSTOM_VALIDATION_ERROR}}if(!o){absa.form.validate.toggleErrorMessage(g,c,j)}return c};absa.form.validate.toggleErrorMessage=function(f,e,g){var j=f.form||f;var d="";if(!bb.selector.match(f,".ui-form")){if(e){bb.html.removeClass(f,"ui-incorrect-value");f.removeAttribute("helpText");if(bb.browser.ie&&(bb.browser.version<8)&&(f.tagName.toLowerCase()=="select")){f.parentNode.style.border=""}}else{bb.html.addClass(f,"ui-incorrect-value");switch(g){case absa.form.validate.REQUIRED_VALIDATION_ERROR:d=f.getAttribute("requiredText");break;case absa.form.validate.SCHEMA_TYPE_VALIDATION_ERROR:d=f.getAttribute("schemaTypeText");break;case absa.form.validate.DATE_PICKER_VALIDATION_ERROR:d=f.getAttribute("datePickerErrorMsg");break;case absa.form.validate.DATE_PICKER2_VALIDATION_ERROR:d=f.getAttribute("datePicker2ErrorMsg");break;case absa.form.validate.CUSTOM_VALIDATION_ERROR:d=f.getAttribute("customValidationText");break;default:d=g}f.setAttribute("helptext",d)}}else{if(e){bb.html.removeClass(f,"ui-form-incorrect-values")}else{bb.html.addClass(f,"ui-form-incorrect-values")}}var b=f.getAttribute("validate-as");if(b){for(var h=bb.selector.queryAll(j,".absa-for-"+b),k=0;k<h.length;k++){if(h[k]){h[k].style.display=(e?"none":"block")}}}};absa.form.buildQueryString=function(h){var f=[];for(var e=0,b=h.length;e<b;e++){var d=h[e];if(!d.disabled&&d.name){switch(d.tagName.toLowerCase()){case"input":switch(d.type){case"radio":case"checkbox":if(d.checked){f.push(d.name+"="+encodeURIComponent(d.value))}break;default:var k=d.value;f.push(d.name+"="+encodeURIComponent(k))}break;case"select":if(d.multiple){for(var c=0;c<d.options.length;c++){var g=d.options[c];if(g.selected){if(bb.browser.ie&&(!g.attributes.value||!g.attributes.value.specified)){f.push(d.name+"="+encodeURIComponent(g.innerText))}else{f.push(d.name+"="+encodeURIComponent(g.value))}}}}else{if(d.selectedIndex!=-1){var g=d.options[d.selectedIndex];if(bb.browser.ie&&(!g.attributes.value||!g.attributes.value.specified)){f.push(d.name+"="+encodeURIComponent(g.innerText))}else{f.push(d.name+"="+encodeURIComponent(g.value))}}}break;case"textarea":f.push(d.name+"="+encodeURIComponent(d.value));break;case"button":if(d.type=="submit"&&document.activeElement==d){f.push(d.name+"="+encodeURIComponent((d.innerText||d.textContent)))}break}}}return f.join("&")};absa.form.isFormChanged=function(d){var b=bb.selector.queryAll(d,'.ui-form[trackUnconfirmedChanges="true"]');for(var c=0;c<b.length;c++){var e=b[c];if(e._changed&&e.offsetHeight>0&&e.offsetWidth>0){return true}}return false};absa.form.hideValidationErrors=function(b){var c=bb.selector.query(b,".validation-place-holder");if(c){c.innerHTML=""}};absa.form.showValidationErrors=function(l,d){var h=bb.selector.query(l,".validation-place-holder");var f=bb.selector.queryAll(d,".validationError");var b=bb.selector.query(d,".validationMessages");if(f.length>0){for(var e=0;e<f.length;e++){var k=f[e].getAttribute("field");var c=k.indexOf("[");var m=f[e].getAttribute("key");var g=bb.selector.query(l,'*[name="'+k+'"]');if(g==null){g=bb.selector.query(l,'*[ac="'+k+'"]')}if(c>=0){g=bb.selector.query(l,"."+k.substring(0,c)+"_"+k.substring(c,k.indexOf("]")));if(g==null){g=bb.selector.query(l,'*[ac="'+k.substring(0,c)+"_"+k.substring(c,k.indexOf("]"))+'"]')}}if(k!=""&&g&&g.type!="hidden"){absa.form.validate.toggleErrorMessage(g,false,m);g.focus();var j=bb.selector.queryAncestor(g,".ui-form");phe.form.displayErrorMessage(j,true)}else{if(h&&b!=null){h.innerHTML=b.innerHTML}}}}else{if(b){if(h){h.innerHTML=b.innerHTML}}}};absa.form.wizardBridge=absa.form.wizardBridge||{};absa.form.wizardBridge.handleResponseIIP=function(e,f,g,c){var b=/ui-form--TVNForm/.test(f.text);if(b){var d=bb.selector.queryAncestor(e,".ap-paySingle");if(d==null){d=bb.selector.queryAncestor(e,".ap-payMultiple-root")}phe.loadingMessage.hideLoadingMessage(d)}absa.form.wizardBridge.handleResponse(e,f,g,c)};absa.form.wizardBridge.handleResponse=function(v,p,q,k,y){var g=false;var x=bb.selector.queryAncestor(v,".ui-wizard");var m=bb.selector.query(x,".ui-wizard-body-wrapper");var r=bb.selector.query(m,".ap-registration-inRegProcess");if(r){g=true}var j=!/class=["']+validationErrors["']+/.test(p.text);if(j){var x=bb.selector.queryAncestor(v,".ui-wizard");var c;if(y!=true){c=phe.wizard.getNextStepBody(x)}else{c=phe.wizard.getCurrentStepBody(x)}phe.wizard.setShowMeHow(c);phe.wizard.setCallMeButton(c);phe.wizard.setAdvisorButton(c);var h=bb.selector.query(x,".ui-wizard--showMeHow");absa.showMeHow.switchOff(h);if(c){c.innerHTML=p.text;absa.initializeNewContent(c)}if(y!=true){phe.wizard.selectStep(c)}var l=bb.selector.queryAll(c,".ui-slider");if(l){if(l.length){for(var A=0;A<l.length;A++){phe.slider.initializeBehavior(l[A])}}}var B=bb.selector.query(c,".ap-TVM-form");if(B){var r=bb.selector.query(m,".ap-registration-inRegProcess");if(r){absa.n2fa.updateFormStatusSVM(B,false,false,true)}else{gadgets.pubsub.publish("TVM-form-loaded",B)}var n=bb.selector.query(c,".ui-form--TVNForm-code");if(n&&n.offsetHeight>0){if(bb.browser.ie){setTimeout(function(){n.focus()},10)}else{n.focus()}}}var w=/ui-form--TVNForm/.test(p.text);if(g&&w){var o=bb.selector.query(c,".ui-form--TVNForm");phe.common.setAttribute(o,"action","webservice/AccessControlWebService/validateTransactionVerificationCode?registration=true&sId="+absa.apps.unAuthSessionID)}var z=bb.selector.queryAll(x,".ui-wizard-body");var D=z[z.length-1];var G=bb.selector.query(c,"form");if(!(bb.html.hasClass(D,"ui-wizard-body-selected"))&&v._changed&&G){G._changed=true}if(q){try{if(c!=null){q.call(c,c)}else{q.call(v,v)}}catch(C){bb.command.trace(null,"Error when calling success method:"+C.message||C)}}if(absa.VI=="true"){if((bb.html.hasClass(D,"ui-wizard-body-selected"))){var b=bb.selector.query(c,".validation-place-holder");var F=bb.selector.query(b,".ui-message");if(F){F.focus()}}}}else{var E=bb.html.createElementFromString(p.text);var f=bb.selector.query(E,".validationErrors");var x=bb.selector.queryAncestor(v,".ui-wizard");var u=bb.selector.queryAll(x,".ui-wizard-head");var t=phe.wizard.getAttribute(x,"validationKickBackStep");if(t&&t=="-1"){phe.wizard.selectStepRelative(x.firstChild,parseInt("0"))}else{if(t){phe.wizard.selectStepAbsolute(x,parseInt(t))}else{if(u.length>2){if((u.length-3)>(phe.wizard.getCurrentStepIndex(x)+1)){phe.wizard.selectStepAbsolute(x,phe.wizard.getCurrentStepIndex(x))}else{phe.wizard.selectStepAbsolute(x,u.length-3)}}else{phe.wizard.selectStepAbsolute(x,0)}}}var d=bb.selector.query(x,".ui-wizard-body-selected");absa.form.showValidationErrors(d,f);try{if(k){k.call(v,v)}}catch(C){bb.command.trace(null,"Error when calling error method:"+C.message||C)}}};absa.form.wizardBridge.openRVNForm=function(e,f,h,b){var d=bb.selector.queryAncestor(e,".ui-wizard");var g=e.parentNode;g.style.display="none";var c=bb.html.createElementFromString(f.text);g.parentNode.appendChild(c);absa.form.attachHandlers(c)};absa.form.wizardBridge.cancelRVNForm=function(d){var f=bb.selector.queryAncestor(d,"form");if(f){f.reset();if(f._trackUnconfirmedChanges){f._changed=false}}var b=bb.selector.queryAncestor(d,".ui-modal");if(b){phe.modal.hideModal()}else{var e=bb.selector.queryAncestor(d,".p-gadget");var c=bb.getControllerFromView(e);if(c){c.minimize();e.focus()}}};absa.form.wizardBridge.resendRVNForm=function(h,j,b){var g=absa.CONTEXT+"/proxy?pipe=genericWebservice&ws=AccessControlWebService&action=resendTransactionVerification&referenceNumber="+encodeURIComponent(j)+"&go&sId="+b;var c=bb.selector.queryAncestor(h,".ui-form--RVNForm");var f=bb.selector.query(c,".ui-formFoot");var e=bb.selector.query(f,".RVNCodeError");if(e){try{f.removeChild(e)}catch(d){}}phe.loadingMessage.showLoadingMessage(c);absa.io.makeRequest(g,function(o){phe.loadingMessage.hideLoadingMessage(c);if(!o.errors.length){var r=bb.html.createElementFromString(o.text);var m=bb.selector.query(r,".ui-message-error");if(m){f.insertBefore(r,f.firstChild)}else{var l=bb.selector.query(c,".ui-textBox");c.reset();var p=bb.selector.query(c,".ap-sendRVN-timestamp");if(p){p.innerHTML=r.getAttribute("data-timeStamp")||r.getAttribute("data-timestamp")}}phe.form.displayIOErrorMessage(c,false);var n=phe.common.getAttribute(r,"data-errorKey");if((n!=null)&&(n.toLowerCase().indexOf("resendsexceed")>-1)){var q=bb.selector.query(c,".ap-button-extra");phe.common.hide(q);var k=bb.selector.query(c,".ap-button-next");phe.common.hide(k)}}else{phe.form.displayIOErrorMessage(c,true)}})};absa.form.wizardBridge.handleRVN=function(m,f,g,h,j){var n=!/RVNCodeError/.test(f.text);if(n){var c;if(j){c=bb.selector.queryAncestor(m,".ap-forceLoadNode")}var o=bb.selector.queryAncestor(m,"[proxyurl]");var e=bb.selector.queryAncestor(m,".ui-tabBody");var b=bb.selector.queryAncestor(m,".ui-tableBodyRowExpandableExtension");var l=bb.selector.queryAncestor(m,".ui-modalBody[proxyurl]");var d=bb.selector.queryAncestor(m,".ap-gadget-lazyContent");if(c){absa.lazyLoadNode(c,true)}else{if(b&&b.getAttribute("dataFileView")){var k=bb.selector.queryAncestor(m,".ui-form");if(k==null){k=bb.selector.query(m,".ui-form")}if(k!=null){phe.form.setAttribute(k,"trackUnconfirmedChanges","false");k._trackUnconfirmedChanges=false;k._changed=false}phe.tableBodyRow.expandRow(b.previousSibling,phe.tableBodyRowExpandableExtention.getAttribute(b,"dataFileView"),false)}else{if(o){absa.lazyLoadNode(o,true)}else{if(e){phe.tabBody.reload(e)}else{if(l){absa.lazyLoadNode(l,true)}else{if(d){absa.lazyLoadNode(d,true)}}}}}}}else{absa.form.wizardBridge.updateDisplayForErrorsFound(m,f)}};absa.form.wizardBridge.cancelTVNForm=function(c){var b=bb.selector.queryAncestor(c,".ui-wizard");phe.wizard.selectStepAbsolute(b,0);absa.form.wizardBridge.removeTVNStep(c)};absa.form.wizardBridge.resendTVNForm=function(g,c){var j=bb.selector.queryAncestor(g,".ui-form--TVNForm");var d=bb.selector.query(j,".ap-sendTVN-referenceNumber");var h=phe.hiddenField.getValue(d);var f=bb.selector.query(j,".ui-formFoot");var b=bb.selector.query(f,".TVNCodeError");var e=absa.CONTEXT+"/proxy?pipe=genericWebservice&ws=AccessControlWebService&action=resendTransactionVerification&referenceNumber="+encodeURIComponent(h);if(c=="registerForAOLStep2"){e="webservice/AccessControlWebService/resendTransactionVerification?registration=true&referenceNumber="+encodeURIComponent(h)+"&sId="+absa.apps.unAuthSessionID}if(b){f.removeChild(b)}phe.loadingMessage.showLoadingMessage(j);absa.io.makeRequest(e,function(o){phe.loadingMessage.hideLoadingMessage(j);if(!o.errors.length){var r=bb.html.createElementFromString(o.text);var m=bb.selector.query(r,".ui-message-error");if(m){f.insertBefore(r,f.firstChild)}else{var l=bb.selector.query(j,".ui-textBox");j.reset();var p=bb.selector.query(j,".ap-sendTVN-timestamp");if(p){p.innerHTML=r.getAttribute("data-timeStamp")||r.getAttribute("data-timestamp")}}phe.form.displayIOErrorMessage(j,false);var n=phe.common.getAttribute(r,"data-errorKey");if((n!=null)&&(n.toLowerCase().indexOf("resendsexceed")>-1)){var q=bb.selector.query(j,".ap-button-extra");phe.common.hide(q);var k=bb.selector.query(j,".ap-button-next");phe.common.hide(k)}}else{phe.form.displayIOErrorMessage(j,true)}})};absa.form.wizardBridge.handleOTP=function(n,l,m,g,q){if(typeof m=="undefined"){m=null}if(typeof g=="undefined"){g=null}if(typeof q=="undefined"){q=false}var f=!/SureCheck2CodeError/.test(l.text);if(f){var t;if(q){t=bb.selector.queryAncestor(n,".ap-forceLoadNode")}var k=bb.selector.queryAncestor(n,"[proxyurl]");var b=bb.selector.queryAncestor(n,".ui-tabBody");var u=bb.selector.queryAncestor(n,".ui-tableBodyRowExpandableExtension");var r=bb.selector.queryAncestor(n,".ui-modalBody[proxyurl]");var j=bb.selector.queryAncestor(n,".ap-gadget-lazyContent");var e=bb.selector.queryAncestor(n,".ap-container-content-USSD-login");var d=n.getAttribute("data-mimic");if(d==null){d="RVN"}if(d=="TVN"){var o=bb.selector.queryAncestor(n,".ui-wizard");if(o){var h=bb.selector.query(o,".ui-wizard-body-selected");if(h){var c=h.previousSibling;if(c){var p=bb.selector.query(c,"form");if(p){phe.wizard.selectStep(c);bb.html.fireEvent(p,"submit",true,true)}}}}}else{if(t){absa.lazyLoadNode(t,true)}else{if(u&&u.getAttribute("dataFileView")){var p=bb.selector.queryAncestor(n,".ui-form");if(p==null){p=bb.selector.query(n,".ui-form")}if(p!=null){phe.form.setAttribute(p,"trackUnconfirmedChanges","false");p._trackUnconfirmedChanges=false;p._changed=false}phe.tableBodyRow.expandRow(u.previousSibling,phe.tableBodyRowExpandableExtention.getAttribute(u,"dataFileView"),false)}else{if(k){absa.lazyLoadNode(k,true)}else{if(b){phe.tabBody.reload(b)}else{if(r){absa.lazyLoadNode(r,true)}else{if(j){absa.lazyLoadNode(j,true)}else{if(e){doLoadNewPasswordAfterUSSD()}}}}}}}}}else{absa.form.wizardBridge.updateDisplayForErrorsFound(n,l)}};absa.form.wizardBridge.handleTVN=function(l,c,e,f){if(typeof e=="undefined"){e=null}if(typeof f=="undefined"){f=null}var m=!/TVNCodeError/.test(c.text);if(m&&c.status=="200"){var b=bb.selector.queryAncestor(l,".ui-wizard");if(b){var j=bb.selector.query(b,".ui-wizard-body-selected");if(j){var g=j.previousSibling;if(g){var h=bb.selector.query(g,"form");var k=bb.selector.query(l,"input[name=referenceNumber]");if(h){if(k){var d=k.cloneNode(true);h.appendChild(d)}phe.wizard.selectStep(g);bb.html.fireEvent(h,"submit",true,true)}}}}}else{absa.form.wizardBridge.updateDisplayForErrorsFound(l,c)}};absa.form.wizardBridge.updateDisplayForErrorsFound=function(m,b){var g=bb.html.createElementFromString(b.text);var e=bb.selector.query(m,".SureCheck2CodeError");var l=bb.selector.query(m,".ap-button-next");var j=bb.selector.query(m,".ap-button-extra");var k=bb.selector.query(m,".ui-formFoot");var h=bb.selector.query(m,".ui-formFoot-backup");var c=(k)?k:h;phe.form.displayIOErrorMessage(m,false);var d=phe.common.getAttribute(g,"data-errorCode");if(d==null){d="-"}var f=phe.common.getAttribute(g,"data-errorKey");if(f==null){f="-"}if(d.toLowerCase().indexOf("otp")>-1&f.toLowerCase().indexOf("retriesexceed")>-1){if(l){phe.common.hide(l)}}else{if(((d.toLowerCase().indexOf("rvn")>-1)|(d.toLowerCase().indexOf("tvn")>-1))&f.toLowerCase().indexOf("retriesexceed")>-1){if(j){phe.common.hide(j)}if(l){phe.common.hide(l)}}}if(e!=null){c.removeChild(e)}c.insertBefore(g,c.firstChild)};absa.form.wizardBridge.removeTVNStep=function(e){var c=bb.selector.queryAncestor(e,".ui-wizard");if(c){var b=bb.selector.query(c,".ui-wizard-body--TVN");var d=bb.selector.query(c,".ui-wizard-head--TVN");if(d){d.parentNode.removeChild(d)}if(b){b.parentNode.removeChild(b)}}};absa.showMeHow=absa.showMeHow||{};absa.showMeHow.toggle=function(c,d,b){if(absa.showMeHow.isShowMeHowOn(c)){absa.showMeHow.switchOff(c)}else{absa.showMeHow.switchOn(c,d,b)}};absa.showMeHow.isShowMeHowOn=function(b){var c=bb.selector.queryAncestor(b,".ui-tableBodyRowExpandableExtension");if(!c){c=bb.selector.queryAncestor(b,".p-gadget-content");if(!c){c=bb.selector.queryAncestor(b,".ap-container-content");if(!c){c=bb.selector.queryAncestor(b,".ui-modal-content")}}}if(c){if(bb.html.hasClass(c,"ui-showMeHow")){return true}else{return false}}};absa.showMeHow.switchOff=function(d){var e=bb.selector.queryAncestor(d,".ui-tableBodyRowExpandableExtension");if(!e){e=bb.selector.queryAncestor(d,".p-gadget-content");if(!e){e=bb.selector.queryAncestor(d,".ap-container-content");if(!e){e=bb.selector.queryAncestor(d,".ui-modal-content")}}}var b=phe.button.getAttribute(d,"data-showMeHowActive");if(b!=""){phe.button.setAttribute(d,"tooltip",b)}else{phe.button.setAttribute(d,"tooltip",absa.locale["Common/General/Label/ShowMeHowActivate"])}bb.html.replaceClass(d,"ap-icon-help-active","ap-icon-help");var c=phe.button.getAttribute(d,"showMeHow");if(c){phe.button.setAttribute(d,"tooltip",c)}bb.html.removeClass(d,"ui-showMeHow--icon");if(e){bb.html.removeClass(e,"ui-showMeHow")}};absa.showMeHow.switchOn=function(h,j,d){var k=bb.selector.queryAncestor(h,".ui-tableBodyRowExpandableExtension");var c=bb.selector.queryAncestor(h,".ui-wizard");if(!k){k=bb.selector.queryAncestor(h,".p-gadget-content");if(!k){k=bb.selector.queryAncestor(h,".ap-container-content");if(!k){k=bb.selector.queryAncestor(h,".ui-modal-content")}}}if(!c){bb.html.addClass(h,"ui-showMeHow--icon")}if((c&&!bb.html.hasClass(c,"ui-wizard--showMeHow_disabled"))||bb.html.hasClass(h,"ui-showMeHow--icon")){bb.html.replaceClass(h,"ap-icon-help","ap-icon-help-active");var e=phe.button.getAttribute(h,"data-showMeHowInactive");if(e!=""){phe.button.setAttribute(h,"tooltip",e)}else{phe.button.setAttribute(h,"tooltip",absa.locale["Common/General/Label/ShowMeHowDeactivate"])}}if(k){if(c&&bb.html.hasClass(c,"ui-wizard--showMeHow_disabled")){return false}bb.html.addClass(k,"ui-showMeHow");if(d&&j){var b=bb.selector.queryAncestor(h,d);if(b){var f=bb.selector.queryAll(b,".ui-form-field");for(var g=0;g<f.length;g++){if(!f[g].disabled&&f[g].offsetHeight>0&&f[g].offsetWidth>0){f[g].focus();break}}}}}};absa.showMeHow.showHelpText=function(c){var b=c.getAttribute("showMeHow");if(b){if(bb.html.hasClass(c,"ap-icon-info")){phe.helpText.showHelptext(c,"<span class='ap-helpText-showMeHow-black'> "+b+"</span>")}else{phe.helpText.showHelptext(c,"<span class='ap-helpText-showMeHow'> "+b+"</span>")}}};absa.showMeHow.toggleLogin=function(c,e,b){var d=bb.selector.query(document.body,b);if(d){if(bb.html.hasClass(d,"ui-showMeHow")){absa.showMeHow.switchOffLogin(c,d)}else{absa.showMeHow.switchOnLogin(d,c,e,b)}}};absa.showMeHow.switchOnLogin=function(e,d,g,c){if(!e){bb.html.addClass(d,"ui-showMeHow--icon")}if(e){bb.html.addClass(e,"ui-showMeHow");if(c&&g){var f=bb.selector.queryAll(e,"select, input, textarea");for(var b=0;b<f.length;b++){if(bb.html.hasClass(f[b],"ap-showMeHow-focus")&&!f[b].disabled&&!(f[b].getAttribute("type")=="hidden")&&f[b].offsetHeight>0&&f[b].offsetWidth>0){f[b].focus();break}}}}};absa.showMeHow.switchOffLogin=function(c,d){phe.button.setAttribute(c,"tooltip",absa.locale["Common/General/Label/ShowMeHowActivate"]);var b=phe.button.getAttribute(c,"showMeHow");if(b){phe.button.setAttribute(c,"tooltip",b)}bb.html.removeClass(c,"ui-showMeHow--icon");if(d){bb.html.removeClass(d,"ui-showMeHow")}};absa.wizard=absa.wizard||{};absa.wizard.backButton=function(d,b,c){b=b||window.event;if(b){bb.html.handlePreventDefault(b)}phe.wizard.selectStepRelative(d,parseInt("-1"));if(c){try{c.call(d,d)}catch(f){bb.command.trace(null,"Error when calling method:"+f.message||f)}}};absa.wizard.finishButton=function(c){var e=bb.selector.queryAncestor(c,"form");if(e){e.reset();if(e._trackUnconfirmedChanges){e._changed=false}}var d=bb.selector.queryAncestor(c,".p-gadget");var b=bb.getControllerFromView(d);if(b){b.minimize();d.focus()}};absa.gadgetHeaderIcons={dispatchEvents:function(d){var c=d.currentView;var b=bb.string.trim(c.className.replace(/ui-button ap-|-inactivated/ig,""));switch(b){case"icon-configure":this.configureGadget(d,c,b);break;case"icon-arrowRight":case"icon-remove":case"icon-removeHistory":case"icon-3060":case"icon-removeStopPayments":case"icon-unsubscribeGadget":case"icon-logOn":break;default:this.switchTab(d,c,b)}},switchTab:function(e,d,c){var b=e.target;if(b.getProperty("minimized")){b.restore()}b.setPreference("selectedTab",c);var f=bb.selector.query(b.viewGate,".ap-option2Tab-"+c);if(f&&!b._dragging){phe.tabBox.selectTab(f)}},configureGadget:function(e,d,c){if(absa.gadgetHeaderIcons.selected==0){absa.gadgetHeaderIcons.selected=1;e=e||window.event;var b=e.target;this.oOldTitleObj=bb.selector.query(b.headerRef,".p-gadget-title");bb.selector.query(this.oOldTitleObj,".ap-bar-section-Accounts").style.display="none";bb.selector.query(this.oOldTitleObj.parentNode,".p-gadget-subTitle").style.display="none";this.oldTitle=bb.selector.query(b.headerRef,".p-gadget-title-view").innerHTML;var f="";f+='<div style="position:absolute;top:8px">';f+='<input class="ui-form-field newAccountName" maxlength="15" style="width:95px; font-weight:normal; vertical-align:middle;" bbf_required="true" bbf_type="simple:accountName" name="newAccountName" value="'+this.oldTitle+'" onmouseover="this.focus()" onmouseup="absa.apps.changeAccountName.onAccountNameTextBoxMouseUp(this)" onmousemove="bb.html.handlePreventDefaultAndStop(event)" onblur="if(!absa.form.validate.checkElement(this)){phe.helpText.showHelptext(this);}else{phe.helpText.hideHelptext();}" bbf_type="simple:accountName" bbf_required="true" messageref=".errorMessage" type="text"';f+=' requiredText="'+absa.locale["Common/General/Label/Required"]+'" ';f+=' schemaTypeText="'+absa.locale["Common/General/Validation/ChangeAccountName"]+'" />';f+='<button type="submit" onclick="absa.gadgetHeaderIcons.displayGadgetHeading(this,true)" class="ap-button" style="color:rgb(0,118,0); margin-left:2px; vertical-align:middle; border:none; background-color:transparent;cursor:pointer">';f+='<div class="ap-button-left">';f+='<div class="ap-button-right">';f+='<div class="ap-button-center" style=" font-size:xx-small;">'+absa.locale["Common/General/Button/Save"]+"</div>";f+="</div></div></button>";f+='<button type="button" onclick="absa.gadgetHeaderIcons.cancelGadgetHeadingChange(this)" class="ap-button" style="color:rgb(237,27,47); margin-left:2px; vertical-align:middle; border:none; background-color:transparent;cursor:pointer">';f+='<div class="ap-button-left">';f+='<div class="ap-button-right">';f+='<div class="ap-button-center" style=" font-size:xx-small;">'+absa.locale["Common/General/Button/Cancel"]+"</div>";f+="</div></div></button>";f+="</div>";f+=this.oOldTitleObj.innerHTML;b.setTitle(f);bb.selector.query(b.headerRef,".p-gadget-title .newAccountName").focus();bb.html.enableUserSelect(b.headerRef)}},oldTitle:undefined,selected:0,cancelGadgetHeadingChange:function(c){var b=bb.getControllerFromView(c.parentNode);this.setGadgetNewName(b,absa.gadgetHeaderIcons.oldTitle)},displayGadgetHeading:function(k,e){var n=bb.selector.query(k.parentNode,".newAccountName");var d=n.value;var h=bb.selector.query(k.parentNode,".newAccountName");var f=bb.getControllerFromView(k.parentNode);var m=bb.selector.query(k.parentNode,".errorMessage");var l=bb.selector.queryAncestor(k,".p-gadget-title-container");var c=bb.selector.query(l,".p-gadget-subTitle");if(e==false){d=this.oldTitle}if(d!=this.oldTitle){var b=absa.form.validate.checkElement(n);if(b){n.style.border="";var g={};g[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;var j=c.innerHTML;g[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues({accountName:d,accountId:j});absa.io.makeRequest("proxy?pipe=genericWebservice&ws=ProfileWebService&action=setAccountName",function(u){if(u.status=="200"){var v=bb.html.createElementFromString(u.text);var r=d;var q=bb.selector.queryAll(v,".ui-message-error");var t=bb.selector.query(v,".ui-message-help");var o=bb.selector.query(v,".ui-message-warning");if(q[2]||t||o){r=absa.gadgetHeaderIcons.oldTitle;phe.modal.showModal(0.5,v,document.body,false)}else{absa.gadgetHeaderIcons.setGadgetNewName(f,r)}}else{if(u.errors.length){var p=bb.selector.query(document.body,".ap-HTTP500Template div").cloneNode(true);phe.modal.showModal(0.5,p,document.body)}}},g)}else{phe.helpText.showHelptext(n);n.focus()}}else{this.setGadgetNewName(f,absa.gadgetHeaderIcons.oldTitle)}},setGadgetNewName:function(b,c){bb.selector.query(this.oOldTitleObj,".p-gadget-title-view").innerHTML=c;bb.selector.query(this.oOldTitleObj,".ap-bar-section-Accounts").style.display="block";bb.selector.query(this.oOldTitleObj.parentNode,".p-gadget-subTitle").style.display="block";this.oOldTitleObj.removeChild(this.oOldTitleObj.firstChild);var d=this.oOldTitleObj.innerHTML;b.setTitle(d);this.showGadgetIcons(b);absa.gadgetHeaderIcons.selected=0;bb.html.disableUserSelect(b.headerRef)},showGadgetIcons:function(b){var c=bb.selector.query(b.headerRef,".ap-bar-section-icons-options");c.style.display="block"}};absa.gadgets.positionRefresh=function(d){var m=bb.document.getElementById("portal");if(m!=null){var e=m.getProperty("containers");var l=e[0];if(l!=null){var k=l.getProperty("gadgets");if(k!=null){if(k.length>0){for(var f=0;f<k.length;f++){if(k[f]!=null){var b=k[f]._._id;for(var c=0;c<d.length;c++){if(b==d[c].gadgetId){var h=d[b];h={col:"0",pos:d[c].position};m.moveGadget(k[f],l,h);break}}}}}}}}};absa.gadgets.collapseGadgets=function(){var e=bb.document.getElementById("portal").getProperty("gadgets");for(var d=0;d<e.length;d++){var b=e[d];var c=b.getProperty("container");if(b.getSetting("minimizable","boolean")){b.minimize()}}};absa.gadgets.addGadgetHeaderTooltip=function(c,b){if(c.headerTooltip){return}if(b&&b.length>0){c.headerTooltip=b}if(typeof(c.headerRef)=="undefined"){c.headerRef=bb.selector.query(c.viewNode,".p-gadget-header")}c.headerRef.setAttribute("anchorpoint","topleft");c.headerRef.setAttribute("offsetx","30");c.headerRef.setAttribute("offsety","-20")};absa.gadgets.doChangeAccountNameClick=function(b){var d=bb.selector.queryAncestor(b,".p-gadget-header");var c=bb.selector.query(d,".ap-icon-configure");bb.html.fireEvent(c,"click",true,false)};absa.gadgets.addGadgetHeaderButton=function(e,d,m,k){var c=".p-gadget-header";if(e._window&&bb.html.hasClass(e._window.viewNode,"ap-dashboard-dummy")){c=".p-gadget-content "+c}var j;if(e._window){j=bb.selector.query(e._window.viewNode,c)}else{j=bb.selector.query(e.viewNode,c)}if(j){var l="ap-gadget-button-container";var b=bb.selector.query(j,"."+l);if(!b){b=document.createElement("div");b.className=l;j.appendChild(b)}var h=absa.locale[k]||k||"";var f=absa.createButtonHTMLString(d,h,h);var g=bb.html.createElementFromString(f);b.appendChild(g);if(m){bb.html.addEventListener(g,"click",function(){m.call(this,this)})}}};absa.gadgets.loadLazyContent=function(c,b,e){var d=bb.selector.query(c.body,".ap-gadget-lazyContent");absa.lazyLoadNode(d,b,e)};absa.gadgets.setSubtitle=function(b,c){var d=bb.selector.query(b.body.parentNode,".p-gadget-subTitle");if(d){d.innerHTML=c}};function absaGadgetTemplate(){if(!arguments.callee.oCloneCache){var d=portal._currentPortal;var c='<div class="ap-titlebar p-gadget-top-left p-gadget-header"><div role="button" tabindex="0" class="p-gadget-button p-gadget-button-restore ap-bar-section ap-icon-bar-status"><span class="vi-screenreader-line "></span></div><div role="button" tabindex="0" class="p-gadget-button p-gadget-button-minimize ap-bar-section ap-icon-bar-status"><span class="vi-screenreader-line "></span></div><div class="p-gadget-title-container"><div tabindex="0" class="p-gadget-title ap-bar-section ap-bar-title"></div><div class="p-gadget-subTitle"></div></div><div class="p-gadget-draggable-section"><button class="p-gadget-draggable-button"></button></div></div>';var f='<div tabindex="-1" role="application" class="p-gadget-content"></div>';var e='<div class="p-gadget '+this.loadingClass[0]+'"><div class="ap-container">'+c+f+"</div></div>";arguments.callee.oCloneCache=bb.html.createElementFromString(e)}this._._showLoadingCount=1;var b=arguments.callee.oCloneCache.cloneNode(true);b.colSpan=0;return[b,bb.selector.query(b,".p-gadget-content")]}(function(){var b=portal.gadget.Gadget.prototype.setTitle;portal.gadget.Gadget.prototype.setTitle=function(h){var g;if(h in absa.locale){g=absa.locale[h]}else{g=h}b.call(this,g);var e=bb.selector.query(this._window.viewNode,".p-gadget-header .p-gadget-button-restore");var c=bb.selector.query(this._window.viewNode,".p-gadget-header .p-gadget-button-minimize");absa.vi.setElementLabel(e,absa.locale["Common/General/Label/ShowSection"]+" "+g);absa.vi.setElementLabel(c,absa.locale["Common/General/Label/HideSection"]+" "+g);if(bb.html.hasClass(this._window.viewNode,"ap-accountBalances")){var d=bb.selector.query(e,".vi-screenreader-line");var f=d.textContent||d.innerText;absa.vi.setElementLabel(e,f);d=bb.selector.query(c,".vi-screenreader-line");var f=d.textContent||d.innerText;absa.vi.setElementLabel(c,f)}}})();absa.vi=absa.vi||{};absa.vi.setElementLabel=function(b,c){var d=bb.selector.query(b,".vi-screenreader-line");if(d){d.innerHTML=absa.vi.formatForDataType(b,c)}};absa.vi.getElementLabel=function(b){var c=bb.selector.query(b,".vi-screenreader-line");if(c){return c.innerHTML}return""};absa.vi.formatForDataType=function(c,d){if(bb.html.hasClass(c,"dataType-numberAsText")){var b=d.replace(/(\d)/g,"$1 ");if(b!=""){d=b}}return d};absa.vi.setDefaultLabels=function(k,b,j,d){if(bb.browser.ie&&bb.browser.version<=8){var h=bb.selector.queryAll(k,b);var e=j||"";var g=d||"";for(var f=0,c=h.length;f<c;f++){absa.vi.setElementLabel(h[f],"&nbsp;"+e+" "+(f+1)+" of "+c+" "+g+" ")}}};absa.vi.getLabelObject=function(b){var c=bb.selector.queryAncestor(b,".ui-form")||bb.selector.queryAncestor(b,".ui-modal-content")||bb.selector.queryAncestor(b,".ap-keypad-inputs");if(b.getAttribute("id")){return bb.selector.query(c,"*[for="+b.getAttribute("id")+"]")}};absa.vi.setInputLabel=function(e){var o=bb.selector.query(window.document,".vi-activeElement");if(o){o.removeAttribute("accesskey");bb.html.removeClass(o,"vi-activeElement")}bb.html.addClass(e,"vi-activeElement");if(e.getAttribute("type")=="hidden"){return false}var d="";var l=e.getAttribute("viLabel");var j=e.getAttribute("id");var h=absa.vi.getLabelObject(e);var m=e.value;var b=e.getAttribute("showMeHow");if(l){d=l+". "}if(bb.browser.ie){if(e.getAttribute("type")=="radio"){var n=bb.selector.queryAncestor(e,".ui-radioItem");if(n){var k=bb.selector.queryAncestor(e,".ui-radioGroup").children;if(k!=null){if(k.length>0){for(var f=0;f<k.length;f++){if(n==k[f]){break}}d=d+". "+String(f+1)+" "+absa.locale["Common/General/Label/Of"]+" "+k.length}}}}}if(bb.html.hasClass(e,"dataType-numberAsText")&&m!=""&&m[0]!==0){if(e.tagName.toLowerCase()=="select"){m=e.options[e.selectedIndex].text}else{m=e.value}d=d+". "+m.replace(/(\d)/g,"$1 ")+" ."}else{if(bb.html.hasClass(e,"dataType-textAsEmail")&&m!=""){var g=m.replace(/\./g," . dot . ");g=g.replace(/\@/g," . at . ");d+=g+". "}else{if(bb.html.hasClass(e,"dataType-numberAsDate")&&m!=""){var c=m.split("-");if(c.length==3){var g=". "+absa.locale["Common/General/Label/Year"]+". "+c[0]+". ";g+=absa.locale["Common/General/Label/Month"]+". "+c[1]+". ";g+=absa.locale["Common/General/Label/Day"]+". "+c[2]+". ";d+=g}}}}if(b){d+=". "+b}absa.vi.applyInputLabel(e,d,h)};absa.vi.applyInputLabel=function(b,g,h){if(b.getAttribute("bbf_required")=="true"){absa.vi.setState(b,"aria-required","true");if(bb.browser.ie){g+=". "+absa.locale["Common/General/Label/Required"]+". "}}if(g==null){g="-"}if(h){var e=bb.selector.query(h,".vi-screenreader-line");if(e){try{e.innerHTML=g}catch(d){}return true}else{var f='<span class="vi-screenreader-line">'+g+"</span>";h.appendChild(bb.html.createElementFromString(f))}}else{if(g!=""){if(!b.getAttribute("id")){b.setAttribute("id","id-"+parseInt(Math.random()*10000))}var c='<label class="vi-hidden" for="'+b.getAttribute("id")+'"><span class="vi-screenreader-line">'+g+"</span></label>";h=bb.html.createElementFromString(c);b.parentNode.insertBefore(h,b)}}if(h!=null){if(!h.getAttribute("id")){h.setAttribute("id","id-"+parseInt(Math.random()*10000))}b.setAttribute("aria-labelledby",h.getAttribute("id"))}};absa.vi.setState=function(b,c,d){b.setAttribute(c,d)};absa.vi.tableHeader=absa.vi.tableHeader||{};absa.vi.tableHeader.changeSortOrderLabel=function(g){var k=bb.selector.queryAncestor(g,".ui-table");var b=bb.selector.query(g,".vi-table-head-item-suffix");var h=b.innerHTML;var e="";var c=absa.locale["Common/General/Label/Descending"];var d=absa.locale["Common/General/Label/Ascending"];var j=absa.locale["Common/General/Label/None"];if(bb.html.hasClass(g,"sorted-DESC")){e=c}else{if(bb.html.hasClass(g,"sorted-ASC")){e=d}else{e=j}}var f=new RegExp(c+"|"+d+"|"+j,"i");h=h.replace(f,e);b.innerHTML=h};absa.vi.toggleAriaLabels=function(d,b){var c=d.getAttribute("viLabel");if(c){var e=c.split(" ");e.pop();e.push(d.getAttribute(b));d.setAttribute("viLabel",e.join(" "))}};absa.vi.activeElementNavigation=function(){var b=bb.selector.query(window.document,".vi-activeElement");if(b){b.focus()}else{var c=bb.selector.query(window.document,".vi-activeContent");if(c){c.focus()}}};absa.vi.addActiveContentDiv=function(d){var e=d.firstChild;var c=bb.html.createElementFromString("<div class='vi-activeContent vi-screenreader-line'><a name='section1' href='section1' accesskey='q' class='vi-screenreader-line'>You are now in the active container. Keep pressing tab until you reach the desired field or button. You may have been directed here because your focus may have been lost, or there is no active element available in this active container. You can get back to the active container by using access key q</a></div>");var b=bb.selector.query(e,".vi-activeContent");if(b){b.parentNode.removeChild(b)}e.insertBefore(c,e.firstChild)};absa.vi.isEnterButtonPressed=function(d,b,f,c){if(d.keyCode=="13"||(d.keyCode=="32")){if(!f){b()}else{if(!c){b(f)}else{b(f,c)}}}else{}};absa.vi.showSiteMap=function(){oSiteMap=bb.selector.query(window.document,".ap-vi-siteMap");oSiteMapToggle=bb.selector.query(window.document,".ap-vi-siteMapToggle");if(bb.html.hasClass(oSiteMap,"ap-common-hide")){bb.html.removeClass(oSiteMap,"ap-common-hide");oSiteMapToggle.innerHTML="Site map toggle. Press enter to hide site map, or tab to enter the site map. Access key 1 will always get you here.";var b=bb.selector.query(oSiteMap,".ap-vi-siteMapEntryPoint");b.focus()}else{bb.html.addClass(oSiteMap,"ap-common-hide");oSiteMapToggle.innerHTML="Site map toggle. Press enter to show site map. Access key 1 will always get you here.";oSiteMapToggle.blur();oSiteMapToggle.focus()}};absa.print=absa.print||{};absa.print.printFullPageGeneric=function(f){var e=bb.selector.query(document.body,".ap-container-highlevel");var h=document.createElement("div");h.innerHTML=e.innerHTML;var g=bb.selector.queryAll(h,"input");if(g.length>0){for(var c=0;c<g.length;c++){g[c].setAttribute("readonly","true");g[c].setAttribute("printMe","true")}}var d=h.innerHTML;popWin=window.open("about:blank","print","toolbar=yes,top=0,left=0,width=1000,height=600,scrollbars=yes");popWin.document.open();popWin.document.write("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>");popWin.document.write("<html>");popWin.document.write("<head>");if(bb.browser.ie&bb.browser.version==8){popWin.document.write("<meta http-equiv='X-UA-Compatible' content='IE=EmulateIE7'>")}popWin.document.write("<title>Print</title>");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/absa.css?v=777' />");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/index.css' />");popWin.document.write("<style type='text/css'>");var b=bb.selector.queryAll(window.document,"style");if(b.length>0){for(var c=0;c<b.length;c++){popWin.document.write(b[c].innerHTML)}}popWin.document.write(" html { background-color:#FFFFFF; color:#000000 !important; } ");popWin.document.write(" table { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ui-form-field { background:transparent; } ");popWin.document.write(" .ap-button { display:none; } ");popWin.document.write(" .ap-col-content { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-page-content{ border-width:0px; padding:0px 13px; color:#000000 !important; } ");popWin.document.write(" @media print { .ui-modal{ display:none; } .ui-modal-content{ display:none; }} ");popWin.document.write(" .ui-modalHeader-icons { display:none; }");popWin.document.write(" .ap-icon-help { display:none !important; }");popWin.document.write(" .ap-icon-print { display:none !important; }");popWin.document.write(" .ap-icon-callMe { display:none !important; }");if(bb.browser.ie&bb.browser.version==8){popWin.document.write(" .ap-viewTransactionHistory-rowFilter { display:none !important; }")}popWin.document.write(" @page { margin:0in; color:#000000 !important; } ");popWin.document.write("</style>");popWin.document.write("</head>");popWin.document.write("<body class='ssr-enabled' id='ap-page-body' onload='setTimeout(\"window.print()\",\"2000\")'>");popWin.document.write("<div class='ap-page-container' id='ap-page-container-div' style='z-index:1;'>");popWin.document.write("  <div class='ap-main-content-wrapper'>");popWin.document.write("    <div class='ap-main-content-wrapper-top'></div>");popWin.document.write("    <div class='ap-page-content ap-container'>");popWin.document.write("      <div class='ap-container-highlevel' style='border-bottom:1px solid #CFCFCF;'>");popWin.document.write(d);popWin.document.write("      </div>");popWin.document.write("    </div>");popWin.document.write("  </div>");popWin.document.write("</div>");popWin.document.write("<div class='ap-print-transparent_class'></div>");popWin.document.write("</body>");popWin.document.write("</html>");popWin.document.close()};absa.print.printFullPageGenericAccountList=function(t){var p=bb.selector.query(document.body,".ap-accounts-container");var e=[];var d=[];var m=[];var f=[];var A=[];var C=document.createElement("div");C.innerHTML=p.innerHTML;var n=bb.selector.query(C,".p-portal");var y=bb.selector.queryAll(n,".ap-accountBalances");if(y.length>0){for(var B=0;B<y.length;B++){var z=bb.selector.query(y[B],".p-gadget-title-view");if(z!=null){e.push(z.innerHTML)}else{e.push("-")}var v=bb.selector.query(y[B],".p-gadget-subTitle");if(v!=null){if(isNaN(v.innerHTML)){d.push(0)}else{d.push(Number(v.innerHTML))}}else{d.push(0)}var o=bb.selector.query(y[B],".uncleared-field");var l=bb.selector.query(y[B],".available-field");var k=bb.selector.query(y[B],".balance-field");if(o!=null){var c=bb.selector.query(o,".ap-balances-account-values");if(c!=null){var j=c.innerHTML;j=j.replace(/,/g,"");j=j.replace(/- /g,"-");m.push(Number(j).toFixed(2))}else{m.push(Number("0").toFixed(2))}}else{m.push(Number("0").toFixed(2))}if(l!=null){var r=bb.selector.query(l,".ap-balances-account-values");if(r!=null){var h=r.innerHTML;h=h.replace(/,/g,"");h=h.replace(/- /g,"-");f.push(Number(h).toFixed(2))}else{f.push(Number("0").toFixed(2))}}else{f.push(Number("0").toFixed(2))}if(k!=null){var w=bb.selector.query(k,".ap-balances-account-values");if(w!=null){var g=w.innerHTML;g=g.replace(/,/g,"");g=g.replace(/- /g,"-");A.push(Number(g).toFixed(2))}else{A.push(Number("0").toFixed(2))}}else{A.push(Number("0").toFixed(2))}}}var u="";u=u+"<table id='daTbl' border='1' cellpadding='2' cellspacing='2' width='100%'>";u=u+"<tr><th><span class='fakeLink' onclick='sortTable(\"data-name\")'>Name</span></th><th><span class='fakeLink' onclick='sortTable(\"data-accnum\")'>Acc. Number</span></th><th><span class='fakeLink' onclick='sortTable(\"data-val1\")'>Uncleared</span></th><th><span class='fakeLink' onclick='sortTable(\"data-val2\")'>Available</span></th><th><span class='fakeLink' onclick='sortTable(\"data-val3\")'>Balance</span></th><th>Notes</th></tr>";for(var q=0;q<e.length;q++){u=u+"<tr><td data-name='"+e[q]+"' data-accnum='"+d[q]+"' data-val1='"+m[q]+"' data-val2='"+f[q]+"' data-val3='"+A[q]+"'>"+e[q]+"</td><td>"+d[q]+"</td><td class='r'>"+m[q]+"</td><td class='r'>"+f[q]+"</td><td class='r'>"+A[q]+"</td><td></td></tr>"}u=u+"</table>";popWin=window.open("about:blank","print","toolbar=yes,top=0,left=0,width=1000,height=600,scrollbars=yes");popWin.document.open();popWin.document.write("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>");popWin.document.write("<html>");popWin.document.write("<head>");if(bb.browser.ie&bb.browser.version==8){popWin.document.write("<meta http-equiv='X-UA-Compatible' content='IE=EmulateIE7'>")}popWin.document.write("<title>Print</title>");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/absa.css?v=777' />");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/index.css' />");popWin.document.write("<style type='text/css'>");var b=bb.selector.queryAll(window.document,"style");if(b.length>0){for(var B=0;B<b.length;B++){popWin.document.write(b[B].innerHTML)}}popWin.document.write(" html { background-color:#FFFFFF; color:#000000 !important; } ");popWin.document.write(" table { font-size:11px; color:#000000 !important; border-bottom:1px solid black;} ");popWin.document.write(" th { font-size:11px; background-color:#F3F3F3 !important; color:#000000 !important; font-weight:bold; padding:2px; } ");popWin.document.write(" td { border-top:1px solid black; padding:2px; } ");popWin.document.write(" .r { text-align:right !important; } ");popWin.document.write(" .fakeLink { cursor:pointer; } ");popWin.document.write(" .ui-form-field { background:transparent; } ");popWin.document.write(" .ap-button { display:none; } ");popWin.document.write(" .ap-col-content { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-page-content{ border-width:0px; padding:0px 13px; color:#000000 !important; } ");popWin.document.write(" @media print { .ui-modal{ display:none; } .ui-modal-content{ display:none; }} ");popWin.document.write(" .ui-modalHeader-icons { display:none; }");popWin.document.write(" .ap-icon-help { display:none !important; }");popWin.document.write(" .ap-icon-print { display:none !important; }");popWin.document.write(" .ap-icon-callMe { display:none !important; }");if(bb.browser.ie&bb.browser.version==8){popWin.document.write(" .ap-viewTransactionHistory-rowFilter { display:none !important; }")}popWin.document.write(" @page { margin:0in; color:#000000 !important; } ");popWin.document.write("</style>");popWin.document.write("<script language='javascript'>");popWin.document.write("var oldDaAttr = '';															");popWin.document.write("function sortTable(daAttr) {													");popWin.document.write("		var table, rows, switching, i, x, y, shouldSwitch;						");popWin.document.write("		table = document.getElementById('daTbl');								");popWin.document.write("		switching = true;														");popWin.document.write("		while (switching) {														");popWin.document.write("			switching = false;													");popWin.document.write("			rows = table.getElementsByTagName('TR');							");popWin.document.write("			for (i = 1; i < (rows.length - 1); i++) {							");popWin.document.write("				shouldSwitch = false;											");popWin.document.write("				x = rows[i].getElementsByTagName('TD')[0];						");popWin.document.write("				y = rows[i + 1].getElementsByTagName('TD')[0];					");popWin.document.write("				if (oldDaAttr != daAttr) {										");popWin.document.write("					if (daAttr == 'data-accnum' | daAttr == 'data-val1' | daAttr == 'data-val2' | daAttr == 'data-val3') {	");popWin.document.write("						if (Number(x.getAttribute(daAttr)) > Number(y.getAttribute(daAttr))) {	");popWin.document.write("							shouldSwitch = true;									");popWin.document.write("							break;													");popWin.document.write("						}															");popWin.document.write("					} else {													");popWin.document.write("						if (x.getAttribute(daAttr).toLowerCase() > y.getAttribute(daAttr).toLowerCase()) {	");popWin.document.write("							shouldSwitch = true;									");popWin.document.write("							break;													");popWin.document.write("						}															");popWin.document.write("					}															");popWin.document.write("				} else {														");popWin.document.write("					if (daAttr == 'data-accnum' | daAttr == 'data-val1' | daAttr == 'data-val2' | daAttr == 'data-val3') {	");popWin.document.write("						if (Number(x.getAttribute(daAttr)) < Number(y.getAttribute(daAttr))) {	");popWin.document.write("							shouldSwitch = true;									");popWin.document.write("							break;													");popWin.document.write("						}															");popWin.document.write("					} else {													");popWin.document.write("						if (x.getAttribute(daAttr).toLowerCase() < y.getAttribute(daAttr).toLowerCase()) {	");popWin.document.write("							shouldSwitch = true;									");popWin.document.write("							break;													");popWin.document.write("						}															");popWin.document.write("					}															");popWin.document.write("				}																");popWin.document.write("			}																	");popWin.document.write("			if (shouldSwitch) {													");popWin.document.write("				rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);			");popWin.document.write("				switching = true;												");popWin.document.write("			}																	");popWin.document.write("		}																		");popWin.document.write("		oldDaAttr = daAttr;														");popWin.document.write("		return;																	");popWin.document.write("	}																			");popWin.document.write("<\/script>");popWin.document.write("</head>");popWin.document.write("<body class='ssr-enabled' id='ap-page-body'>");popWin.document.write("<div class='ap-page-container' id='ap-page-container-div' style='z-index:1;'>");popWin.document.write("  <div class='ap-main-content-wrapper'>");popWin.document.write("    <div class='ap-main-content-wrapper-top'></div>");popWin.document.write("    <div class='ap-page-content ap-container'>");popWin.document.write("      <div class='ap-container-highlevel' style='border-bottom:1px solid #CFCFCF;'>");popWin.document.write("<div style='float:right;'><button onclick='window.print()'>Print</button></div><br/>");popWin.document.write(u);popWin.document.write("      </div>");popWin.document.write("    </div>");popWin.document.write("  </div>");popWin.document.write("</div>");popWin.document.write("</body>");popWin.document.write("</html>");popWin.document.close()};absa.print.printGadgetGeneric=function(g){if(g==null){return}var f=bb.selector.queryAncestor(g,".ap-container-highlevel")||bb.selector.queryAncestor(g,".p-gadget");var d=bb.selector.query(f,".ap-heading-titlebar");var h=bb.selector.queryAncestor(g,".p-gadget");var c=document.createElement("div");c.innerHTML=h.innerHTML;var b=bb.selector.query(c,".p-gadget-content");bb.html.removeClass(b,"p-gadget-content");var e=bb.selector.queryAll(c,"input");if(e.length>0){for(var k=0;k<e.length;k++){e[k].setAttribute("readonly","true");e[k].setAttribute("printMe","true")}}popWin=window.open("about:blank","print","toolbar=yes,top=0,left=0,width=1000,height=600,scrollbars=no");popWin.document.open();popWin.document.write("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>");popWin.document.write("<html>");popWin.document.write("<head>");if(bb.browser.ie&bb.browser.version==8){popWin.document.write("<meta http-equiv='X-UA-Compatible' content='IE=EmulateIE7'>")}popWin.document.write("<title>Print</title>");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/absa.css?v=777' />");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/index.css' />");popWin.document.write("<style type='text/css'>");var j=bb.selector.queryAll(window.document,"style");for(var k=0;k<j.length;k++){popWin.document.write(j[k].innerHTML)}popWin.document.write(" html { background-color: #FFFFFF; color:#000000 !important; } ");popWin.document.write(" table { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ai-button { display:none; } ");popWin.document.write(" .ap-col-content { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-page-content { border-width:0px; padding:0px 13px; color:#000000 !important; } ");popWin.document.write(" @media print {@page {size: landscape} .ui-modal{ display:none; } .ui-modal-content{ display:none; }} ");popWin.document.write(" .ui-wizard-head-wrapper .ui-button { display:block; } ");popWin.document.write(" .ui-modalHeader-icons { display:none; }");popWin.document.write(" .ui-table--scrollContainer { overflow:visible; height:auto !important; }");popWin.document.write(" .ui-wizard-head-wrapper .ui-button { display:inline; color:#000000 !important; } ");popWin.document.write(" .ap-icon-help { display:none !important; }");popWin.document.write(" .ap-icon-print { display:none !important; }");popWin.document.write(" .ap-icon-callMe { display:none !important; }");popWin.document.write(" .ap-onceOffPaymentHistory-fromAccount { display:none; !important; } ");popWin.document.write(" @page { margin:0in; color:#000000 !important; } ");popWin.document.write(" @page { size:landscape; color:#000000 !important; } ");popWin.document.write("</style>");popWin.document.write("</head>");popWin.document.write("<body class='ssr-enabled' id='ap-page-body' onload='setTimeout(\"window.print()\",\"2000\")'>");popWin.document.write("<div class='ap-page-container' id='ap-page-container-div' style='z-index:1;'>");popWin.document.write("  <div class='ap-main-content-wrapper'>");popWin.document.write("    <div class='ap-main-content-wrapper-top'></div>");popWin.document.write("    <div class='ap-page-content ap-container'>");popWin.document.write("      <div class='ap-container-highlevel' style='border-bottom:1px solid #CFCFCF;'>");popWin.document.write("        <div class='ap-titlebar ap-heading-titlebar'>");popWin.document.write(d.innerHTML);popWin.document.write("			</div>");popWin.document.write("        <div id='ap-container-wrapper' class='ap-container-content'>");popWin.document.write(c.innerHTML);popWin.document.write("        </div>");popWin.document.write("      </div>");popWin.document.write("    </div>");popWin.document.write("  </div>");popWin.document.write("</div>");popWin.document.write("<div class='ap-print-transparent_class'></div>");popWin.document.write("</body>");popWin.document.write("</html>");popWin.document.close()};absa.print.printGadgetGenericNettWorth=function(j){if(j==null){return}var b=bb.selector.queryAncestor(j,".ui-modal");var h=bb.selector.queryAncestor(b,"div");var f=bb.selector.query(h,".ui-modalHeader-title");var c=bb.selector.query(document.body,".ap-container-top-show");var e=bb.selector.query(c,".ap-bar-title");if(e!=null&&e!=""){f=e}var k=bb.selector.queryAncestor(j,".ui-modal");var d=document.createElement("div");d.innerHTML=k.innerHTML;var g=bb.selector.queryAll(d,"input");if(g.length>0){for(var m=0;m<g.length;m++){g[m].setAttribute("readonly","true");g[m].setAttribute("printMe","true")}}popWin=window.open("about:blank","print","toolbar=yes,top=0,left=0,width=1000,height=600,scrollbars=no");popWin.document.open();popWin.document.write("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>");popWin.document.write("<html>");popWin.document.write("<head>");if(bb.browser.ie&bb.browser.version==8){popWin.document.write("<meta http-equiv='X-UA-Compatible' content='IE=EmulateIE7'>")}popWin.document.write("<title>Print</title>");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/absa.css?v=777' />");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/index.css' />");popWin.document.write("<style type='text/css'>");var l=bb.selector.queryAll(window.document,"style");for(var m=0;m<l.length;m++){popWin.document.write(l[m].innerHTML)}popWin.document.write("</style>");popWin.document.write("<style type='text/css'>");popWin.document.write(" html { background-color: #FFFFFF; color:#000000 !important; } ");popWin.document.write(" table { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-col-content { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-page-content { border-width:0px; padding:0px 13px; color:#000000 !important; } ");popWin.document.write(" @media print { .ui-modal{ display:none; } .ui-modal-content{ display:none; }} ");popWin.document.write(" .ui-wizard-head-wrapper .ui-button { display:block; color:#000000 !important; } ");popWin.document.write(" .ui-modalHeader { position:relative; color:#000000 !important; }");popWin.document.write(" .ap-container-content { border-top: 1px solid #CFCFCF; color:#000000 !important; } ");popWin.document.write(" .ap-heading-titlebar { display:none; color:#000000 !important; } ");popWin.document.write(" .ap-container-content { padding:0px; margin:0px; width:876px; color:#000000 !important; } ");popWin.document.write(" .ui-table--scrollContainer { overflow:visible; height:auto !important; color:#000000 !important; }");popWin.document.write(" .ap-updateNettworth-modalBody { width:auto !important; color:#000000 !important; }");popWin.document.write(" .ap-updateNettworth-modalScroller { height:auto !important; overflow-y:auto; color:#000000 !important; }");popWin.document.write(" .ap-icon-help { display:none !important; }");popWin.document.write(" .ap-icon-print { display:none !important; }");popWin.document.write(" .ap-icon-callMe { display:none !important; }");popWin.document.write(" @page { margin:0in; color:#000000 !important; } ");popWin.document.write("</style>");popWin.document.write("</head>");popWin.document.write("<body class='ssr-enabled' id='ap-page-body' onload='setTimeout(\"window.print()\",\"2000\")'>");popWin.document.write("<div class='ap-page-container' id='ap-page-container-div' style='z-index:1;'>");popWin.document.write("  <div class='ap-main-content-wrapper'>");popWin.document.write("    <div class='ap-main-content-wrapper-top'></div>");popWin.document.write("    <div class='ap-page-content ap-container'>");popWin.document.write("      <div class='ap-container-highlevel' style='border-bottom:1px solid #CFCFCF;'>");popWin.document.write("        <div class='ap-titlebar ap-heading-titlebar'>");popWin.document.write("				<h2 style='width: 200px;' class='ap-bar-section ap-bar-title'>"+f.innerHTML+"</h2>");popWin.document.write("			</div>");popWin.document.write("        <div id='ap-container-wrapper' class='ap-container-content'>");popWin.document.write(d.innerHTML);popWin.document.write("        </div>");popWin.document.write("      </div>");popWin.document.write("    </div>");popWin.document.write("  </div>");popWin.document.write("</div>");popWin.document.write("<div class='ap-print-transparent_class'><br/></div>");popWin.document.write("</body>");popWin.document.write("</html>");popWin.document.close()};absa.print.printGadgetDashboardGeneric=function(f){var d=bb.selector.queryAncestor(f,".p-gadget");var h=document.createElement("div");h.innerHTML=d.innerHTML;var e=bb.selector.query(h,".p-gadget-content");bb.html.removeClass(e,"p-gadget-content");var g=bb.selector.queryAll(h,"input");if(g.length>0){for(var c=0;c<g.length;c++){g[c].setAttribute("readonly","true");g[c].setAttribute("printMe","true")}}popWin=window.open("about:blank","print","toolbar=yes,top=0,left=0,width=1000,height=600,scrollbars=no");popWin.document.open();popWin.document.write("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>");popWin.document.write("<html>");popWin.document.write("<head>");if(bb.browser.ie&bb.browser.version==8){popWin.document.write("<meta http-equiv='X-UA-Compatible' content='IE=EmulateIE7'>")}popWin.document.write("<title>Print</title>");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/absa.css?v=777' />");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/index.css' />");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/dashboard.css' />");popWin.document.write("<style type='text/css'>");var b=bb.selector.queryAll(window.document,"style");for(var c=0;c<b.length;c++){popWin.document.write(b[c].innerHTML)}popWin.document.write(" html { background-color: #FFFFFF; color:#000000 !important; } ");popWin.document.write(" table { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-col-content { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-page-content { border-width:0px; padding:0px 13px; color:#000000 !important; } ");popWin.document.write(" @media print { .ui-modal{ display:none; } .ui-modal-content{ display:none; }} ");popWin.document.write(" .ap-dashboard-dummy .ap-titlebar .ui-tabHeads {width:880px; color:#000000 !important;} ");popWin.document.write(" .ui-table--scrollContainer { overflow:visible; height:auto !important; color:#000000 !important; }");popWin.document.write(" .ap-dashboard-dummy .p-gadget-header { display:block !important; color:#000000 !important; }");popWin.document.write(" .ap-dashboard-dummy .p-gadget-content { border-bottom: 1px solid #C0C0C0;border-left: 1px solid #C0C0C0;border-right: 1px solid #C0C0C0; color:#000000 !important; }");popWin.document.write(" .ap-page-content { padding:0px 0px !important; color:#000000 !important; } ");popWin.document.write(" .ap-container-content { padding:13px 0px !important; width:944px !important; color:#000000 !important; } ");popWin.document.write(" .ap-icon-help { display:none !important; }");popWin.document.write(" .ap-icon-print { display:none !important; }");popWin.document.write(" .ap-icon-callMe { display:none !important; }");popWin.document.write(" @page { margin:0in; color:#000000 !important; } ");popWin.document.write(" @page { size:landscape; color:#000000 !important; } ");popWin.document.write("</style>");popWin.document.write("<script type='text/javascript'>");popWin.document.write("function initPagePrint(){ ");popWin.document.write("	var oBody = document.getElementById('ap-page-body'); ");popWin.document.write("	setTimeout('window.print()','2000'); ");popWin.document.write("}");popWin.document.write("<\/script>");popWin.document.write("</head>");popWin.document.write("<body class='ssr-enabled' id='ap-page-body' onload='initPagePrint();'>");popWin.document.write("<div class='ap-page-container ap-dashboard-dummy' id='ap-page-container-div' style='z-index:999;'>");popWin.document.write("  <div class='ap-main-content-wrapper'>");popWin.document.write("    <div class='ap-main-content-wrapper-top'></div>");popWin.document.write("    <div class='ap-page-content ap-container'>");popWin.document.write("      <div class='ap-container-highlevel' style='border-bottom:1px solid #CFCFCF;'>");popWin.document.write("        <div class='ap-titlebar ap-heading-titlebar'>");popWin.document.write("        <div id='ap-container-top-l4' class='ap-heading-titlebar-item  ap-container-top-show'>");popWin.document.write("        <h2 id='ap-bar-section-saveInvest' style='width: 200px;' class='ap-bar-section ap-bar-title'>Dashboard</h2>");popWin.document.write("        </div>");popWin.document.write("			</div>");popWin.document.write("        <div id='ap-container-wrapper' class='ap-container-content'>");popWin.document.write(h.innerHTML);popWin.document.write("        </div>");popWin.document.write("      </div>");popWin.document.write("    </div>");popWin.document.write("  </div>");popWin.document.write("</div>");popWin.document.write("<div class='ap-print-transparent_class'></div>");popWin.document.write("</body>");popWin.document.write("</html>");popWin.document.close()};absa.print.printPopupGeneric=function(j){var b=bb.selector.queryAncestor(j,".ui-modal");var h=bb.selector.queryAncestor(b,"div");var f=bb.selector.query(h,".ui-modalHeader-title");var c=bb.selector.query(document.body,".ap-container-top-show");if(c){var e=bb.selector.query(c,".ap-bar-title");if(e!=null&&e!=""){f=e}}var k=bb.selector.queryAncestor(j,".ui-modal");var d=document.createElement("div");d.innerHTML=k.innerHTML;var g=bb.selector.queryAll(d,"input");if(g.length>0){for(var m=0;m<g.length;m++){g[m].setAttribute("readonly","true");g[m].setAttribute("printMe","true")}}popWin=window.open("about:blank","print","toolbar=yes,top=0,left=0,width=1000,height=600,scrollbars=no");popWin.document.open();popWin.document.write("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>");popWin.document.write("<html>");popWin.document.write("<head>");if(bb.browser.ie&bb.browser.version==8){popWin.document.write("<meta http-equiv='X-UA-Compatible' content='IE=EmulateIE7'>")}popWin.document.write("<title>Print</title>");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/absa.css?v=777' />");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/index.css' />");popWin.document.write("<style type='text/css'>");var l=bb.selector.queryAll(window.document,"style");for(var m=0;m<l.length;m++){popWin.document.write(l[m].innerHTML)}popWin.document.write(" html { background-color: #FFFFFF; color:#000000 !important; } ");popWin.document.write(" table { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-col-content { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-page-content { border-width:0px; padding:0px 13px; color:#000000 !important; } ");popWin.document.write(" @media print { .ui-modal{ display:none; } .ui-modal-content{ display:none; }} ");popWin.document.write(" .ui-wizard-head-wrapper .ui-button { display:block; } ");popWin.document.write(" .ui-modalHeader {position:relative; color:#000000 !important; }");popWin.document.write(" .ap-container-content { border-top: 1px solid #CFCFCF; color:#000000 !important; } ");popWin.document.write(" .ap-heading-titlebar { display:none; color:#000000 !important; } ");popWin.document.write(" .ap-container-content { padding:0px; margin:0px; width:876px; color:#000000 !important; } ");popWin.document.write(" .ui-table--scrollContainer { overflow:visible; height:auto !important; color:#000000 !important; }");popWin.document.write(" .ap-container-highlevel { border-bottom:0px !important; width:878px; color:#000000 !important;} ");popWin.document.write(" .ap-page-container { width:813px !important; color:#000000 !important; } ");popWin.document.write(" .ap-main-content-wrapper { width:813px !important; margin-bottom:0px !important; color:#000000 !important; } ");popWin.document.write(" .ap-page-content { padding:0 0px !important; color:#000000 !important; } ");popWin.document.write(" .ap-container-content { width:813px !important; color:#000000 !important; } ");popWin.document.write(" .ap-icon-print { display:none !important; }");popWin.document.write(" .ui-modal-printButton { display:none !important; }");popWin.document.write(" .ui-modal-closeButton { display:none !important; }");popWin.document.write(" .ap-icon-help { display:none !important; }");popWin.document.write(" .ap-icon-help-inactive { display:none !important; }");popWin.document.write(" .ap-icon-callMe { display:none !important; }");popWin.document.write(" @page { margin:0in; color:#000000 !important; } ");popWin.document.write(" @page { size:landscape; color:#000000 !important; } ");popWin.document.write("</style>");popWin.document.write("</head>");popWin.document.write("<body class='ssr-enabled' id='ap-page-body' onload='setTimeout(\"window.print()\",\"2000\")'>");popWin.document.write("<div class='ap-page-container' id='ap-page-container-div' style='z-index:1;'>");popWin.document.write("  <div class='ap-main-content-wrapper'>");popWin.document.write("    <div class='ap-main-content-wrapper-top'></div>");popWin.document.write("    <div class='ap-page-content ap-container'>");popWin.document.write("      <div class='ap-container-highlevel' style='border-bottom:1px solid #CFCFCF;'>");popWin.document.write("        <div class='ap-titlebar ap-heading-titlebar'>");popWin.document.write("				<h2 style='width: 200px;' class='ap-bar-section ap-bar-title'>"+f.innerHTML+"</h2>");popWin.document.write("			</div>");popWin.document.write("        <div id='ap-container-wrapper' class='ap-container-content'>");popWin.document.write(d.innerHTML);popWin.document.write("        </div>");popWin.document.write("      </div>");popWin.document.write("    </div>");popWin.document.write("  </div>");popWin.document.write("</div>");popWin.document.write("<div class='ap-print-transparent_class'><br/></div>");popWin.document.write("</body>");popWin.document.write("</html>");popWin.document.close()};absa.print.printBeneficiaryListAndHistory=function(f){if(f==null){return}var e=bb.selector.queryAncestor(f,".ap-manageBeneficiaries-expandableRow");var d=bb.selector.query(e,".manageBeneficiaries-beneficiaryName-display").value;var h=document.createElement("div");h.innerHTML=e.innerHTML;var g=bb.selector.queryAll(h,"input");if(g.length>0){for(var c=0;c<g.length;c++){g[c].setAttribute("readonly","true");g[c].setAttribute("printMe","true")}}popWin=window.open("about:blank","print","toolbar=yes,top=0,left=0,width=1000,height=600,scrollbars=no");popWin.document.open();popWin.document.write("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>");popWin.document.write("<html>");popWin.document.write("<head>");if(bb.browser.ie&bb.browser.version==8){popWin.document.write("<meta http-equiv='X-UA-Compatible' content='IE=EmulateIE7'>")}popWin.document.write("<title>Print</title>");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/absa.css?v=777' />");popWin.document.write("<link rel='stylesheet' type='text/css' href='"+absa.CONTEXT+"/static/style/index.css' />");popWin.document.write("<style type='text/css'>");var b=bb.selector.queryAll(window.document,"style");for(var c=0;c<b.length;c++){popWin.document.write(b[c].innerHTML)}popWin.document.write(" html { background-color: #FFFFFF; color:#000000 !important; } ");popWin.document.write(" table { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ai-button { display:none; } ");popWin.document.write(" .ap-col-content { font-size:11px; color:#000000 !important; } ");popWin.document.write(" .ap-page-content { border-width:0px; padding:0px 13px; color:#000000 !important; } ");popWin.document.write(" @media print { .ui-modal{ display:none; } .ui-modal-content{ display:none; }} ");popWin.document.write(" .ui-wizard-head-wrapper .ui-button { display:block; } ");popWin.document.write(" .ui-modalHeader-icons { display:none; }");popWin.document.write(" .ui-table--scrollContainer { overflow:visible; height:auto !important; color:#000000 !important; }");popWin.document.write(" .ui-wizard-head-wrapper .ui-button { display:inline; color:#000000 !important; } ");popWin.document.write(" .ap-icon-help { display:none !important; }");popWin.document.write(" .ap-icon-print { display:none !important; }");popWin.document.write(" .ap-icon-callMe { display:none !important; }");popWin.document.write(" @page { margin:0in; color:#000000 !important; } ");popWin.document.write(" @page { size:landscape; color:#000000 !important; } ");popWin.document.write("</style>");popWin.document.write("</head>");popWin.document.write("<body class='ssr-enabled' id='ap-page-body' onload='setTimeout(\"window.print()\",\"2000\")'>");popWin.document.write("<div class='ap-page-container' id='ap-page-container-div' style='z-index:1;'>");popWin.document.write("  <div class='ap-main-content-wrapper'>");popWin.document.write("    <div class='ap-main-content-wrapper-top'></div>");popWin.document.write("    <div class='ap-page-content ap-container'>");popWin.document.write("      <div class='ap-container-highlevel' style='border-bottom:1px solid #CFCFCF;'>");popWin.document.write("        <div class='ap-titlebar ap-heading-titlebar'>");popWin.document.write("<h2 id='ap-bar-section-Payments' style='width:400px' class='ap-bar-section ap-bar-title' tabindex='0'>"+d+"</h2>");popWin.document.write("			</div>");popWin.document.write("        <div id='ap-container-wrapper' class='ap-container-content'>");popWin.document.write(h.innerHTML);popWin.document.write("        </div>");popWin.document.write("      </div>");popWin.document.write("    </div>");popWin.document.write("  </div>");popWin.document.write("</div>");popWin.document.write("<div class='ap-print-transparent_class'></div>");popWin.document.write("</body>");popWin.document.write("</html>");popWin.document.close()};absa.print.printPopupSaveInvest=function(c){var b=bb.selector.query(document.body,".modalPrintTotalInvestment");phe.modal.showModal(0.5,b,document.body,true)};absa.io=absa.io||{};absa.io.makeRequest=function(f,n,g){if(!g){g={}}var l={};if(!g[gadgets.io.RequestParameters.METHOD]){if(f){if(f.indexOf("?")==-1){l.nonce=absa.NONCE;l.uniq=new Date().getTime()}else{var h=new Array();h[0]=f.substring(0,f.indexOf("?"));h[1]=f.substring((f.indexOf("?")+1));if(h.length==2){f="";for(var m=0;m<h.length;m++){if(m==0){f+=h[0];l.nonce=absa.NONCE;l.uniq=new Date().getTime()}else{var e=h[m].split("&");if(e&&e!=""){for(a in e){var c=e[a].split("=");if(c&&c!=""){var j=c[0];var b=c[1];if(j){if(b==null||b=="undefined"){b=""}if(l[j]){l[j].push(decodeURIComponent(b))}else{l[j]=new Array();l[j].push(decodeURIComponent(b))}}}}}}}}else{l.nonce=absa.NONCE;l.uniq=new Date().getTime()}}}else{l.nonce=absa.NONCE;l.uniq=new Date().getTime()}g[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;g[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues(l)}else{if(!g[gadgets.io.RequestParameters.POST_DATA]){l.nonce=absa.NONCE;l.uniq=new Date().getTime();g[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues(l)}else{var k=g[gadgets.io.RequestParameters.POST_DATA];k+="&";var h=f.split("?");if(h){f="";for(var m=0;m<h.length;m++){if(m==0){f+=h[0]}else{k+=h[m]}}}k=k+"&nonce="+absa.NONCE+"&uniq="+new Date().getTime();g[gadgets.io.RequestParameters.POST_DATA]=k}}if(!g[gadgets.io.RequestParameters.TIMEOUT]){g[gadgets.io.RequestParameters.TIMEOUT]=230000}function d(p){if(p.headers["Logon-Jsp"]){top.location.href=p.headers["Logon-Jsp"]}else{if(p.status==999){if(typeof absa.index!="undefined"){var o=bb.selector.query(document.body,"#modalSessionDied");phe.modal.showModal(0.5,o,document.body,true)}}else{if((p.status==200)&((p.headers["Logon-Jsp"]!=null)&&(p.headers["Logon-Jsp"].indexOf("login.jsp")>-1))){top.location.href=p.headers["Logon-Jsp"]}else{if((p.status==500)&(p.headers.Connection=="close")){top.location.reload()}else{if((p.status==301)&((p.headers.Location!=null)&&(p.headers.Location.indexOf("logoff")>-1))){top.location.href=p.headers.Location}else{if((p.status==302)&((p.headers.Location!=null)&&(p.headers.Location.indexOf("logoff")>-1))){top.location.href=p.headers.Location}else{if(n){if((p.status==302)&(p.headers.Connection=="Keep-Alive")&(p.headers.Location!=null)){if(p.headers.Location.indexOf("logoff")>-1){top.location.href=p.headers.Location}else{n(p)}}else{if((p.status==302)&(p.headers["Content-Length"]=="0")&(p.headers.Location!=null)){if(p.headers.Location.indexOf("logoff?lme=")>-1){top.location.href=p.headers.Location}else{n(p)}}else{n(p)}}}}}}}}}}if(typeof absa.index!="undefined"){absa.index.resetTimerFromIO()}return gadgets.io.makeRequest(f,d,g)};var absa=window.absa||{};absa.gadgets=absa.gadgets||{};absa.apps=absa.apps||{};absa.notifications=absa.notifications||{};absa.notifications.onNotificationTypeSelect=function(d,f,b){var c=bb.selector.queryAncestor(d,".ap-notifications");if(!c){var e=bb.selector.queryAncestor(d,"form");c=bb.selector.query(e,".ap-notifications")}switch(f){case"S":f="sms";break;case"E":f="email";break;case"F":f="fax";break;default:f="none";break}if(b=="ap-icon-notMy"){absa.notifications.showOwnContent(c,f)}else{if(b=="ap-icon-notBen"){absa.notifications.showBeneficiaryContent(c,f)}}absa.notifications.showHideRow(c)};absa.notifications.showBeneficiaryContent=function(p,b){var o=bb.selector.queryAll(p,".ap-notifications-ben");var c=bb.selector.query(p,".ap-notifications-ben-Name");var m=bb.selector.queryAll(p,".ap-notifications-ben-email-options");for(var h=0;h<o.length;h++){if(bb.html.hasClass(o[h],"ap-notifications-ben-"+b)){var l=bb.selector.queryAll(o[h],".ap-notifications-inputBen-"+b);if(l[0]){for(var g=0;g<l.length;g++){phe.textBox.setAttribute(l[g],"required","true");switch(b){case"email":phe.textBox.setAttribute(l[g],"dataType","simple:email");if(absa.touch.enabled){phe.textBox.setAttribute(l[g],"type","email")}break;case"fax":if(bb.html.hasClass(l[g],"ap-notifications-inputMy-fax-code")){phe.textBox.setAttribute(l[g],"dataType","simple:faxCode")}else{phe.textBox.setAttribute(l[g],"dataType","simple:faxNumber")}if(absa.touch.enabled&&(l[g].type!="hidden")){phe.textBox.setAttribute(l[g],"type","tel")}break;case"sms":phe.textBox.setAttribute(l[g],"dataType","simple:cellNumber");if(absa.touch.enabled&&(l[g].type!="hidden")){phe.textBox.setAttribute(l[g],"type","tel")}break}}}o[h].style.display="";if((b=="email"||b=="fax")&&m){var f=bb.selector.query(p,".ui-form-field[name=notBenPaymentMadeBy]");if(f){phe.textBox.setAttribute(f,"required","true")}var n=bb.selector.query(p,".ap-notifications-inputBen-name");if(n){phe.textBox.setAttribute(n,"required","true")}for(var g=0;g<m.length;g++){m[g].style.display=""}}}else{o[h].style.display="none";var e=bb.selector.queryAll(o[h],"input");if(e[0]){for(var d=0;d<e.length;d++){phe.textBox.setAttribute(e[d],"dataType","");phe.textBox.setAttribute(e[d],"required","");absa.form.validate.checkElement(e[d])}}if(b!="email"&&b!="fax"&&m){var f=bb.selector.query(p,".ui-form-field[name=notBenPaymentMadeBy]");if(f){phe.textBox.setAttribute(f,"required","");absa.form.validate.checkElement(f)}var n=bb.selector.query(p,".ap-notifications-inputBen-name");if(n){phe.textBox.setAttribute(n,"required","");absa.form.validate.checkElement(n)}for(var d=0;d<m.length;d++){m[d].style.display="none"}}}}if(c&&(b=="email"||b=="fax")){c.style.display=""}else{if(c){c.style.display="none"}}};absa.notifications.showOwnContent=function(m,g){var l=bb.selector.queryAll(m,".ap-notifications-my");var k=bb.selector.query(m,".ap-notifications-my-Name");var e;if(k){e=bb.selector.query(k,".ui-textBox")}if(g=="sms"){}else{if(k){phe.textBox.setAttribute(e,"required","false");phe.row.hide(k)}}for(var d=0;d<l.length;d++){if(bb.html.hasClass(l[d],"ap-notifications-my-"+g)){l[d].style.display="";var f=bb.selector.queryAll(l[d],".ap-notifications-inputMy-"+g);if(f[0]){for(var c=0;c<f.length;c++){phe.textBox.setAttribute(f[c],"required","true");switch(g){case"email":phe.textBox.setAttribute(f[c],"dataType","simple:email");if(absa.touch.enabled){phe.textBox.setAttribute(f[c],"type","email")}if(e){phe.row.show(k);phe.textBox.setAttribute(e,"required","true")}break;case"fax":if(bb.html.hasClass(f[c],"ap-notifications-inputMy-fax-code")){phe.textBox.setAttribute(f[c],"dataType","simple:faxCode")}else{phe.textBox.setAttribute(f[c],"dataType","simple:faxNumber")}if(absa.touch.enabled&&(f[c].type!="hidden")){phe.textBox.setAttribute(f[c],"type","tel")}if(e){phe.row.show(k);phe.textBox.setAttribute(e,"required","true")}break;default:if(e){phe.textBox.setAttribute(e,"required","false");phe.row.hide(k)}}}}}else{l[d].style.display="none";var b=bb.selector.queryAll(l[d],"input");if(b[0]){for(var h=0;h<b.length;h++){b[h].setAttribute("bbf_required","");b[h].setAttribute("bbf_type","")}}}}};absa.notifications.showHideRow=function(b){var c=bb.selector.query(b,".ap-notification-options");var g=bb.selector.query(b,".ap-notMyType");var e=bb.selector.query(b,".ap-notBenType");var d;var f;if(!e||phe.select.getValue(e)==""){d="N"}else{d=phe.select.getValue(e)}if(!g||phe.select.getValue(g)==""){f="N"}else{f=phe.select.getValue(g)}if(f=="N"&&d!="N"){phe.row.show(c)}else{if(f=="N"&&d=="N"){phe.row.hide(c)}else{phe.row.show(c)}}};absa.notifications.getNotifications=function(c){var e=c.form;var b=bb.selector.query(e,".ap-notBenType-default").value;var d=bb.selector.query(e,".ap-notMyType-default").value;absa.notifications.resetNotifications(b,"ap-icon-notBen",c);absa.notifications.resetNotifications(d,"ap-icon-notMy",c)};absa.notifications.resetNotifications=function(e){var g=bb.selector.queryAncestor(e,".ui-form");var f=bb.selector.query(g,".ap-notBenType-default");var c=bb.selector.query(g,".ap-notMyType-default");var d=bb.selector.query(g,".ap-notMyType");var b=bb.selector.query(g,".ap-notBenType");if(f){bb.html.removeClass(b,"ui-incorrect-value");phe.select.setValue(b,phe.hiddenField.getValue(f));absa.notifications.onNotificationTypeSelect(e,f.value,"ap-icon-notBen")}bb.html.removeClass(d,"ui-incorrect-value");phe.select.setValue(d,phe.hiddenField.getValue(c));absa.notifications.onNotificationTypeSelect(e,c.value,"ap-icon-notMy");g.reset()};absa.notifications.setValidation=function(c){phe.textBox.setAttribute(c,"dataType","simple:cellNumber");if(absa.touch.enabled&&(c.type!="hidden")){phe.textBox.setAttribute(c,"type","tel")}if(absa.form.validate.checkElement(c)){var b=bb.selector.query(c.parentNode,".ap-notifications-inputMy-sms");phe.hiddenField.setValue(b,phe.textBox.getValue(c))}};absa.date=absa.date||{};absa.date.getDaysDiff=function(b,e){if(b!=""&e!=""){var d=new Date(Number(b.substring(0,4)),(Number(b.substring(5,7))-1),Number(b.substring(8,10)));var c=new Date(Number(e.substring(0,4)),(Number(e.substring(5,7))-1),Number(e.substring(8,10)));return Math.round((c-d)/(1000*60*60*24))}else{return 0}};absa.date.getDateTimeNow=function(){var j=new Date();var f=j.getFullYear();var h;var b;var c;var g;var e;if(j.getMonth()<9){h="0"+(j.getMonth()+1)}else{h=""+(j.getMonth()+1)}if(j.getDate()<10){b="0"+j.getDate()}else{b=j.getDate()}if(j.getHours()<10){c="0"+j.getHours()}else{c=j.getHours()}if(j.getMinutes()<10){g="0"+j.getMinutes()}else{g=j.getMinutes()}if(j.getSeconds()<10){e="0"+j.getSeconds()}else{e=j.getSeconds()}return f+"-"+h+"-"+b+" "+c+":"+g+":"+e};absa.date.getDateNow=function(){var f=new Date();var c=f.getFullYear();var e;var b;if(f.getMonth()<9){e="0"+(f.getMonth()+1)}else{e=""+(f.getMonth()+1)}if(f.getDate()<10){b="0"+f.getDate()}else{b=f.getDate()}return c+"-"+e+"-"+b};absa.date.getTimeNow=function(){var b=new Date();if(b.getHours()<10){curr_hrs="0"+b.getHours()}else{curr_hrs=b.getHours()}if(b.getMinutes()<10){curr_mins="0"+b.getMinutes()}else{curr_mins=b.getMinutes()}if(b.getSeconds()<10){curr_sec="0"+b.getSeconds()}else{curr_sec=b.getSeconds()}return curr_hrs+":"+curr_mins+":"+curr_sec};absa.date.getTimeNowHourOnly=function(){var b=new Date();if(b.getHours()<10){curr_hrs="0"+b.getHours()}else{curr_hrs=b.getHours()}return curr_hrs};absa.date.getTimeNowMinutesOnly=function(){var b=new Date();if(b.getMinutes()<10){curr_mins="0"+b.getMinutes()}else{curr_mins=b.getMinutes()}return curr_mins};absa.date.formatDate=function(d){var b=d.getDate();var e=d.getMonth();e++;var c=d.getFullYear();if(e<10){sCurrMonth="0"+e}else{sCurrMonth=e}if(b<10){sCurrDate="0"+b}else{sCurrDate=b}return c+"-"+sCurrMonth+"-"+sCurrDate};absa.date.isValidDate=function(j){var h=new String(j);var g=Number(h.substring(0,4));var f=h.substring(4,5);var m=Number(h.substring(5,7));var l=h.substring(7,8);var k=Number(h.substring(8,10));if(isNaN(g)==false&isNaN(m)==false&isNaN(k)==false){if(f!="-"|l!="-"){return false}else{return true}}else{return false}};absa.date.parseXPathDateTime=function(k){var o=null;var m=k.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})([+-])(\d{2}):(\d{2})$/);if(m){var g=m[1]*1,c=m[2]*1-1,b=m[3]*1,f=m[4]*1,d=m[5]*1,j=m[6]*1,h=m[7]*1,e=m[8],n=m[9]*1,l=m[10]*1;o=new Date;o.setYear(g);o.setMonth(c);o.setDate(b);o.setHours(f);o.setMinutes(d-(e=="+"?1:-1)*(n*60+l)-o.getTimezoneOffset());o.setSeconds(j);o.setMilliseconds(h)}return o};absa.date.addToDate=function(c,g,f,d,e){var b=new Date(Number(c.substring(0,4)),(Number(c.substring(5,7))-1),Number(c.substring(8,10)));b.setYear(b.getFullYear()+d);b.setMonth(b.getMonth()+f);b.setDate(b.getDate()+g);if(e){return absa.date.formatDate(b)}else{return b}};absa.date.getNextCapDate=function(c,b,d){var f=new Date();f.setYear(c.getFullYear());if(d===1){if(c.getDate()<b){f.setMonth(c.getMonth())}else{f.setMonth(c.getMonth()+d)}}else{f.setMonth(c.getMonth()+d)}var e=new Date(f.getFullYear(),f.getMonth()+1,0);if(b>e.getDate()){f.setDate(e.getDate())}else{f.setDate(b)}return f};absa.date.getAmtMonthsLeftForCurrentTaxYear=function(){var e=new Date();var c=e.getMonth();var b=(12-c)+2;if(b>12){b=b-12}return b};absa.util.Observer=function(){this.topics={}};absa.util.Observer.prototype={subscribe:function(b,c){this.topics[b]=this.topics[b]||[];this.topics[b].push(c)},unsubscribe:function(e,g){var c=this.topics[e];if(c){var d=[];for(var f=0;f<c.length;f++){var b=c[f];if(b!=g){d[d.lengh]=b}}this.topics[e]=d}},publish:function(c,h,g){var e=g||window;var b=this.topics[c];if(b){for(var d=0;d<b.length;d++){var f=b[d];f.call(e,h)}}}};absa.util.observer=new absa.util.Observer;absa.unconfirmedChanges=absa.unconfirmedChanges||{};absa.unconfirmedChanges.bDisplayed=false;absa.unconfirmedChanges.oRestoredGadget=null;absa.unconfirmedChanges.cancelNavigation=function(c,f,e){if(!absa.unconfirmedChanges.content){absa.unconfirmedChanges.content=bb.selector.query(document.body,".ap-unconfirmedChangesModal .ui-modal")}absa.unconfirmedChanges.fContinue=function(){phe.modal.hideModal();absa.unconfirmedChanges.bDisplayed=false;if(typeof f==="function"){f()}if(absa.unconfirmedChanges.oRestoredGadget){absa.unconfirmedChanges.oRestoredGadget.restore();absa.unconfirmedChanges.oRestoredGadget=null}};absa.unconfirmedChanges.cancel=function(){phe.modal.hideModal();absa.unconfirmedChanges.bDisplayed=false;if(typeof e==="function"){e()}if(absa.unconfirmedChanges.oRestoredGadget){absa.unconfirmedChanges.oRestoredGadget=null}c.focus()};var d=bb.selector.query(c,"*[customcancelnavigation]");if(d){var b=absa.util.attributeToFunction(d,"customcancelnavigation",["fnOnContinue","fnOnCancel"]);b.call(d,f,e)}else{if((absa.VI!="true")&&(absa.form.isFormChanged(c))){absa.unconfirmedChanges.bDisplayed=true;phe.modal.showModal(0.5,absa.unconfirmedChanges.content)}else{absa.unconfirmedChanges.fContinue=null;absa.unconfirmedChanges.cancel=null;f()}}};absa.xd=absa.xd||{};absa.xd.timeout=60000;absa.xd._requests={};absa.xd.ERROR_TIMEOUT=1;absa.xd.ERROR_CONTENT=2;absa.xd.ERROR_REQUEST=3;absa.xd.makeXDRequest=function(b,h,l,k,c,f){var e=Math.round(Math.random()*10000000000000000);var d={};d.url=h+l;d.data=k;d.handler=c;absa.xd._requests[e]=d;var g=document.body.appendChild(document.createElement("iframe"));g.setAttribute("name","xdr-"+e);g.setAttribute("id","xdr-"+e);g.style.cssText="position:absolute; visibility:hidden; top:1px; left:1px; width:1px; height:1px";var j=new Date().getTime();g.src=h+"/static/xd/proxy.jsp?uniq="+j+"&url="+encodeURIComponent(h+l)+"&callback="+encodeURIComponent(b+"/static/xd/callback.html?uniq="+j+"&xdr="+e);g.contentWindow.name=encodeURIComponent(k);d._timeout=setTimeout(function(){absa.xd._onTimeout(e)},f||absa.xd.timeout)};absa.xd.callback=function(j,b){absa.xd._removeIFrame(j);var c=absa.xd._removeRequest(j);clearTimeout(c._timeout);var g={};if(decodeURIComponent(b).match(/xhrSuccess=(true|false)&xhrResponse=([\s\S]*)$/)){g.xhrSuccess=RegExp.$1;g.xhrResponse=RegExp.$2}var d=c.handler;if(typeof d=="function"){if(g.xhrSuccess=="true"){var h;try{h=JSONRequest.parse(g.xhrResponse)}catch(f){h={success:false,errorCode:absa.xd.ERROR_CONTENT,errorMessage:"Server did not respond"}}}else{h={success:false,errorCode:absa.xd.ERROR_REQUEST,errorMessage:"Server did not respond"}}d(h,j)}};absa.xd._onTimeout=function(d){absa.xd._removeIFrame(d);var b=absa.xd._removeRequest(d);var c=b.handler;if(typeof c=="function"){c({success:"false",errorCode:absa.xd.ERROR_TIMEOUT,errorMessage:"Server did not respond"},d)}};absa.xd._removeIFrame=function(c){var b=document.getElementById("xdr-"+c);b.parentNode.removeChild(b)};absa.xd._removeRequest=function(c){var b=absa.xd._requests[c];delete absa.xd._requests[c];return b};absa.touch=absa.touch||{};absa.touch=(function(){var f=null;var c={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"};function b(g){g.preventDefault();e(g)}function d(g){document.removeEventListener("touchmove",b,false);document.removeEventListener("touchend",d,false);e(g)}function e(h){var j=f=(h.targetTouches[0]||f);var g=document.createEvent("MouseEvents");g.initMouseEvent(c[h.type],true,true,h.view,h.detail,h.screenX||j.screenX,h.screenY||j.screenY,h.clientX||j.clientX,h.clientY||j.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button||0,h.relatedTarget);g.pageX=h.pageX||j.pageX;g.pageY=h.pageY||j.pageY;h.target.dispatchEvent(g);h.stopPropagation();h.preventDefault()}return{enabled:false,register:function(g){g.addEventListener("touchstart",function(h){document.addEventListener("touchmove",b,false);document.addEventListener("touchend",d,false);e(h)},false)}}})();var absa=window.absa||{};absa.n2fa=absa.n2fa||{};absa.n2fa.globals=absa.n2fa.globals||{};absa.n2fa.globals.oCanvas;absa.n2fa.globals.hasCanvas="false";absa.n2fa.init=function(b){if(!b){gadgets.pubsub.subscribe("SVM-form-loaded",function(c){absa.n2fa.updateFormStatusSVM(c.form,false,false,c.isUnAuth)});gadgets.pubsub.subscribe("TVM-form-loaded",function(c){absa.n2fa.updateFormStatusSVM(c,false,false,false)})}};absa.n2fa.onProcessFormCallBackSVM=function(e,c,b,d){if(typeof b=="undefined"){b=false}if(typeof d=="undefined"){d=false}absa.n2fa.updateFormStatusSVM(e,false,b,d)};absa.n2fa.updateFormStatusSVM=function(u,n,e,m){if(typeof n=="undefined"){n=false}if(typeof e=="undefined"){e=false}if(typeof m=="undefined"){m=false}var b=phe.form.getAttribute(u,"data-timeStart");var w=phe.form.getAttribute(u,"data-timeInterval");var o=phe.form.getAttribute(u,"data-timeRemaining");var p=bb.selector.query(u,".ap-n2fa-countDownTimer");var f=phe.form.getAttribute(u,"data-cellphone");var c=phe.form.getAttribute(u,"lang");if(c==null|c==""){c=absa.LANG}var j=phe.form.getAttribute(u,"data-refNo");if(j==null|j==""){j=phe.form.getAttribute(u,"data-correlationID")}var k=phe.common.getAttribute(p,"data-timeRemaining");var h=bb.selector.query(u,".ap-n2fa-errorMessageContainer");var x=bb.selector.query(u,".ap-SVM-resendButton");var q=bb.selector.query(u,".ap-SVM-sendRVNButton");var l=document.body.getAttribute("id");if(l==null){l="<none>"}var r;if(m){if(l=="ap-page-body"){r=absa.CONTEXT+"/proxy?pipe=genericWebservice"}else{r=absa.CONTEXT+"/proxy?pipe=genericWebserviceCommon"}r+="&ws=AccessControlWebService&action=getTransactionVerificationState&sId="+absa.apps.unAuthSessionID+"&lang="+c+"&referenceNumber="+encodeURIComponent(j)+"&go=now"}else{if(l=="ap-page-body"){r=absa.CONTEXT+"/proxy?pipe=genericWebservice"}else{r=absa.CONTEXT+"/proxy?pipe=genericWebserviceCommon"}r+="&ws=AccessControlWebService&action=getTransactionVerificationState&lang="+c+"&referenceNumber="+encodeURIComponent(j)+"&go=now"}if(o>(Number(b)-5)){var t=bb.selector.queryAncestor(u,".ui-wizard");if(t){var v=bb.selector.query(t,".ui-wizard-buttons");if(v){var g=bb.selector.query(v,".ap-icon-help");if(g){bb.html.replaceClass(g,"ap-icon-help","ap-icon-help-inactive")}var d=bb.selector.query(v,".ap-icon-price");if(d){phe.common.hide(d)}}}}phe.common.hide(h);phe.button.hide(x);phe.button.hide(q);var l=document.body.getAttribute("id");if(l==null){l="<none>"}if(n){if(l=="ap-page-body"){r=absa.CONTEXT+"/proxy?pipe=genericWebservice"}else{r=absa.CONTEXT+"/proxy?pipe=genericWebserviceCommon"}if(m){r+="&ws=AccessControlWebService&action=resendTransactionVerification&sId="+absa.apps.unAuthSessionID+"&referenceNumber="+encodeURIComponent(j)+"&go"}else{r+="&ws=AccessControlWebService&action=resendTransactionVerification&referenceNumber="+encodeURIComponent(j)+"&go"}}if(phe.form.isVisible(u)){absa.io.makeRequest(r,function(A){if(!A.errors.length){var E=bb.html.createElementFromString(A.text);var y=phe.common.getAttribute(E,"data-state");if((r.indexOf("resendTransactionVerification")>-1)&&(y==null)){y="Processing"}var D=3;if(n){D=Number(phe.common.getAttribute(E,"data-retries"))}var z=phe.common.getAttribute(E,"data-tranVerifType");if(z==null){z="-"}else{if(z=="SURECHECKV2_FALLBACK"){y="DO_FALLBACK"}}var B=phe.common.getAttribute(E,"data-errorCode");if(B==null){B="-"}var F=phe.common.getAttribute(E,"data-errorKey");if(F==null){F="-"}if(y=="DO_FALLBACK"&z=="SURECHECKV2_FALLBACK"){var G=bb.selector.queryAncestor(u,".ui-wizard-body-selected");if(m){G=bb.selector.queryAncestor(u,".ap-container-content")}phe.common.hide(u);var C=bb.selector.query(G,".ap-n2fa-SVM-form-fallback");phe.common.show(C)}else{if(y=="Processed"&bb.html.hasClass(u,"ap-SVM-form")){absa.n2fa.goToStepAfterSecurityVerification(u,e)}else{if(y=="Processed"&bb.html.hasClass(u,"ap-TVM-form")){absa.n2fa.goToStepAfterSecurityVerification(u)}else{if((y=="Processing")&(Number(k)>=Number(w))&&(Number(D)>=0)&(B=="-")&(F=="-")){if(p!=null){p.innerHTML=o}absa.n2fa.doCountdown(p,w,o);absa.n2fa.pollGetTransactionVerificationState(u,o,w)}else{if((y=="Processing")&&(Number(k)<Number(w))){absa.n2fa.showErrorMsg(u,E,"frontEndTimeoutError");phe.common.show(x)}else{if((y=="Processing")&(Number(D)==0)&(F.toLowerCase().indexOf("resendsexceed")>-1)){absa.n2fa.showErrorMsg(u,E,"frontEndRetriesExceededError")}else{if(y=="RevertBack"|y=="ResendRequired"){absa.n2fa.showErrorMsg(u,E,"servicesError");phe.common.show(q)}else{if(B=="InvalidAuthLevel"){if(m){absa.login.doLogout}else{absa.index.doLogout(2)}}else{absa.n2fa.showErrorMsg(u,E,"servicesError");if((Number(D)>0)&&(y!="Rejected")&&(y!="")){phe.common.show(x)}}}}}}}}}}})}};absa.n2fa.doCountdown=function(e,d,c){if(((d*1)-1)<=0){return}else{d-=1;c-=1;if(c==(absa.MAXUSSD2TIME-1)){absa.n2fa.globals.hasCanvas=phe.common.getAttribute(e,"data-canvas");if(absa.n2fa.globals.hasCanvas=="true"){var b=bb.selector.queryAncestor(e,".ui-row");absa.n2fa.globals.oCanvas=bb.selector.query(b,".ap-timer-canvas");absa.n2fa.globals.oldStartAngle=1.5;absa.n2fa.animateCanvas(absa.n2fa.globals.oCanvas,(c+1))}else{absa.n2fa.globals.hasCanvas="false"}}else{if(c>=-1){if(absa.n2fa.globals.hasCanvas=="true"){absa.n2fa.animateCanvas(absa.n2fa.globals.oCanvas,(c+1))}}}phe.common.setAttribute(e,"data-timeRemaining",c);if(e!=null){e.innerHTML=c}absa.n2fa._timer2=setTimeout(function(){absa.n2fa.doCountdown(e,d,c)},1000)}};absa.n2fa.isSupportedBrowser=function(){var b=false;if(bb.browser.name=="ie"&&bb.browser.version>=11){b=true}else{if(bb.browser.name=="edge"&&bb.browser.version>=14){b=true}else{if(bb.browser.name=="gecko"&&bb.browser.version>=52){b=true}else{if(bb.browser.name=="opera"&&bb.browser.version>=45){b=true}else{if(bb.browser.name=="webkit"&&bb.browser.version>=10.1){b=true}}}}}return b};absa.n2fa.animateCanvas=function(e,f){var g=absa.n2fa.isSupportedBrowser();if(g==false){if(e==null||e.parentNode==null){var d=document.getElementById("timerCanvasSeconds");if(d!=null){absa.n2fa.globals.oCanvas=d;d.innerText=f}}else{if(e.parentNode!=null){e.parentNode.innerHTML="<div style='background-image:url(\"/absa-online/static/style/resources/2fa/timer_circle_ie8.png\"); text-align:center; vertical-align:middle; width:50px; height:50px;'><div id='timerCanvasSeconds' style='padding-top:14px; font-family:arial; font-size:21px; color:#CC1124;'>"+f+"</div></div>"}}}else{var b=e.getContext("2d");b.beginPath();b.clearRect(0,0,50,50);b.beginPath();b.fillStyle="#F4F4F4";b.arc(25,25,20,1.5*Math.PI,-0.5*Math.PI,true);b.fill();var c=Number(f);b.beginPath();b.fillStyle="#CC1124";b.font="21px Arial";if(c<10){b.fillText(c,19,33)}else{b.fillText(c,13,33)}b.beginPath();b.strokeStyle="#CC1124";b.lineWidth=3;if(absa.MAXUSSD2TIME=="90"){switch(c){case (90):sAngle=1.5;absa.n2fa.globals.oldStartAngle=sAngle;break;case (86):sAngle=1.4;absa.n2fa.globals.oldStartAngle=sAngle;break;case (81):sAngle=1.3;absa.n2fa.globals.oldStartAngle=sAngle;break;case (77):sAngle=1.2;absa.n2fa.globals.oldStartAngle=sAngle;break;case (72):sAngle=1.1;absa.n2fa.globals.oldStartAngle=sAngle;break;case (68):sAngle=1;absa.n2fa.globals.oldStartAngle=sAngle;break;case (63):sAngle=0.9;absa.n2fa.globals.oldStartAngle=sAngle;break;case (59):sAngle=0.8;absa.n2fa.globals.oldStartAngle=sAngle;break;case (54):sAngle=0.7;absa.n2fa.globals.oldStartAngle=sAngle;break;case (50):sAngle=0.6;absa.n2fa.globals.oldStartAngle=sAngle;break;case (45):sAngle=0.5;absa.n2fa.globals.oldStartAngle=sAngle;break;case (41):sAngle=0.4;absa.n2fa.globals.oldStartAngle=sAngle;break;case (36):sAngle=0.3;absa.n2fa.globals.oldStartAngle=sAngle;break;case (32):sAngle=0.2;absa.n2fa.globals.oldStartAngle=sAngle;break;case (27):sAngle=0.1;absa.n2fa.globals.oldStartAngle=sAngle;break;case (23):sAngle=0;absa.n2fa.globals.oldStartAngle=sAngle;break;case (18):sAngle=-0.1;absa.n2fa.globals.oldStartAngle=sAngle;break;case (14):sAngle=-0.2;absa.n2fa.globals.oldStartAngle=sAngle;break;case (9):sAngle=-0.3;absa.n2fa.globals.oldStartAngle=sAngle;break;case (5):sAngle=-0.4;absa.n2fa.globals.oldStartAngle=sAngle;break;case (0):sAngle=-0.5;absa.n2fa.globals.oldStartAngle=sAngle;break;default:sAngle=absa.n2fa.globals.oldStartAngle;break}}else{switch(c){case (60):sAngle=1.5;absa.n2fa.globals.oldStartAngle=sAngle;break;case (57):sAngle=1.4;absa.n2fa.globals.oldStartAngle=sAngle;break;case (54):sAngle=1.3;absa.n2fa.globals.oldStartAngle=sAngle;break;case (51):sAngle=1.2;absa.n2fa.globals.oldStartAngle=sAngle;break;case (48):sAngle=1.1;absa.n2fa.globals.oldStartAngle=sAngle;break;case (45):sAngle=1;absa.n2fa.globals.oldStartAngle=sAngle;break;case (42):sAngle=0.9;absa.n2fa.globals.oldStartAngle=sAngle;break;case (39):sAngle=0.8;absa.n2fa.globals.oldStartAngle=sAngle;break;case (36):sAngle=0.7;absa.n2fa.globals.oldStartAngle=sAngle;break;case (33):sAngle=0.6;absa.n2fa.globals.oldStartAngle=sAngle;break;case (30):sAngle=0.5;absa.n2fa.globals.oldStartAngle=sAngle;break;case (27):sAngle=0.4;absa.n2fa.globals.oldStartAngle=sAngle;break;case (24):sAngle=0.3;absa.n2fa.globals.oldStartAngle=sAngle;break;case (21):sAngle=0.2;absa.n2fa.globals.oldStartAngle=sAngle;break;case (18):sAngle=0.1;absa.n2fa.globals.oldStartAngle=sAngle;break;case (15):sAngle=0;absa.n2fa.globals.oldStartAngle=sAngle;break;case (12):sAngle=-0.1;absa.n2fa.globals.oldStartAngle=sAngle;break;case (9):sAngle=-0.2;absa.n2fa.globals.oldStartAngle=sAngle;break;case (6):sAngle=-0.3;absa.n2fa.globals.oldStartAngle=sAngle;break;case (3):sAngle=-0.4;absa.n2fa.globals.oldStartAngle=sAngle;break;case (0):sAngle=-0.5;absa.n2fa.globals.oldStartAngle=sAngle;break;default:sAngle=absa.n2fa.globals.oldStartAngle;break}}b.arc(25,25,23,(sAngle*Math.PI),(-0.5*Math.PI),true);b.stroke()}};absa.n2fa.updateUserState=function(c){var d=false;if(c.type=="checkbox"){if(c.checked){var g=phe.checkBox.getValue(c).toLowerCase();if(g=="true"|g=="y"|g=="1"){d=true}else{d=false}}else{d=false}}else{if(c.type=="radio"){var f=phe.radioGroup.getValue(c);if(f=="true"|f=="y"|f=="1"){d=true}else{d=false}}else{try{var b=c.value.toLowerCase();if(b=="true"|b=="y"|b=="1"){d=true}}catch(e){}}}absa.n2fa._updateSecondFactorState(d)};absa.n2fa._updateSecondFactorState=function(c,f){var d=false;if(c==null){c=false}if(f==null){f=absa.SURECHECK2STATE}if(isNaN(f)){}else{switch(Number(f)){case (25):f="SURECHECKV2_SECURITYCODEREVOKED";break;case (24):f="SURECHECKV2_SECURITYCODEEXPIRED";break;case (23):f="SURECHECKV2_SECURITYCODEUSED";break;case (22):f="SURECHECKV2_SECURITYCODE";break;case (21):f="SURECHECKV2_NOPRIMARYDEVICE";break;case (20):f="SURECHECKV2";break;case (14):f="SURECHECKV2_NOSMARTPHONE";break;case (13):f="SURECHECKV2_FORCE_REGISTRATION_NEWUSER";break;case (12):f="SURECHECKV2_FORCE_REGISTRATION";break;case (11):f="SURECHECKV2_GRACEPERIOD_URGENT";break;case (10):f="SURECHECKV2_GRACEPERIOD";break;case (0):f="SURECHECKV1";break}}var b={};b.pipe="genericWebservice";b.ws="SecurityWebService";b.action="updateSecondFactorState";b.secondFactorState=f;b.snoozed=""+c;var e={};e[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;e[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues(b);absa.io.makeRequest("proxy",function(l){if(!l.errors.length){var n=bb.html.createElementFromString(l.text);var g=bb.selector.query(n,".ap-n2fa-updateSecondFactorState");if(g){var j=g.getAttribute("result");var m=g.getAttribute("resultCode");var h=g.getAttribute("resultKey");var k=g.getAttribute("resultDefaultMessage");if(j=="success"){absa.SURECHECK2STATE=f;d=true}}}},e);return d};absa.n2fa.pollGetTransactionVerificationState=function(e,b,d){var c={};if(e!=null){c._timeout=setTimeout(function(){b-=d;phe.form.setAttribute(e,"data-timeRemaining",b);phe.form.setAttribute(e,"data-timeInterval",d);var g=false;var f=phe.form.getAttribute(e,"data-isUnAuth")||phe.form.getAttribute(e,"data-isunauth");if(f!=null){g=(f=="true")}absa.n2fa.onProcessFormCallBackSVM(e,null,false,g)},(d*1000))}};absa.n2fa.goToStepOne=function(o,l){var c;if(l){c=bb.selector.queryAncestor(o,".ap-forceLoadNode")}var p=bb.selector.queryAncestor(o,"[proxyurl]");var h=bb.selector.queryAncestor(o,".ui-tabBody");var d=bb.selector.queryAncestor(o,".ui-tableBodyRowExpandableExtension");var n=bb.selector.queryAncestor(o,".ui-modalBody[proxyurl]");var g=bb.selector.queryAncestor(o,".ap-gadget-lazyContent");var k=bb.selector.queryAncestor(o,".ap-container-content-USSD-login");if(c){absa.lazyLoadNode(c,true)}else{if(d&&d.getAttribute("dataFileView")){var m=bb.selector.queryAncestor(o,".ui-form");if(m==null){m=bb.selector.query(o,".ui-form")}if(m!=null){phe.form.setAttribute(m,"trackUnconfirmedChanges","false");m._trackUnconfirmedChanges=false;m._changed=false}phe.tableBodyRow.expandRow(d.previousSibling,phe.tableBodyRowExpandableExtention.getAttribute(d,"dataFileView"),false)}else{if(p){absa.lazyLoadNode(p,true)}else{if(h){phe.tabBody.reload(h)}else{if(n){absa.lazyLoadNode(n,true)}else{if(g){absa.lazyLoadNode(g,true)}else{if(k){doLoadNewPasswordAfterUSSD()}}}}}}}var e=bb.selector.queryAncestor(o,".ui-wizard");if(e){var f=bb.selector.query(e,".ui-wizard-buttons");if(f){var j=bb.selector.query(f,".ap-icon-help-inactive");if(j){bb.html.replaceClass(j,"ap-icon-help-inactive","ap-icon-help")}var b=bb.selector.query(f,".ap-icon-price");if(b){phe.common.show(b)}}}};absa.n2fa.goToStepAfterSecurityVerification=function(o,g){var p=bb.selector.queryAncestor(o,".ui-wizard");var q=null;if(p!=null){q=phe.wizard.getCurrentStepIndex(p)}if(q==0||q==null){var x;if(g){x=bb.selector.queryAncestor(o,".ap-forceLoadNode")}var m=bb.selector.queryAncestor(o,"[proxyurl]");var b=bb.selector.queryAncestor(o,".ui-tabBody");var y=bb.selector.queryAncestor(o,".ui-tableBodyRowExpandableExtension");var v=bb.selector.queryAncestor(o,".ui-modalBody[proxyurl]");var l=bb.selector.queryAncestor(o,".ap-gadget-lazyContent");var h=bb.selector.queryAncestor(o,".ap-container-content-USSD-login");if(x){absa.lazyLoadNode(x,true)}else{if(y&&y.getAttribute("dataFileView")){var u=bb.selector.queryAncestor(o,".ui-form");if(u==null){u=bb.selector.query(o,".ui-form")}if(u!=null){phe.form.setAttribute(u,"trackUnconfirmedChanges","false");u._trackUnconfirmedChanges=false;u._changed=false}phe.tableBodyRow.expandRow(y.previousSibling,phe.tableBodyRowExpandableExtention.getAttribute(y,"dataFileView"),false)}else{if(m){absa.lazyLoadNode(m,true)}else{if(b){phe.tabBody.reload(b)}else{if(v){absa.lazyLoadNode(v,true)}else{if(l){absa.lazyLoadNode(l,true)}else{if(h){doLoadNewPasswordAfterUSSD()}}}}}}}var p=bb.selector.queryAncestor(o,".ui-wizard");if(p){var w=bb.selector.query(p,".ui-wizard-buttons");if(w){var z=bb.selector.query(w,".ap-icon-help-inactive");if(z){bb.html.replaceClass(z,"ap-icon-help-inactive","ap-icon-help")}var f=bb.selector.query(w,".ap-icon-price");if(f){phe.common.show(f)}}}}else{var n=phe.wizard.getStepsCount(p)-1;var r=bb.selector.queryAll(p,".ui-wizard-body");var e=r[n-1];var j=bb.selector.query(e,".ui-form");var k=bb.selector.query(p,".ui-wizard-body-selected");var d=k.previousSibling;var c=bb.selector.query(d,".ui-form");phe.wizard.selectStep(d);if(phe.common.getAttribute(c,"data-special2faCase")=="true"){bb.html.fireEvent(c,"submit",true,true)}else{var t=bb.selector.query(j,".ap-TVM-form");if(t){bb.html.fireEvent(c,"submit",true,true)}else{bb.html.fireEvent(j,"submit",true,true)}var w=bb.selector.query(p,".ui-wizard-buttons");if(w){var f=bb.selector.query(w,".ap-icon-price");if(f){phe.common.show(f)}}}}};absa.n2fa.showErrorMsg=function(j,g,h){var d=0;var b=bb.selector.query(j,".ap-n2fa-errorMessageContainer");var e=bb.selector.query(b,".ap-n2fa-frontEndMessage");var k=bb.selector.query(b,".ap-n2fa-backEndErrorMessageContainer");var f=bb.selector.query(j,".ap-n2fa-countDownTimer");if(f){phe.common.setAttribute(f,"data-timeRemaining",d);if(absa.n2fa.globals.hasCanvas=="true"){absa.n2fa.animateCanvas(absa.n2fa.globals.oCanvas,d)}if(f.innerHTML!=null){f.innerHTML=d}}phe.common.show(b);phe.common.hide(k);phe.message.hide(e);var l;if(h=="frontEndTimeoutError"){l=absa.locale["Common/SVM/Error/FrontEndTimeOut"];if(l==undefined){var c=bb.selector.query(j,".ap-n2fa-errorMessageFrontEndTimeOut");l=phe.hiddenField.getValue(c)}phe.message.setMessage(e,l);phe.message.show(e)}else{if(h=="frontEndRetriesExceededError"){l=absa.locale["Security/AccessControl/Error/SVMRetriesExceeded"];if(l==undefined){var c=bb.selector.query(j,".ap-n2fa-errorMessageRetriesExceeded");l=phe.hiddenField.getValue(c)}phe.message.setMessage(e,l);phe.message.show(e)}else{if(k!=null){k.innerHTML=g.innerHTML;phe.common.show(k)}}}};absa.n2fa.onResendBtnClickSVM=function(d,c){if(!c){c=false}var f=bb.selector.queryAncestor(d,".ui-form");var b=phe.form.getAttribute(f,"data-timeStart");var e=bb.selector.query(f,".ap-n2fa-countDownTimer");phe.common.setAttribute(e,"data-timeRemaining",b);phe.form.setAttribute(f,"data-timeRemaining",b);absa.n2fa.updateFormStatusSVM(f,true,false,c)};absa.n2fa.onResendBtnClickTVM=function(c,f){var e=bb.selector.queryAncestor(c,".ui-form");var b=phe.form.getAttribute(e,"data-timeStart");var d=bb.selector.query(e,".ap-n2fa-countDownTimer");phe.common.setAttribute(d,"data-timeRemaining",b);phe.form.setAttribute(e,"data-timeRemaining",b);absa.n2fa.updateFormStatusSVM(e,true,false,f)};absa.n2fa.onSendRVNBtnClick=function(e,d){if(d==null){d=false}var f=bb.selector.queryAncestor(e,".ui-form");var c=bb.selector.queryAncestor(f,".ui-wizard-body-selected");if(d){c=bb.selector.queryAncestor(f,".ap-container-content")}phe.common.hide(f);var b=bb.selector.query(c,".ap-n2fa-SVM-form-fallback");if(b!=null){var g=bb.selector.query(b,".ap-button-extra");if(g!=null){g.click()}phe.common.show(b)}};absa.n2fa.onSendTVNBtnClick=function(b){var c=bb.selector.queryAncestor(b,".ui-form");absa.n2fa.goToStepAfterSecurityVerification(c)};absa.n2fa.onCancelBtnClickSVM=function(e,d){if(d==null){d=false}if(d){location.href=absa.CONTEXT+"?uniq="+new Date().getTime()}else{var g=bb.selector.queryAncestor(e,".ui-form");if(g){g.reset();if(g._trackUnconfirmedChanges){g._changed=false}}var b=bb.selector.queryAncestor(e,".ui-modal");if(b){phe.modal.hideModal()}else{var f=bb.selector.queryAncestor(e,".p-gadget");var c=bb.getControllerFromView(f);if(c){c.minimize();f.focus()}}}};absa.n2fa.onCancelBtnClickTVM=function(c){var b=bb.selector.queryAncestor(c,".ui-wizard");phe.wizard.selectStepAbsolute(b,0);absa.n2fa.removeTVMStep(c)};absa.n2fa.removeTVMStep=function(e){var c=bb.selector.queryAncestor(e,".ui-wizard");if(c){var b=bb.selector.query(c,".ui-wizard-body--TVN");var d=bb.selector.query(c,".ui-wizard-head--TVN");if(d){d.parentNode.removeChild(d)}if(b){b.parentNode.removeChild(b)}}};absa.n2fa.onDeviceAvailableCheckNoButtonClick=function(c){var b=bb.selector.queryAncestor(c,".ap-SC2-deviceCheckContent");var d=bb.selector.queryAncestor(c,".ap-SC2-deviceCheckForm");if(bb.html.hasClass(d,"ui-form-ioError")){phe.modal.hideModal()}else{phe.common.setAttribute(b,"proxyurl",absa.CONTEXT+"/proxy?pipe=genericEmptyResponse&xslFile=accessControl/SureCheck2-manageDevice&mode=deviceUnavailable");absa.lazyLoadNode(b,true)}};absa.n2fa.onDeviceUnavailableReasonCheckBoxClick=function(d){var e=bb.selector.queryAncestor(d,".ap-SC2-deviceUnavailableForm");var c=bb.selector.queryAll(e,".ui-checkBox");for(var b=0;b<c.length;b++){c.click}};absa.n2fa.onDeviceUnavailableonNextButtonClick=function(e){var c=bb.selector.queryAncestor(e,".ap-SC2-deviceCheckContent");var g=bb.selector.queryAncestor(e,".ap-SC2-deviceUnavailableForm");var d=bb.selector.query(g,".ap-SC2-deviceUnavailableReasons");if(phe.radioGroup.isAnyRadioItemsChecked(d)){var b=bb.selector.query(absa.gadgets.linkDelinkDevices.gadget.body,".ap-linkDelinkDevice-primaryDeviceManufacturer");var f="";if(b){f=phe.hiddenField.getValue(b)}if(absa.CLIENTTYPE=="B"){phe.common.setAttribute(c,"proxyurl",absa.CONTEXT+"/proxy?pipe=genericWebservice&ws=DeviceManagementWebService&action=removeDevice&view=deviceUnavailable&reason="+phe.radioGroup.getValue(d)+"&manufacturer="+f);absa.lazyLoadNode(c,true)}else{phe.common.setAttribute(c,"proxyurl",absa.CONTEXT+"/proxy?pipe=genericEmptyResponse&xslFile=accessControl/SureCheck2-manageDevice&mode=deviceUnavailableForNonBusiness");absa.lazyLoadNode(c,true)}}else{var h=bb.selector.query(g,".ap-SC2-reasonRequiredError");phe.common.show(h)}};absa.n2fa.onDeviceUnavailableRadioGroupClick=function(b){var c=bb.selector.queryAncestor(b,".ap-SC2-deviceUnavailableForm");var d=bb.selector.query(c,".ap-SC2-reasonRequiredError");phe.common.hide(d)};absa.n2fa.onDeviceUnavailableForgotPasscodeLinkClick=function(c){var b=bb.selector.queryAncestor(c,".ap-SC2-content");phe.common.setAttribute(b,"proxyurl",absa.CONTEXT+"/proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=forgotPasscode");absa.lazyLoadNode(b,true)};absa.n2fa.onDeviceUnavailableForgotSecurityCodeLinkClick=function(c){var b=bb.selector.queryAncestor(c,".ap-SC2-content");phe.common.setAttribute(b,"proxyurl",absa.CONTEXT+"/proxy?pipe=genericEmptyResponse&xslFile=SureCheck2/general&mode=forgotSecurityCode");absa.lazyLoadNode(b,true)};absa.n2fa.onDeviceUnavailableConfirmButtonClick=function(g){var h=bb.selector.queryAncestor(g,".ap-SC2-credsForm");var f=bb.selector.query(h,".ap-SC2-ATMPin");var d=phe.textBox.getValue(f);var b=phe.form.getAttribute(h,"context");var e=phe.form.getAttribute(h,"proxy");var c=bb.selector.queryAncestor(h,".ap-SC2-content");phe.textBox.setAttribute(f,"required","true");if(absa.form.validate(h)){phe.loadingMessage.showLoadingMessage(c);absa.xd.makeXDRequest(b,e,"/registration/j_pin_block_cache","PIN="+d,absa.n2fa.validateEncipherResponse)}};absa.n2fa.validateEncipherResponse=function(h){var l=bb.selector.query(document.body,".ap-SC2-credsForm");var f=bb.selector.query(l,".ap-SC2-ATMCardNumber");var d=bb.selector.query(l,".ap-SC2-ATMPin");var e=bb.selector.query(l,".ap-SC2-passcode");var b=phe.form.getAttribute(l,"context");var k=phe.form.getAttribute(l,"proxy");var g=bb.selector.queryAncestor(l,".ap-SC2-content");phe.loadingMessage.hideLoadingMessage(g);if(h.success){var c=absa.CONTEXT+"/proxy?pipe=genericWebservice&ws=DeviceManagementWebService&action=validatePrimaryDevicePasscodeAndATMPin";c+="&primaryDevicePasscode="+phe.textBox.getValue(e)+"&atmCardNo="+phe.textBox.getValue(f)+"&correlationId="+h.correlationId;phe.loadingMessage.showLoadingMessage(g);absa.io.makeRequest(c,function(n){phe.loadingMessage.hideLoadingMessage(g);if(!n.errors.length){var r=bb.html.createElementFromString(n.text);if(r){var q=bb.selector.query(r,".ap-error");if(q){var m=bb.selector.query(l,".ap-error");m.parentNode.replaceChild(q,m);var p=bb.selector.query(r,".ap-errorCode");if(phe.hiddenField.getValue(p)=="100"){var o=bb.selector.query(l,".ap-button-extra");phe.common.hide(o)}absa.n2fa.clearTextBoxAndMakeRequiredAgain(f);absa.n2fa.clearTextBoxAndMakeRequiredAgain(d);absa.n2fa.clearTextBoxAndMakeRequiredAgain(e)}else{phe.textBox.setAttribute(d,"required","false");phe.textBox.setValue(d,"");absa.n2fa.goToStepAfterSecurityVerification(l)}}}else{phe.form.displayIOErrorMessage(l,true)}})}else{var j=bb.selector.query(l,".ap-registration-pinBlockError");phe.common.show(j)}};absa.n2fa.clearTextBoxAndMakeRequiredAgain=function(b){phe.textBox.setAttribute(b,"required","");phe.textBox.setValue(b,"");phe.textBox.setAttribute(b,"required","true")};absa.n2fa.OnValidateSecurityCodeButtonClick=function(d){var e=bb.selector.queryAncestor(d,".ui-form--SecurityCodeForm");var c=bb.selector.query(e,".ap-SC2-securityCode");if(absa.form.validate.checkElement(c)){var b=absa.CONTEXT+"/proxy?pipe=genericWebservice&ws=DeviceManagementWebService&action=validateSecurityCode&securityCode="+phe.textBox.getValue(c);phe.loadingMessage.showLoadingMessage(e);absa.io.makeRequest(b,function(g){phe.loadingMessage.hideLoadingMessage(e);if(!g.errors.length){var k=bb.html.createElementFromString(g.text);if(k){var j=bb.selector.query(k,".ap-SC2-error");if(j){oErrorTmp=bb.selector.query(e,".ap-SC2-error");oErrorTmp.parentNode.replaceChild(j,oErrorTmp);absa.n2fa.clearTextBoxAndMakeRequiredAgain(c);var h=bb.selector.query(k,".ap-remainingAttempts");if(phe.hiddenField.getValue(h)=="0"){var f=bb.selector.query(e,".ap-SC2-validateButton");phe.common.hide(f)}}else{absa.n2fa.goToStepAfterSecurityVerification(e)}}}else{phe.form.displayIOErrorMessage(e,true)}})}else{c.focus()}};absa.n2fa.onDeviceAvailableCheckYesButtonClick=function(d,g){var f=bb.selector.queryAncestor(d,".ap-SC2-deviceCheckForm");var b=bb.selector.queryAncestor(d,".ui-wizard");var e=phe.wizard.getCurrentStepBody(b);var c=absa.CONTEXT+"/proxy?pipe=genericWebservice&ws=DeviceManagementWebService&mode=makeDevicePrimary&action="+g;phe.loadingMessage.showLoadingMessage(f);absa.io.makeRequest(c,function(j){phe.loadingMessage.hideLoadingMessage(f);if(!j.errors.length){if(j.text){var l=bb.html.createElementFromString(j.text);var h=bb.selector.query(l,".ap-TVM-form");var k=bb.selector.query(l,".ap-n2fa-SVM-form");if(h||k){absa.form.wizardBridge.handleResponse(e,j,"","",true)}else{f.parentNode.replaceChild(l,f)}}}})};absa.n2fa.checkForSecurityVerificationMAYBENOTNEEDED=function(d){var b=bb.selector.queryAncestor(d,".ui-wizard");var f=phe.wizard.getCurrentStepBody(b);var e=bb.selector.queryAncestor(d,".ui-form");var c=absa.CONTEXT+"/proxy?pipe=genericWebservice&ws=DeviceManagementWebService&action=changePrimaryDevice";phe.loadingMessage.showLoadingMessage(e);absa.io.makeRequest(c,function(j){phe.loadingMessage.hideLoadingMessage(e);if(!j.errors.length){if(j.text){var l=bb.html.createElementFromString(j.text);var h=bb.selector.query(l,".ap-TVM-form");var g=bb.selector.query(l,".securityCodeVerificationNeeded");if(h){absa.form.wizardBridge.handleResponse(f,j)}else{if(g){var k=absa.CONTEXT+"/proxy?pipe=genericEmptyResponse&xslFile=accessControl/SureCheck2-manageDevice&mode=securityCodeVerificationNeeded";absa.io.makeRequest(k,function(m){absa.form.wizardBridge.handleResponse(f,m)})}else{}}}}})};absa.n2fa.goToLastStep=function(m){var d=bb.selector.queryAncestor(m,".ui-wizard");var f=phe.wizard.getStepsCount(d)-1;var j=bb.selector.queryAll(d,".ui-wizard-body");var c=j[f-1];var h=bb.selector.query(c,".ui-form");var n=bb.selector.query(d,".ui-wizard-body-selected");var g=n.previousSibling;var l=bb.selector.query(g,".ui-form");phe.wizard.selectStep(g);if(phe.common.getAttribute(l,"data-special2faCase")=="true"){bb.html.fireEvent(l,"submit",true,true)}else{var k=bb.selector.query(h,".ap-TVM-form");if(k){bb.html.fireEvent(l,"submit",true,true)}else{bb.html.fireEvent(h,"submit",true,true)}var e=bb.selector.query(d,".ui-wizard-buttons");if(e){var b=bb.selector.query(e,".ap-icon-price");if(b){phe.common.show(b)}}}};absa.n2fa.checkForSecurityVerification=function(e,d){var b=bb.selector.queryAncestor(e,".ui-wizard");var g=phe.wizard.getCurrentStepBody(b);var f=bb.selector.queryAncestor(e,".ui-form");var h;if(d){h="changePrimaryDevice"}else{h="generateSecondFactorEnrollmentScanCode"}var c=absa.CONTEXT+"/proxy?pipe=genericEmptyResponse&xslFile=accessControl/SureCheck2-manageDevice&function="+h;phe.loadingMessage.showLoadingMessage(f);absa.io.makeRequest(c,function(j){phe.loadingMessage.hideLoadingMessage(f);if(!j.errors.length){if(j.text){var k=bb.html.createElementFromString(j.text);absa.form.wizardBridge.handleResponse(g,j)}}})};var absa=window.absa||{};absa.intercept=absa.intercept||{};absa.intercept.linkDelinkDevices=absa.intercept.linkDelinkDevices||{};absa.intercept.linkDelinkDevices.nickname=null;absa.intercept.linkDelinkDevices.manufacturer=null;absa.intercept.linkDelinkDevices.model=null;absa.intercept.linkDelinkDevices.IMEISerialNumber=null;absa.intercept.clientResidentType="";absa.intercept.init=function(){if(absa.ENABLESURECHECK2=="true"&absa.SURECHECK2STATEDATE=="2000-01-01"&absa.N2FAIDNOCHECK=="true"){alert("This VALID 2FA-eligible account does not have an ID number on the HOST table.\nDo not use this account for 2FA testing unless you add an ID number on the host table !!!")}if(absa.SIMSWAPPED=="false"){if(absa.ENABLESURECHECK2=="true"&absa.ENABLESURECHECK2LAUNCHMODAL=="true"&Number(absa.SURECHECK2STATE)==0&absa.SURECHECK2SNOOZED=="false"){absa.index.n2faMustUpgradeModal()}else{if(absa.ENABLESURECHECK2=="true"&(Number(absa.SURECHECK2STATE)==10|Number(absa.SURECHECK2STATE)==11)&absa.SURECHECK2SNOOZED=="false"){absa.index.n2faMustUpgradeModal()}else{if(absa.ENABLESURECHECK2=="true"&(Number(absa.SURECHECK2STATE)==12|Number(absa.SURECHECK2STATE)==13)){absa.index.n2faMustUpgradeModal()}else{if(absa.ENABLESURECHECK2=="true"&Number(absa.SURECHECK2STATE)==14&Number(absa.SURECHECK2STATEDAYSLEFT)==0&absa.SURECHECK2SNOOZED=="false"){absa.index.n2faMustUpgradeModal()}else{absa.intercept.checkGenModalA()}}}}}else{absa.intercept.checkGenModalA()}};absa.intercept.checkGenModalA=function(){if((absa.GENMODALA_ENABLED=="true")&(absa.GENMODALA_SPECIALCHECK_ENABLED=="true")&(eval(absa.GENMODALA_SPECIALCHECK_JSFUNC)==true)){absa.GENMODALA_ENABLED="false"}if(absa.GENMODALA_ENABLED=="true"){if((absa.GENMODALA_BIS.indexOf(absa.CLIENTTYPE)>-1)&(absa.GENMODALA_SBU.indexOf(absa.SBU)>-1)&(absa.LIMITS.substring(2)!="NNN")&(absa.OPERATORTYPE=="M")&(absa.TRANSACTIONALUSER=="true")){var bMustModalShow=true;if(absa.GENMODALA_READCONFIRM=="true"|absa.GENMODALA_DONTSHOWAGAIN=="true"){if(absa.GENMODALA_HASCLIENTINDICATEDYET!=null&&absa.GENMODALA_HASCLIENTINDICATEDYET=="true"){bMustModalShow=false}}if(bMustModalShow){var oModal=bb.selector.query(window.document,".ap-genericModalA-modal");var oModalInner=bb.selector.query(oModal,".ui-modal");oModalInner.setAttribute("style","width:634px");phe.modal.showModal("0.5",oModal,document.body,true,0,120)}else{absa.intercept.checkGenModalB()}}else{absa.intercept.checkGenModalB()}}else{absa.intercept.checkGenModalB()}};absa.intercept.checkGenModalB=function(){if((absa.GENMODALB_ENABLED=="true")&(absa.GENMODALB_SPECIALCHECK_ENABLED=="true")&(eval(absa.GENMODALB_SPECIALCHECK_JSFUNC)==true)){absa.GENMODALB_ENABLED="false"}if(absa.GENMODALB_ENABLED=="true"){if((absa.GENMODALB_BIS.indexOf(absa.CLIENTTYPE)>-1)&(absa.GENMODALB_SBU.indexOf(absa.SBU)>-1)&(absa.LIMITS.substring(2)!="NNN")&(absa.OPERATORTYPE=="M")&(absa.TRANSACTIONALUSER=="true")){var bMustModalShow=true;if(absa.GENMODALB_READCONFIRM=="true"|absa.GENMODALB_DONTSHOWAGAIN=="true"){if(absa.GENMODALB_HASCLIENTINDICATEDYET!=null&&absa.GENMODALB_HASCLIENTINDICATEDYET=="true"){bMustModalShow=false}}if(bMustModalShow){var oModal=bb.selector.query(window.document,".ap-genericModalB-modal");var oModalInner=bb.selector.query(oModal,".ui-modal");oModalInner.setAttribute("style","width:634px");phe.modal.showModal("0.5",oModal,document.body,true,0,120)}else{absa.intercept.isClientCompliantCheck()}}else{absa.intercept.isClientCompliantCheck()}}else{absa.intercept.isClientCompliantCheck()}};absa.intercept.checkDeviceAlert=function(){if(absa.ENABLEOLDLINKDEVICEMODAL=="true"){var b="proxy?pipe=genericWebservice&ws=PortfolioWebService&action=getLinkDeLinkDevices&mode=checkPendingDevices";absa.io.makeRequest(b,function(f){if(!f.errors.length){var e=bb.html.createElementFromString(f.text);if(e){absa.intercept.linkDelinkDevices.nickname=phe.common.getAttribute(e,"nickname");absa.intercept.linkDelinkDevices.manufacturer=phe.common.getAttribute(e,"manufacturer");absa.intercept.linkDelinkDevices.model=phe.common.getAttribute(e,"model");absa.intercept.linkDelinkDevices.IMEISerialNumber=phe.common.getAttribute(e,"IMEISerialNumber");var c=document.getElementById("linkDelinkDevicesModal");phe.modal.showModal(0.5,c,document.body,true);var d=bb.selector.queryAll(window.document,".ap-linkDelinkDevice-deviceCount");phe.inputReadOnlyText.setValue(d[1],phe.common.getAttribute(e,"iPendingDevices"))}else{absa.freeCover.init()}}})}else{absa.freeCover.init()}};absa.intercept.onLinkDeviceClick=function(){var b="proxy?pipe=genericEmptyResponse&xslFile=LinkDelinkDevices/linkDevice&fromView=linkOnLogin&step=1&nickname="+encodeURIComponent(absa.intercept.linkDelinkDevices.nickname)+"&manufacturer="+encodeURIComponent(absa.intercept.linkDelinkDevices.manufacturer)+"&model="+encodeURIComponent(absa.intercept.linkDelinkDevices.model)+"&IMEISerialNumber="+encodeURIComponent(absa.intercept.linkDelinkDevices.IMEISerialNumber);absa.modal.loadModal(b,absa.locale["Portfolio/LinkDelinkDevices/Label/LinkDeviceToProfile"],null,null)};absa.intercept.checkIfIEUpgradeNeeded=function(){var d=absa.BROWSERINFO.substring(absa.BROWSERINFO.indexOf("IE"),absa.BROWSERINFO.length);var c=d.substring(0,d.indexOf(";"));var b=Number(c.substring(c.indexOf(" "),c.length));if(bb.browser.ie&&b<10&&(absa.ENABLEIEMODAL=="true")){var e="proxy?pipe=genericEmptyResponse&xslFile=intercept/IEUpgradeModal";absa.io.makeRequest(e,function(j){if(!j.errors.length){var h=bb.html.createElementFromString(j.text);var g=bb.selector.query(h,".tmpInterceptBody");var f=g.value;var k=bb.selector.query(h,".interceptBody");k.innerHTML=f;phe.modal.showModal(0.5,h,document.body,true)}else{absa.intercept.checkIfTransactionalUser()}})}else{absa.intercept.checkIfTransactionalUser()}};absa.intercept.onIEUpgradeModalClose=function(){absa.intercept.checkIfTransactionalUser()};absa.intercept.checkIfTransactionalUser=function(){if(absa.TRANSACTIONALUSER=="false"){var b="proxy?pipe=genericWebservice&ws=PortfolioWebService&action=processTransactionalSnooze&actionType=E&mode=enquire";absa.io.makeRequest(b,function(e){var h=bb.html.createElementFromString(e.text);var d=bb.selector.query(h,".ap-processTransactionalSnooze-result");var c=phe.hiddenField.getValue(d);if(c=="true"){var g="proxy?pipe=genericEmptyResponse&xslFile=NonTransactional/convert-step1&mode=modal";var f=absa.locale["NonTransactional/General/Label/AbsaOnlineConversion"];absa.modal.loadModal(g,f)}else{absa.intercept.checkIfPrivateOrWealthUser()}})}else{absa.intercept.checkIfPrivateOrWealthUser()}};absa.intercept.checkIfPrivateOrWealthUser=function(){if(((absa.SBU=="E")||(absa.SBU=="B"))&&absa.ENABLEPRIVATEWEALTHMODAL=="true"){absa.intercept.checkSnoozeStatus("PrivateWealth",absa.intercept.showPrivateWealthModal)}else{absa.intercept.loadUSSDModal()}};absa.intercept.checkSnoozeStatus=function(d,c){var b="proxy?pipe=genericWebservice&ws=PortfolioWebService&action=processTransactionalSnooze&actionType=E&mode=enquire&function="+d;absa.io.makeRequest(b,function(g){var h=bb.html.createElementFromString(g.text);var f=bb.selector.query(h,".ap-processTransactionalSnooze-result");var e=phe.hiddenField.getValue(f);if(e=="true"){c()}else{absa.intercept.loadUSSDModal()}})};absa.intercept.onPrivateWealthModalClose=function(){absa.intercept.performUserSnooze("PrivateWealth","OPTFOREVER",absa.intercept.loadUSSDModal)};absa.intercept.performUserSnooze=function(e,b,d){var c="proxy?pipe=genericWebservice&ws=PortfolioWebService&action=processTransactionalSnooze&actionType=I&mode=insert&function="+e+"&snoozePeriod="+b;absa.io.makeRequest(c,function(h){var j=bb.html.createElementFromString(h.text);var g=bb.selector.query(j,".ap-processTransactionalSnooze-result");var f=phe.hiddenField.getValue(g);if(f=="true"){d()}else{absa.intercept.loadUSSDModal()}})};absa.intercept.showUssdModal;absa.intercept.loadUSSDModal=function(){absa.io.makeRequest("proxy?pipe=genericEmptyResponse&xslFile=intercept/ussdModal&mode=checkIfUssdModalIsEnabled",function(c){if(!c.errors.length){var b=bb.html.createElementFromString(c.text);if(b.innerHTML=="true"){absa.intercept.showUssdModal()}else{absa.intercept.checkDeviceAlert()}}else{absa.intercept.checkDeviceAlert()}})};absa.intercept.showPrivateWealthModal=function(){var b;if(absa.SBU=="E"){b="proxy?pipe=genericEmptyResponse&xslFile=intercept/privateBankingModal"}else{b="proxy?pipe=genericEmptyResponse&xslFile=intercept/wealthBankingModal"}absa.io.makeRequest(b,function(f){if(!f.errors.length){var e=bb.html.createElementFromString(f.text);var d=bb.selector.query(e,".tmpInterceptBody");var c=d.value;var g=bb.selector.query(e,".interceptBody");g.innerHTML=c;phe.modal.showModal(0.5,e,document.body,true)}else{absa.intercept.loadUSSDModal()}})};absa.intercept.showUssdModal=function(){absa.io.makeRequest("proxy?pipe=genericEmptyResponse&xslFile=intercept/ussdModal&mode=showUssdModal",function(e){if(!e.errors.length){var d=bb.html.createElementFromString(e.text);var c=bb.selector.query(d,".tmpInterceptBody");var b=c.value;var f=bb.selector.query(d,".interceptBody");f.innerHTML=b;phe.modal.showModal(0.5,d,document.body,true)}else{absa.intercept.checkDeviceAlert()}})};absa.intercept.onUnderstandProcessButtonClick=function(){phe.modal.hideModal();absa.intercept.checkDeviceAlert()};absa.intercept.isClientCompliantCheck=function(){if(absa.CLIENTTYPE=="B"){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=ClientComplianceWebService&action=getClientComplianceStatus",function(c){var e=bb.html.createElementFromString(c.text);var b=bb.selector.query(e,".ap-getClientComplianceStatustResponseDiv");var d=b.getAttribute("compliant");if(d=="false"){absa.modal.loadModal("proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=getPersonalInformation&view=clientComplianceStep1&cifKey="+absa.CIFKEY+"&mode=attestLater","FICA Alert")}else{absa.intercept.checkIfIEUpgradeNeeded()}})}else{absa.io.makeRequest("proxy?pipe=genericWebservice&ws=ClientComplianceWebService&action=getClientComplianceStatus",function(h){var m=bb.html.createElementFromString(h.text);var k=bb.selector.query(m,".ap-getClientComplianceStatustResponseDiv");var d=k.getAttribute("compliant");var j=k.getAttribute("cifAddressSource");var g=k.getAttribute("cifAddressAddressLine1");var f=k.getAttribute("cifAddressAddressLine2");var p=k.getAttribute("cifSuburb");var e=k.getAttribute("cifCity");var l=k.getAttribute("cifPostalCode");var u=k.getAttribute("cifCountry");var v=k.getAttribute("goldenSourceAddressSource");var r=k.getAttribute("goldenSourceAddressAddressLine1");var q=k.getAttribute("goldenSourceAddressAddressLine2");var t=k.getAttribute("goldenSourceSuburb");var n=k.getAttribute("goldenSourceCity");var b=k.getAttribute("goldenSourcePostalCode");var c=k.getAttribute("goldenSourceCountry");var o="";if(!v.length){o=absa.locale["Common/General/Label/None"]}if(d=="false"){absa.modal.loadModal("proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=getPersonalInformation&view=clientComplianceStep1&cifKey="+absa.CIFKEY+"&mode=attestLater&refreshModal=true&clientType=retail&cifAddressSource="+j+"&cifAddressAddressLine1="+g+"&cifAddressAddressLine2="+f+"&cifSuburb="+p+"&cifCity="+e+"&cifCountry="+u+"&cifPostalCode="+l+"&goldenSourceAddressSource="+v+"&goldenSourceAddressAddressLine1="+r+"&goldenSourceAddressAddressLine2="+q+"&goldenSourceSuburb="+t+"&goldenSourceCity="+n+"&goldenSourceCountry="+c+"&goldenSourcePostalCode="+b+"&noGoldenSourceAddress="+o)}else{absa.intercept.checkIfIEUpgradeNeeded()}})}};var absa=window.absa||{};absa.creditLimit=absa.creditLimit||{};absa.creditLimit.globals=absa.creditLimit.globals||{};absa.creditLimit.globals.dCreditMaxLimit=0;absa.VCL_CREDITLIMIT_AMOUNT=0;absa.VCL_CREDITLIMIT_MONTHS=0;absa.creditLimit.creditLimitCheck=function(){if(absa.creditLimit.globals.dCreditMaxLimit<-1){}else{if(absa.creditLimit.globals.dCreditMaxLimit==0){absa.io.makeRequest("proxy?pipe=genericWebservice&ws=CreditLimitsWebService&action=getCreditLimits&view=getMaxLimit",function(b){if(!b.errors.length){try{var d=JSONRequest.parse(absa.util.stripTag(b.text));absa.creditLimit.globals.dCreditMaxLimit=parseFloat(d.maxLimit);if(absa.creditLimit.globals.dCreditMaxLimit>0){absa.VCL_CREDITLIMIT_AMOUNT=absa.creditLimit.globals.dCreditMaxLimit;gadgets.pubsub.publish("showHide:offersSpoofContainer","SHOW");absa.index.plInitialised=1;phe.common.show(document.getElementById("gadget-placeholder-l2-g3010136"));phe.common.show(document.getElementById("gadget-placeholder-l5-g3010136"))}}catch(c){absa.creditLimit.globals.dCreditMaxLimit=0}}setTimeout(function(){absa.creditLimit.updateBalancesAndLimits(absa.creditLimit.globals.dCreditMaxLimit)},2000)})}else{setTimeout(function(){absa.creditLimit.updateBalancesAndLimits(absa.creditLimit.globals.dCreditMaxLimit)},2000)}if(absa.creditLimit.globals.dCreditMaxLimit==0){absa.creditLimit.globals.dCreditMaxLimit=-1}}};absa.creditLimit.updateBalancesAndLimits=function(b){if(b==null||isNaN(b)){b=0}absa.index.refreshUpdaters(false);absa.util.observer.publish("load-creditLimits-maxLimit",b)};absa.freeCover=absa.freeCover||{};absa.freeCover.freeCoverLife=absa.freeCover.freeCoverLife||{};absa.freeCover.init=function(){absa.freeCover.freeCoverLifeApply()};absa.freeCover.onCheckClick=function(){var d="proxy?pipe=genericWebservice&ws=ApplyForNewPolicyWebService&action=freeCoverStatus&status=D";var b=false;var c="";absa.io.makeRequest(d,function(g){if(!g.errors.length){var h=bb.html.createElementFromString(g.text);if(bb.html.hasClass(h,"ap-applyFreeCoverDiv-Status")){var e=bb.selector.queryAll(h,".ap-applyFreeCover-Status");if(e.length>0){for(var f=0;f<e.length;f++){c=phe.hiddenField.getValue(e[f])}}}}})};absa.freeCover.freeCoverLifeApply=function(){var c=absa.FREECOVER_LIMIT;var g=absa.CLIENTTYPE;if(g=="I"||g=="S"){var h=absa.locale["AFS/ApplyFreeCover/Label/ImformationMsg"];var f="proxy?pipe=genericWebservice&ws=ApplyForNewPolicyWebService&action=getFreeCoverStatus";var b=false;var d;var j;var e=c;absa.io.makeRequest(f,function(m){if(!m.errors.length){var o=bb.html.createElementFromString(m.text);if(bb.html.hasClass(o,"ap-applyFreeCoverDiv-Status")){var n=bb.selector.query(o,".ap-applyFreeCover-Status");var k=bb.selector.query(o,".ap-applyFreeCover-countFreeCoverApplied");if(k){e=phe.hiddenField.getValue(k)}if(n){d=phe.hiddenField.getValue(n);if((Number(c)>0)&&(Number(e)<Number(c))){if(d=="D"||d=="A"||d=="NA"){}else{var l=bb.selector.query(o,".ap-applyFreeCover-freeCoverLimit");phe.hiddenField.setValue(l,c);absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=freecover/freeCover",h,"","");absa.freeCover.hideModalPrint();absa.freeCover.hideModalClose()}}}}}})}};absa.freeCover.hideModalPrint=function(){var b=bb.selector.query(window.document,".ui-modal-printButton");phe.Element.prototype.setAttribute(b,"class","ui-modal-printButton ap-common-hide")};absa.freeCover.hideModalClose=function(){var b=bb.selector.query(window.document,".ui-modal-closeButton");phe.Element.prototype.setAttribute(b,"class","ui-modal-closeButton ap-common-hide")};absa.freeCover.onInceptionClick=function(){phe.modal.hideModal();gadgets.pubsub.publish("goTo:apply/insurance/applyInsurance",{productType:"Free"})};absa.callMeBack=absa.callMeBack||{};absa.callMeBack.selectTypeOfQuery=function(e,b,d){var c=b;var d=d;absa.modal.loadModal("proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getPortfolioInfo&productType="+d+"&queryType="+c,absa.locale["AFS/General/Label/CallMeBack"],"","");absa.callMeBack.hideModalPrint()};absa.callMeBack.onCallMeBackWills=function(b){absa.modal.loadModal("proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getPortfolioInfo&view=will",absa.locale["AFS/General/Label/CallMeBack"],"","");absa.callMeBack.hideModalPrint()};absa.callMeBack.hideModalPrint=function(){var b=bb.selector.query(window.document,".ui-modal-printButton");phe.Element.prototype.setAttribute(b,"class","ui-modal-printButton ap-common-hide")};absa.callMeBack.selectType=function(f){var d=bb.selector.queryAncestor(f,".ap-callMeBack-Root");var g=bb.selector.query(d,".ap-callMeBack-cellTextBox");var c=phe.textBox.getValue(g);var b=bb.selector.query(d,".ap-callMeBack-emailTextBox");var e=phe.select.getValue(f);if("Telephone"==e){phe.textBox.setAttribute(g,"required","true");phe.textBox.setAttribute(b,"required","false")}else{phe.textBox.setAttribute(g,"required","false");phe.textBox.setAttribute(b,"required","true")}};absa.callMeBack.limitCallMe=function(e,b,d,c){if(c=="FuneralApply"&&absa.index.countFuneralApply==0){absa.modal.loadModal("proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getPortfolioInfo&productType="+d+"&queryType="+b+"&productName="+c,absa.locale["AFS/General/Label/CallMeBack"],"","");absa.callMeBack.hideModalPrint()}else{if(c=="FuneralManage"&&absa.index.countFuneralManage==0){absa.modal.loadModal("proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getPortfolioInfo&productType="+d+"&queryType="+b+"&productName="+c,absa.locale["AFS/General/Label/CallMeBack"],"","");absa.callMeBack.hideModalPrint()}else{if(c=="UltimateProtectorApply"&&absa.index.countUPApply==0){absa.modal.loadModal("proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getPortfolioInfo&productType="+d+"&queryType="+b+"&productName="+c,absa.locale["AFS/General/Label/CallMeBack"],"","");absa.callMeBack.hideModalPrint()}else{if(c=="UltimateProtectorManage"&&absa.index.countUPManage==0){absa.modal.loadModal("proxy?pipe=genericWebservice&ws=ManagePolicyDetailsWebService&action=getPortfolioInfo&productType="+d+"&queryType="+b+"&productName="+c,absa.locale["AFS/General/Label/CallMeBack"],"","");absa.callMeBack.hideModalPrint()}else{absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=Keystone/Apply/Life/callMeAssistance")}}}}};absa.callMeBack.increaseCounter=function(d){var b=bb.selector.query(d,".ap-life-callMe");var c=phe.hiddenField.getValue(b);if(c=="FuneralApply"){absa.index.countFuneralApply++}else{if(c=="FuneralManage"){absa.index.countFuneralManage++}else{if(c=="UltimateProtectorApply"){absa.index.countUPApply++}else{if(c=="UltimateProtectorManage"){absa.index.countUPManage++}}}}};absa.simSwopHold=absa.simSwopHold||{};absa.simSwopHold.initSimSwopHold=function(){gadgets.pubsub.subscribe("simSwopHold-form-loaded",function(b){absa.simSwopHold.updateButtons(b)})};absa.simSwopHold.updateButtons=function(f){var b=bb.selector.queryAncestor(f,".ui-wizard");if(b){var e=bb.selector.query(b,".ui-wizard-buttons");if(e){var c=bb.selector.query(e,".ap-icon-help");if(c){bb.html.replaceClass(c,"ap-icon-help","ap-icon-help-inactive")}var d=bb.selector.query(e,".ap-icon-price");if(d){phe.common.hide(d)}}}};absa.advisorService=absa.advisorService||{};var onReturn;absa.advisorService.hideModalPrint=function(){var b=bb.selector.query(window.document,".ui-modal-printButton");phe.Element.prototype.setAttribute(b,"class","ui-modal-printButton ap-common-hide")};absa.advisorService.selectAdvisorForNewbusiness=function(f,b){onReturn=f;var e=".ap-applyNewBusinessRA-referenceNumber";var d=bb.selector.query(window.document,e);var c=bb.selector.query(window.document,".ap-applyNewBusinessRA-withCalculator");absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=abcap/ApplyNewBusinessForRA/advisorServiceRA&actionFlag="+f+"&referenceNumber="+d.value+"&withCalculator="+c.value,absa.locale["ABCAP/General/Label/Advisor"],"","")};absa.advisorService.selectAdvisorForRAaddition=function(w,an){onReturn=an;var u="proxy?pipe=genericEmptyResponse&xslFile=abcap/ApplyNewBusinessForRA/advisorServiceRA&actionFlag=addition";var U="";var z=bb.selector.query(w,".ap-additionForRA-rootForm");var aD=bb.selector.query(z,".ap-additionForRA-completionStatus");var Y=bb.selector.query(z,".ap-additionForRA-screenId");var az=bb.selector.query(z,".ap-additionRA-referenceNumber");var ag=bb.selector.query(z,".ap-additionRA-policyNumber");var aw=bb.selector.query(z,".ap-additionRA-clientName");var aA=bb.selector.query(z,".ap-additionForRA-clientNumber");var av=bb.selector.query(z,".ap-additionForRA-stockAccountNum");var aB=bb.selector.query(z,".ap-additionForRA-portfolioName");var ab=bb.selector.query(z,".ap-additionForRA-portfolioCode");var K=phe.hiddenField.getValue(aD);var H=phe.hiddenField.getValue(Y);var x=phe.hiddenField.getValue(az);var aa=phe.hiddenField.getValue(aA);var r=phe.hiddenField.getValue(av);var q=phe.hiddenField.getValue(aB);var aF=phe.hiddenField.getValue(ab);u=u+"&screenId="+H+"&referenceNumber="+x+"&isComplete="+K+"&clientNumber="+aa+"&stockAccountNum="+r+"&portfolioName="+q+"&fundCode="+aF;var ay="false";var aq="true";u=u+"&regularContribution="+ay+"&lumpsumContribution="+aq;if(H==1){var G=phe.hiddenField.getValue(aw);var A=phe.hiddenField.getValue(ag);u=u+"&clientName="+G+"&policyNumber="+A;var F="false";var b="false";var ax="";var ad="0";var p="";var j="";var ap="";var aC="";var k="";var aG="";var h="";if(aq=="true"){var v=bb.selector.query(z,".ap-additionRA-paymentMethodRadio");var S=phe.radioGroup.getValue(v);var Z=bb.selector.query(z,".ap-additionRA-sourceOfFunds");var C=bb.selector.query(z,".ap-additionRA-Amount");var ac=bb.selector.query(z,".ap-additionRA-beneficiaryReference");var au=bb.selector.query(z,".ap-additionRA-paymntDt");ax=phe.select.getValue(Z);ad=phe.textBox.getValue(C);p=phe.inputReadOnlyText.getValue(au);sBeneficiaryReference=phe.inputReadOnlyText.getValue(ac);u=u+"&sourceOfFunds="+ax+"&lumpsumAmount="+ad+"&paymentDebitDate="+p+"&beneficiaryReference="+sBeneficiaryReference;if(S=="OnceOff"){F="true";var l=bb.selector.query(z,".ap-additionRA-myReference");var al=bb.selector.query(z,".ap-additionRA-accountToBeDebitedLinked");j=phe.textBox.getValue(l);ap=phe.select.getValue(al);if(ap!=""){var B=ap.split(" - ");aC=B[0];k=B[1]}aG="ABSA";h="632005";u=u+"&myReference="+j+"&accountToBeDebitedOnceOffPayment="+ap+"&accountTypeOnceOffPayment="+aC+"&accountNumberOnceOffPayment="+k+"&bankNameOnceOffPayment="+aG+"&branchCodeOnceOffPayment="+h+"&methodPaymentOnline="+F+"&methodPaymentManualDeposit="+b}else{if(S=="Manual"){b="true";u=u+"&methodPaymentOnline="+F+"&methodPaymentManualDeposit="+b}}}}else{if(H==2){var G=phe.hiddenField.getValue(aw);var A=phe.hiddenField.getValue(ag);u=u+"&clientName="+G+"&policyNumber="+A;var F="false";var b="false";var ax="";var ad="0";var p="";var j="";var ap="";var aC="";var k="";var aG="";var h="";if(aq=="true"){var v=bb.selector.query(z,".ap-additionRA-paymentMethodRadio");var S=phe.radioGroup.getValue(v);var Z=bb.selector.query(z,".ap-additionRA-sourceOfFunds");var C=bb.selector.query(z,".ap-additionRA-Amount");var ac=bb.selector.query(z,".ap-additionRA-beneficiaryReference");var au=bb.selector.query(z,".ap-additionRA-paymntDt");ax=phe.hiddenField.getValue(Z);ad=phe.hiddenField.getValue(C);p=phe.hiddenField.getValue(au);sBeneficiaryReference=phe.hiddenField.getValue(ac);u=u+"&sourceOfFunds="+ax+"&lumpsumAmount="+ad+"&paymentDebitDate="+p+"&beneficiaryReference="+sBeneficiaryReference;if(S=="OnceOff"){F="true";var l=bb.selector.query(z,".ap-additionRA-myReference");var al=bb.selector.query(z,".ap-additionRA-accountToBeDebitedLinked");j=phe.hiddenField.getValue(l);ap=phe.hiddenField.getValue(al);if(ap!=""){var B=ap.split(" - ");aC=B[0];k=B[1]}aG="ABSA";h="632005";u=u+"&myReference="+j+"&accountToBeDebitedOnceOffPayment="+ap+"&accountTypeOnceOffPayment="+aC+"&accountNumberOnceOffPayment="+k+"&bankNameOnceOffPayment="+aG+"&branchCodeOnceOffPayment="+h+"&methodPaymentOnline="+F+"&methodPaymentManualDeposit="+b}else{if(S=="Manual"){b="true";u=u+"&methodPaymentOnline="+F+"&methodPaymentManualDeposit="+b}}}var ak=bb.selector.query(z,".ap-additionRA-quoteDate");var ao=bb.selector.query(z,".ap-additionRA-quoteDescription");var af=bb.selector.query(z,".ap-additionRA-quoteReference");var T=bb.selector.query(z,".ap-additionRA-fundCode");var I=bb.selector.query(z,".ap-additionRA-fundPercentage");var am=bb.selector.query(z,".ap-additionRA-monthlyContributionNetAmount");var N=bb.selector.query(z,".ap-additionRA-lumpsumContributionNetAmount");var O=bb.selector.query(z,".ap-additionRA-annualFee");var d=bb.selector.query(z,".ap-additionRA-initialFee");var g=bb.selector.query(z,".ap-additionRA-platformFee");var M=bb.selector.query(z,".ap-additionRA-presumedReturn");var m=bb.selector.query(z,".ap-additionRA-reduction");var ae=bb.selector.query(z,".ap-additionRA-actualReturn");var c=bb.selector.query(z,".ap-additionRA-investmentPeriod");var f=phe.inputReadOnlyText.getValue(ak);var o=phe.hiddenField.getValue(ao);var ah=phe.hiddenField.getValue(af);var Q=phe.hiddenField.getValue(T);var J=phe.hiddenField.getValue(I);var aE=phe.hiddenField.getValue(am);var X=phe.hiddenField.getValue(N);var V=phe.hiddenField.getValue(O);var W=phe.hiddenField.getValue(d);var e=phe.hiddenField.getValue(g);var P=phe.hiddenField.getValue(M);var t=phe.hiddenField.getValue(m);var E=phe.hiddenField.getValue(ae);var L=phe.hiddenField.getValue(c);u=u+"&quotationDate="+f+"&quoteDescription="+o+"&quoteReference="+ah+"&fundPercentage="+J+"&monthlyContributionNetAmount="+aE+"&lumpsumContributionNetAmount="+X+"&annualFee="+V+"&initialFee="+W+"&platformFee="+e+"&presumedReturn="+P+"&reduction="+t+"&actualReturn="+E+"&investmentPeriod="+L;var at=bb.selector.queryAll(z,".ap-additionRA-feesDetails");for(var D=0;D<at.length;D++){var ai=bb.selector.query(at[D],".ap-additionRA-categoryId");var aj=bb.selector.query(at[D],".ap-additionRA-typeId");var R=bb.selector.query(at[D],".ap-additionRA-totalPercentage");var y=phe.hiddenField.getValue(ai);var n=phe.hiddenField.getValue(aj);var ar=phe.hiddenField.getValue(R);u=u+"&feesNumber="+D+"&categoryId="+y+"&typeId="+n+"&totalPercentage="+ar}}}absa.modal.loadModal(u,absa.locale["ABCAP/General/Label/Advisor"],"","");absa.advisorService.hideModalPrint()};absa.advisorService.selectAdvisorForReview=function(ef,bf){var u="proxy?pipe=genericEmptyResponse&xslFile=abcap/ApplyNewBusinessForRA/advisorServiceRA&actionFlag=review";var ck="";onReturn=bf;var cI;var dw=bb.selector.query(ef,".ap-reviewRA-calculatorForm");var C=bb.selector.query(ef,".ap-reviewRA-calcResultForm");var aa=bb.selector.query(ef,".ap-reviewRA-personalDetails");var v=bb.selector.query(ef,".ap-reviewRA-investmentDetails");var b3=bb.selector.query(ef,".ap-reviewRA-document");var ev=bb.selector.query(ef,".ap-reviewRA-reviewAndAccept");if(dw!=null){cI=dw}else{if(C!=null){cI=C}else{if(aa!=null){cI=aa}else{if(v!=null){cI=v}else{if(b3!=null){cI=b3}else{if(ev!=null){cI=ev}}}}}}if(cI!=null){var ez=bb.selector.query(cI,".ap-reviewRA-screenId");var eC=bb.selector.query(cI,".ap-reviewRA-withCalculator");var ba=bb.selector.query(cI,".ap-reviewRA-referenceNumber");var at=bb.selector.query(cI,".ap-reviewRA-policyNumber");var d7=bb.selector.query(cI,".ap-reviewRA-retirementAgeCalc");var ce=bb.selector.query(cI,".ap-reviewRA-currentSavingsCalc");var o=bb.selector.query(cI,".ap-reviewRA-currentOtherMonthlyContriCalc");var P=bb.selector.query(cI,".ap-reviewRA-currentValueThisRACalc");var w=bb.selector.query(cI,".ap-reviewRA-lumpsumContributionCalc");var aA=bb.selector.query(cI,".ap-reviewRA-currentAgeCalc");var ak=bb.selector.query(cI,".ap-reviewRA-genderCalc");var bd=bb.selector.query(cI,".ap-reviewRA-periodPostRetirementCalc");var F=bb.selector.query(cI,".ap-reviewRA-monthlySalaryCalc");var aP=bb.selector.query(cI,".ap-reviewRA-cellPhoneCalc");var de=bb.selector.query(cI,".ap-reviewRA-firstNameCalc");var dO=bb.selector.query(cI,".ap-reviewRA-surnameCalc");var dC=bb.selector.query(cI,".ap-reviewRA-emailCalc");var dF=bb.selector.query(cI,".ap-reviewRA-sourceOfIncomeCode");var j=bb.selector.query(cI,".ap-reviewRA-sourceOfIncomeDescription");var dD=bb.selector.query(cI,".ap-reviewRA-sourceOfFundsCode");var dM=bb.selector.query(cI,".ap-reviewRA-sourceOfFundsDescription");var aK=bb.selector.query(cI,".ap-reviewRA-riskFactorCalc");var W=bb.selector.query(cI,".ap-reviewRA-monthlyOtherSavings");var ai=bb.selector.query(cI,".ap-reviewRA-monthlyThisRA");var da=bb.selector.query(cI,".ap-reviewRA-monthlyTotal");var aX=bb.selector.query(cI,".ap-reviewRA-monthlyTarget");var h=bb.selector.query(cI,".ap-reviewRA-capitalOtherSavings");var cH=bb.selector.query(cI,".ap-reviewRA-capitalThisRA");var cN=bb.selector.query(cI,".ap-reviewRA-capitalShortfall");var bI=bb.selector.query(cI,".ap-reviewRA-jsHiddenGoal");var K=bb.selector.query(cI,".ap-reviewRA-jsHiddenMonthlyContribution");var ds=bb.selector.query(cI,".ap-reviewRA-finalMonthlySal");var k=bb.selector.query(cI,".ap-reviewRA-jsPortfolio");var aR=bb.selector.query(cI,".ap-reviewRA-monthlyOtherSavingsPer");var bo=bb.selector.query(cI,".ap-reviewRA-monthlyThisRAPer");var by=bb.selector.query(cI,".ap-reviewRA-monthlyTotalPer");var aB=bb.selector.query(cI,".ap-reviewRA-monthlyTargetPer");var q=bb.selector.query(cI,".ap-reviewRA-timeToRetire");var ah=bb.selector.query(cI,".ap-reviewRA-capitalThisRAPlus");var ae=bb.selector.query(cI,".ap-reviewRA-capitalThisRAMinus");var am=bb.selector.query(cI,".ap-reviewRA-interestNACAExpected");var ex=bb.selector.query(cI,".ap-reviewRA-clientNumber");var bx=bb.selector.query(cI,".ap-reviewRA-stockAccountNo");var bV=bb.selector.query(cI,".ap-reviewRA-clientCasaRefNo");var p=bb.selector.query(cI,".ap-reviewRA-clientCasaResult");var bK=bb.selector.query(cI,".ap-reviewRA-initials");var c=bb.selector.query(cI,".ap-reviewRA-clientNationality");var cr=bb.selector.query(cI,".ap-reviewRA-clientType");var cs=bb.selector.query(cI,".ap-reviewRA-title");var dK=bb.selector.query(cI,".ap-reviewRA-gender");var f=bb.selector.query(cI,".ap-reviewRA-firstName");var dl=bb.selector.query(cI,".ap-reviewRA-surname");var aV=bb.selector.query(cI,".ap-reviewRA-dateOfBirthCif");var r=bb.selector.query(cI,".ap-reviewRA-typeOfIdentity");var d=bb.selector.query(cI,".ap-reviewRA-identityNumber");var ci=bb.selector.query(cI,".ap-reviewRA-taxNumber");var a7=bb.selector.query(cI,".ap-reviewRA-telephoneNumber");var dL=bb.selector.query(cI,".ap-reviewRA-cellphoneNumber");var bg=bb.selector.query(cI,".ap-reviewRA-emailAddress");var b8=bb.selector.query(cI,".ap-reviewRA-maritalStatus");var az=bb.selector.query(cI,".ap-reviewRA-countryOfOrigin");var cW=bb.selector.query(cI,".ap-reviewRA-countryOfResidence");var cA=bb.selector.query(cI,".ap-reviewRA-communicationLanguage");var ec=bb.selector.query(cI,".ap-reviewRA-preferredNotificationMethod");var S=bb.selector.query(cI,".ap-reviewRA-marketingConsent");var bP=bb.selector.query(cI,".ap-reviewRA-marketingChannels");var cO=bb.selector.query(cI,".ap-reviewRA-postalAddressLine1");var cM=bb.selector.query(cI,".ap-reviewRA-postalAddressLine2");var aL=bb.selector.query(cI,".ap-reviewRA-postalCity");var bt=bb.selector.query(cI,".ap-reviewRA-postalCode");var cQ=bb.selector.query(cI,".ap-reviewRA-postalSuburb");var aG=bb.selector.query(cI,".ap-reviewRA-residentialAddressLine1");var aF=bb.selector.query(cI,".ap-reviewRA-residentialAddressLine2");var dc=bb.selector.query(cI,".ap-reviewRA-residentialCity");var E=bb.selector.query(cI,".ap-reviewRA-residentialPostalCode");var ag=bb.selector.query(cI,".ap-reviewRA-residentialSuburb");var er=phe.hiddenField.getValue(ez);var bY=phe.hiddenField.getValue(eC);var aD=phe.hiddenField.getValue(at);var ey=phe.hiddenField.getValue(ba);if(er=="1"){var ea=bb.selector.query(cI,".ap-reviewRA-cellNumberCif");var cT=bb.selector.query(cI,".ap-reviewRA-emailAddressCif");var V=phe.textBox.getValue(d7);var bj=phe.textBox.getValue(ce);var l=phe.textBox.getValue(o);var dt=phe.inputReadOnlyText.getValue(P);var cj=phe.textBox.getValue(w);var c7=phe.textBox.getValue(aA);var aj=phe.radioGroup.getValue(ak);var X=phe.textBox.getValue(bd);var a3=phe.textBox.getValue(F);var cl=phe.inputReadOnlyText.getValue(de);var bR=phe.inputReadOnlyText.getValue(dO);var bM=phe.hiddenField.getValue(ea);var be=phe.hiddenField.getValue(cT);var N="";var z="";if(bM!=""){N=bM}else{N=phe.textBox.getValue(aP)}if(be!=""){z=be}else{z=phe.textBox.getValue(dC)}u=u+"&screenId="+er+"&withCalculator="+bY+"&referenceNumber="+ey+"&policyNumber="+aD+"&retirementAgeCalc="+V+"&currentSavingsCalc="+bj+"&currentOtherMonthlyContriCalc="+l+"&currentValueThisRACalc="+dt+"&lumpsumContributionCalc="+cj+"&currentAgeCalc="+c7+"&genderCalc="+aj+"&periodPostRetirementCalc="+X+"&monthlySalaryCalc="+a3+"&cellPhoneCalc="+N+"&firstNameCalc="+cl+"&surnameCalc="+bR+"&emailCalc="+z+"&gender="+aj+"&firstName="+cl+"&surname="+bR+"&cellphoneNumber="+N+"&emailAddress="+z}else{if(er=="2"){var V=phe.hiddenField.getValue(d7);var bj=phe.hiddenField.getValue(ce);var l=phe.hiddenField.getValue(o);var dt=phe.hiddenField.getValue(P);var cj=phe.hiddenField.getValue(w);var c7=phe.hiddenField.getValue(aA);var aj=phe.hiddenField.getValue(ak);var X=phe.hiddenField.getValue(bd);var a3=phe.hiddenField.getValue(F);var cl=phe.hiddenField.getValue(de);var bR=phe.hiddenField.getValue(dO);var N=phe.hiddenField.getValue(aP);var z=phe.hiddenField.getValue(dC);var df=phe.hiddenField.getValue(aK);var dz=phe.hiddenField.getValue(W);var c8=phe.hiddenField.getValue(ai);var di=phe.hiddenField.getValue(da);var dN=phe.hiddenField.getValue(aX);var c4=phe.hiddenField.getValue(h);var ap=phe.hiddenField.getValue(cH);var bm=phe.hiddenField.getValue(ah);var ei=phe.hiddenField.getValue(ae);var eB=phe.hiddenField.getValue(am);var cc=phe.hiddenField.getValue(cN);var bQ=phe.hiddenField.getValue(bI);var bz=phe.hiddenField.getValue(K);var Y=bb.selector.query(cI,".ap-reviewRA-finalMonthlySal-hidden");var aS=bb.selector.query(cI,".ap-reviewRA-jsPortfolioHidden");var bC=phe.hiddenField.getValue(Y);var cV=phe.hiddenField.getValue(aS);var aE=phe.hiddenField.getValue(aR);var a6=phe.hiddenField.getValue(bo);var D=phe.hiddenField.getValue(by);var Z=phe.hiddenField.getValue(aB);var dv=phe.hiddenField.getValue(q);u=u+"&screenId="+er+"&withCalculator="+bY+"&referenceNumber="+ey+"&policyNumber="+aD+"&retirementAgeCalc="+V+"&currentSavingsCalc="+bj+"&currentOtherMonthlyContriCalc="+l+"&currentValueThisRACalc="+dt+"&lumpsumContributionCalc="+cj+"&currentAgeCalc="+c7+"&genderCalc="+aj+"&periodPostRetirementCalc="+X+"&monthlySalaryCalc="+a3+"&cellPhoneCalc="+N+"&firstNameCalc="+cl+"&surnameCalc="+bR+"&emailCalc="+z+"&gender="+aj+"&firstName="+cl+"&surname="+bR+"&cellphoneNumber="+N+"&emailAddress="+z+"&riskFactorCalc="+df+"&monthlyOtherSavings="+dz+"&monthlyThisRA="+c8+"&monthlyTotal="+di+"&monthlyTarget="+dN+"&capitalOtherSavings="+c4+"&capitalThisRA="+ap+"&capitalThisRAPlus="+bm+"&capitalThisRAMinus="+ei+"&interestNACAExpected="+eB+"&capitalShortfall="+cc+"&jsHiddenGoal="+bQ+"&jsHiddenMonthlyContribution="+bz+"&finalMonthlySal="+bC+"&jsPortfolio="+cV+"&monthlyOtherSavingsPer="+aE+"&monthlyThisRAPer="+a6+"&monthlyTotalPer="+D+"&monthlyTargetPer="+Z+"&timeToRetire="+dv}else{if(er=="3"){var V=phe.hiddenField.getValue(d7);var bj=phe.hiddenField.getValue(ce);var l=phe.hiddenField.getValue(o);var dt=phe.hiddenField.getValue(P);var cj=phe.hiddenField.getValue(w);var c7=phe.hiddenField.getValue(aA);var aj=phe.hiddenField.getValue(ak);var X=phe.hiddenField.getValue(bd);var a3=phe.hiddenField.getValue(F);var cl=phe.hiddenField.getValue(de);var bR=phe.hiddenField.getValue(dO);var N=phe.hiddenField.getValue(aP);var z=phe.hiddenField.getValue(dC);var df=phe.hiddenField.getValue(aK);var dz=phe.hiddenField.getValue(W);var c8=phe.hiddenField.getValue(ai);var di=phe.hiddenField.getValue(da);var dN=phe.hiddenField.getValue(aX);var c4=phe.hiddenField.getValue(h);var ap=phe.hiddenField.getValue(cH);var bm=phe.hiddenField.getValue(ah);var ei=phe.hiddenField.getValue(ae);var eB=phe.hiddenField.getValue(am);var cc=phe.hiddenField.getValue(cN);var bQ=phe.hiddenField.getValue(bI);var bz=phe.hiddenField.getValue(K);var bC=phe.hiddenField.getValue(ds);var cV=phe.hiddenField.getValue(k);var aE=phe.hiddenField.getValue(aR);var a6=phe.hiddenField.getValue(bo);var D=phe.hiddenField.getValue(by);var Z=phe.hiddenField.getValue(aB);var dv=phe.hiddenField.getValue(q);var c5=phe.hiddenField.getValue(ex);var d8=phe.hiddenField.getValue(bx);var ad=phe.hiddenField.getValue(bV);var aT=phe.hiddenField.getValue(p);var bF=phe.hiddenField.getValue(bK);var aH=phe.hiddenField.getValue(c);var cq=phe.hiddenField.getValue(cr);var g=phe.hiddenField.getValue(cs);var dG=phe.hiddenField.getValue(dK);var a2=phe.inputReadOnlyText.getValue(f);var ar=phe.inputReadOnlyText.getValue(dl);var d6=phe.inputReadOnlyText.getValue(aV);var b7=phe.hiddenField.getValue(r);var b4=phe.inputReadOnlyText.getValue(d);var eq=phe.inputReadOnlyText.getValue(a7);var bX=phe.hiddenField.getValue(dL);var A=phe.textBox.getValue(bg);var O=phe.select.getValue(b8);var d1=phe.select.getValue(az);var bS=phe.select.getValue(cW);var d5=phe.hiddenField.getValue(dF);var ax=phe.hiddenField.getValue(j);var eG=phe.hiddenField.getValue(dD);var cw=phe.hiddenField.getValue(dM);var bw=phe.select.getValue(cA);var aQ=phe.select.getValue(ec);var cZ=phe.radioGroup.getValue(S);var M="";var bc="N";var d9="N";var bJ="N";var c9="N";var b="N";if(cZ=="Y"){bc="Y";M=phe.radioGroup.getValue(bP);if(M=="Telephone"){var bJ="Y"}else{if(M=="SMS"){var d9="Y"}else{if(M=="Email"){var c9="Y"}else{var b="Y"}}}}var dr=phe.textBox.getValue(cO);var dp=phe.textBox.getValue(cM);var aI=phe.textBox.getValue(aL);var bs=phe.textBox.getValue(bt);var bq=phe.textBox.getValue(cQ);var dh=phe.inputReadOnlyText.getValue(aG);var dg=phe.inputReadOnlyText.getValue(aF);var bp=phe.inputReadOnlyText.getValue(dc);var dR=phe.inputReadOnlyText.getValue(E);var bi=phe.inputReadOnlyText.getValue(ag);var cL=bb.selector.query(cI,".ap-reviewRA-occupation");var ay=bb.selector.query(cI,".ap-reviewRA-occupationStatus");var co=bb.selector.query(cI,".ap-reviewRA-employerName");var aq=bb.selector.query(cI,".ap-reviewRA-employerAddressLine");var b2=bb.selector.query(cI,".ap-reviewRA-employerAddressSuburb");var cg=bb.selector.query(cI,".ap-reviewRA-employerAddressTown");var a0=bb.selector.query(cI,".ap-reviewRA-employerAddressPostalCode");var cJ=phe.select.getValue(cL);var bB=phe.select.getValue(ay);var a8=phe.textBox.getValue(co);var dV=phe.textBox.getValue(aq);var aZ=phe.textBox.getValue(b2);var aM=phe.textBox.getValue(cg);var af=phe.textBox.getValue(a0);u=u+"&screenId="+er+"&withCalculator="+bY+"&referenceNumber="+ey+"&policyNumber="+aD+"&retirementAgeCalc="+V+"&currentSavingsCalc="+bj+"&currentOtherMonthlyContriCalc="+l+"&currentValueThisRACalc="+dt+"&lumpsumContributionCalc="+cj+"&currentAgeCalc="+c7+"&genderCalc="+aj+"&periodPostRetirementCalc="+X+"&monthlySalaryCalc="+a3+"&cellPhoneCalc="+N+"&firstNameCalc="+cl+"&surnameCalc="+bR+"&emailCalc="+z+"&riskFactorCalc="+df+"&monthlyOtherSavings="+dz+"&monthlyThisRA="+c8+"&monthlyTotal="+di+"&monthlyTarget="+dN+"&capitalOtherSavings="+c4+"&capitalThisRA="+ap+"&capitalThisRAPlus="+bm+"&capitalThisRAMinus="+ei+"&interestNACAExpected="+eB+"&capitalShortfall="+cc+"&jsHiddenGoal="+bQ+"&jsHiddenMonthlyContribution="+bz+"&finalMonthlySal="+bC+"&jsPortfolio="+cV+"&monthlyOtherSavingsPer="+aE+"&monthlyThisRAPer="+a6+"&monthlyTotalPer="+D+"&monthlyTargetPer="+Z+"&timeToRetire="+dv+"&clientNumber="+c5+"&stockAccountNum="+d8+"&clientCasaRefNo="+ad+"&clientCasaResult="+aT+"&initials="+bF+"&clientNationality="+aH+"&sourceOfIncomeCode="+d5+"&sourceOfIncomeDescription="+ax+"&sourceOfFundsCode="+eG+"&sourceOfFundsDescription="+cw+"&clientType="+cq+"&title="+g+"&gender="+dG+"&firstName="+a2+"&surname="+ar+"&dateOfBirth="+d6+"&typeOfIdentity="+b7+"&identityNumber="+b4+"&telephoneNumber="+eq+"&cellphoneNumber="+bX+"&emailAddress="+A+"&maritalStatus="+O+"&countryOfOrigin="+d1+"&countryOfResidence="+bS+"&communicationLanguage="+bw+"&preferredNotificationMethod="+aQ+"&marketingConsent="+bc+"&marketingChannelsRadioGroup="+M+"&smsMarketingInd="+d9+"&teleMarketingInd="+bJ+"&emailMarketingInd="+c9+"&mailMarketingInd="+b+"&postalAddressLine1="+dr+"&postalAddressLine2="+dp+"&postalCity="+aI+"&postalCode="+bs+"&postalSuburb="+bq+"&residentialAddressLine1="+dh+"&residentialAddressLine2="+dg+"&residentialCity="+bp+"&residentialPostalCode="+dR+"&residentialSuburb="+bi;u=u+"&occupation="+cJ+"&occupationStatus="+bB+"&employerName="+a8+"&employerAddressLine="+dV+"&employerAddressSuburb="+aZ+"&employerAddressTown="+aM+"&employerAddressPostalCode="+af}else{if(er=="4"){var V=phe.hiddenField.getValue(d7);var c7=phe.hiddenField.getValue(aA);if(bY=="false"){var cF=bb.selector.query(cI,".ap-reviewRA-retirementAgeCalcInvest");var ac=bb.selector.query(cI,".ap-reviewRA-currentAgeCalcInvest");V=phe.textBox.getValue(cF);c7=phe.textBox.getValue(ac)}var bj=phe.hiddenField.getValue(ce);var l=phe.hiddenField.getValue(o);var dt=phe.hiddenField.getValue(P);var cj=phe.hiddenField.getValue(w);var aj=phe.hiddenField.getValue(ak);var X=phe.hiddenField.getValue(bd);var a3=phe.hiddenField.getValue(F);var cl=phe.hiddenField.getValue(de);var bR=phe.hiddenField.getValue(dO);var N=phe.hiddenField.getValue(aP);var z=phe.hiddenField.getValue(dC);var df=phe.hiddenField.getValue(aK);var dz=phe.hiddenField.getValue(W);var c8=phe.hiddenField.getValue(ai);var di=phe.hiddenField.getValue(da);var dN=phe.hiddenField.getValue(aX);var c4=phe.hiddenField.getValue(h);var ap=phe.hiddenField.getValue(cH);var bm=phe.hiddenField.getValue(ah);var ei=phe.hiddenField.getValue(ae);var eB=phe.hiddenField.getValue(am);var cc=phe.hiddenField.getValue(cN);var bQ=phe.hiddenField.getValue(bI);var bz=phe.hiddenField.getValue(K);var bC=phe.hiddenField.getValue(ds);var cV=phe.hiddenField.getValue(k);var aE=phe.hiddenField.getValue(aR);var a6=phe.hiddenField.getValue(bo);var D=phe.hiddenField.getValue(by);var Z=phe.hiddenField.getValue(aB);var dv=phe.hiddenField.getValue(q);var c5=phe.hiddenField.getValue(ex);var d8=phe.hiddenField.getValue(bx);var ad=phe.hiddenField.getValue(bV);var aT=phe.hiddenField.getValue(p);var bF=phe.hiddenField.getValue(bK);var aH=phe.hiddenField.getValue(c);var d5=phe.hiddenField.getValue(dF);var ax=phe.hiddenField.getValue(j);var eG=phe.hiddenField.getValue(dD);var cw=phe.hiddenField.getValue(dM);var cq=phe.hiddenField.getValue(cr);var g=phe.hiddenField.getValue(cs);var dG=phe.hiddenField.getValue(dK);var a2=phe.hiddenField.getValue(f);var ar=phe.hiddenField.getValue(dl);var d6=phe.hiddenField.getValue(aV);var b7=phe.hiddenField.getValue(r);var b4=phe.hiddenField.getValue(d);var dP=phe.textBox.getValue(ci);var eq=phe.hiddenField.getValue(a7);var bX=phe.hiddenField.getValue(dL);var A=phe.hiddenField.getValue(bg);var O=phe.hiddenField.getValue(b8);var d1=phe.hiddenField.getValue(az);var bS=phe.hiddenField.getValue(cW);var bw=phe.hiddenField.getValue(cA);var aQ=phe.hiddenField.getValue(ec);var cZ=phe.hiddenField.getValue(S);var M="";var bc="N";var d9="N";var bJ="N";var c9="N";var b="N";if(cZ=="Y"){bc="Y";M=phe.hiddenField.getValue(bP);if(M=="Telephone"){var bJ="Y"}else{if(M=="SMS"){var d9="Y"}else{if(M=="Email"){var c9="Y"}else{var b="Y"}}}}var dr=phe.hiddenField.getValue(cO);var dp=phe.hiddenField.getValue(cM);var aI=phe.hiddenField.getValue(aL);var bs=phe.hiddenField.getValue(bt);var bq=phe.hiddenField.getValue(cQ);var dh=phe.hiddenField.getValue(aG);var dg=phe.hiddenField.getValue(aF);var bp=phe.hiddenField.getValue(dc);var dR=phe.hiddenField.getValue(E);var bi=phe.hiddenField.getValue(ag);var cL=bb.selector.query(cI,".ap-reviewRA-occupation");var ay=bb.selector.query(cI,".ap-reviewRA-occupationStatus");var co=bb.selector.query(cI,".ap-reviewRA-employerName");var aq=bb.selector.query(cI,".ap-reviewRA-employerAddressLine");var b2=bb.selector.query(cI,".ap-reviewRA-employerAddressSuburb");var cg=bb.selector.query(cI,".ap-reviewRA-employerAddressTown");var a0=bb.selector.query(cI,".ap-reviewRA-employerAddressPostalCode");var cJ=phe.select.getValue(cL);var bB=phe.select.getValue(ay);var a8=phe.textBox.getValue(co);var dV=phe.textBox.getValue(aq);var aZ=phe.textBox.getValue(b2);var aM=phe.textBox.getValue(cg);var af=phe.textBox.getValue(a0);u=u+"&screenId="+er+"&withCalculator="+bY+"&referenceNumber="+ey+"&policyNumber="+aD+"&retirementAgeCalc="+V+"&currentSavingsCalc="+bj+"&currentOtherMonthlyContriCalc="+l+"&currentValueThisRACalc="+dt+"&lumpsumContributionCalc="+cj+"&currentAgeCalc="+c7+"&genderCalc="+aj+"&periodPostRetirementCalc="+X+"&monthlySalaryCalc="+a3+"&cellPhoneCalc="+N+"&firstNameCalc="+cl+"&surnameCalc="+bR+"&emailCalc="+z+"&riskFactorCalc="+df+"&monthlyOtherSavings="+dz+"&monthlyThisRA="+c8+"&monthlyTotal="+di+"&monthlyTarget="+dN+"&capitalOtherSavings="+c4+"&capitalThisRA="+ap+"&capitalThisRAPlus="+bm+"&capitalThisRAMinus="+ei+"&interestNACAExpected="+eB+"&capitalShortfall="+cc+"&jsHiddenGoal="+bQ+"&jsHiddenMonthlyContribution="+bz+"&finalMonthlySal="+bC+"&jsPortfolio="+cV+"&monthlyOtherSavingsPer="+aE+"&monthlyThisRAPer="+a6+"&monthlyTotalPer="+D+"&monthlyTargetPer="+Z+"&timeToRetire="+dv+"&clientNumber="+c5+"&stockAccountNum="+d8+"&clientCasaRefNo="+ad+"&clientCasaResult="+aT+"&initials="+bF+"&clientNationality="+aH+"&sourceOfIncomeCode="+d5+"&sourceOfIncomeDescription="+ax+"&sourceOfFundsCode="+eG+"&sourceOfFundsDescription="+cw+"&clientType="+cq+"&title="+g+"&gender="+dG+"&firstName="+a2+"&surname="+ar+"&dateOfBirth="+d6+"&typeOfIdentity="+b7+"&identityNumber="+b4+"&taxNumber="+dP+"&telephoneNumber="+eq+"&cellphoneNumber="+bX+"&emailAddress="+A+"&maritalStatus="+O+"&countryOfOrigin="+d1+"&countryOfResidence="+bS+"&communicationLanguage="+bw+"&preferredNotificationMethod="+aQ+"&marketingConsent="+bc+"&marketingChannelsRadioGroup="+M+"&smsMarketingInd="+d9+"&teleMarketingInd="+bJ+"&emailMarketingInd="+c9+"&mailMarketingInd="+b+"&postalAddressLine1="+dr+"&postalAddressLine2="+dp+"&postalCity="+aI+"&postalCode="+bs+"&postalSuburb="+bq+"&residentialAddressLine1="+dh+"&residentialAddressLine2="+dg+"&residentialCity="+bp+"&residentialPostalCode="+dR+"&residentialSuburb="+bi;u=u+"&occupation="+cJ+"&occupationStatus="+bB+"&employerName="+a8+"&employerAddressLine="+dV+"&employerAddressSuburb="+aZ+"&employerAddressTown="+aM+"&employerAddressPostalCode="+af;var aU=bb.selector.query(cI,".ap-reviewRA-isCompanyLinked");var eh=phe.hiddenField.getValue(aU);var L=bb.selector.query(cI,".ap-reviewRA-makeRegularContribution");var dI=bb.selector.query(cI,".ap-reviewRA-makeLumpsumContribution");var x=phe.checkBox.isChecked(L);var bU=phe.checkBox.isChecked(dI);u=u+"&regularContribution="+x+"&lumpsumContribution="+bU;var aJ="";var dQ="";var ep="";var a1="";var au="";var cK="";var c1="";var c3="";var bL="";var eF="";var db="";var bn="";var bl="";if(x){var H=bb.selector.query(cI,".ap-reviewRA-accountAbsaDebitPayment");var ew=bb.selector.query(cI,".ap-reviewRA-accountAbsaOtherDebitPayment");var ek=bb.selector.query(cI,".ap-reviewRA-accountOtherDebitPayment");var ao=phe.hiddenField.getValue(H);var dE=phe.hiddenField.getValue(ew);var ej=phe.hiddenField.getValue(ek);if(ao=="true"){if(eh=="true"){var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameDebitPaymentLinkedCompanyLinked");var y=bb.selector.query(cI,".ap-reviewRA-accountToBeDebitedAbsaLinkedDebitPaymentCompanyLinked");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitAbsaLinkedCompanyLinked");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationAbsaLinkedCompanyLinked");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountAbsaLinkedCompanyLinked");bn=phe.inputReadOnlyText.getValue(c0);aJ=phe.hiddenField.getValue(y);dQ=phe.inputReadOnlyText.getValue(aO);bl=phe.inputReadOnlyText.getValue(a4);c3=phe.inputReadOnlyText.getValue(I);if(aJ!=""){var bH=aJ.split("-");ep=bH[0];a1=bH[1]}}else{var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameDebitPaymentLinked");var y=bb.selector.query(cI,".ap-reviewRA-accountToBeDebitedAbsaLinkedDebitPayment");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitAbsaLinked");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationAbsaLinked");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountAbsaLinked");bn=phe.textBox.getValue(c0);aJ=phe.select.getValue(y);dQ=phe.select.getValue(aO);bl=phe.textBox.getValue(a4);c3=phe.textBox.getValue(I);if(aJ!=""){var bH=aJ.split("-");ep=bH[0];a1=bH[1]}}au="ABSA";c1="632005";bL="true";eF="false";db="false"}if(dE=="true"){if(eh=="true"){var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameAbsaOtherDebitPaymentCompanyLinked");var ed=bb.selector.query(cI,".ap-reviewRA-accountTypeAbsaOtherDebitPaymentCompanyLinked");var eg=bb.selector.query(cI,".ap-reviewRA-accountNumberAbsaOtherDebitPaymentCompanyLinked");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitAbsaOtherCompanyLinked");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationAbsaOtherCompanyLinked");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountAbsaOtherCompanyLinked");bn=phe.inputReadOnlyText.getValue(c0);dQ=phe.inputReadOnlyText.getValue(aO);bl=phe.inputReadOnlyText.getValue(a4);c3=phe.inputReadOnlyText.getValue(I);ep=phe.hiddenField.getValue(ed);a1=phe.inputReadOnlyText.getValue(eg);aJ=ep+"-"+a1}else{var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameAbsaOtherDebitPayment");var ed=bb.selector.query(cI,".ap-reviewRA-accountTypeAbsaOtherDebitPayment");var eg=bb.selector.query(cI,".ap-reviewRA-accountNumberAbsaOtherDebitPayment");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitAbsaOther");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationAbsaOther");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountAbsaOther");bn=phe.textBox.getValue(c0);dQ=phe.select.getValue(aO);bl=phe.textBox.getValue(a4);c3=phe.textBox.getValue(I);ep=phe.select.getValue(ed);a1=phe.textBox.getValue(eg);aJ=ep+"-"+a1}au="ABSA";c1="632005";bL="false";eF="true";db="false"}if(ej=="true"){if(eh=="true"){var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameOtherDebitPaymentCompanyLinked");var ca=bb.selector.query(cI,".ap-reviewRA-bankNameCompanyLinked");var cz=bb.selector.query(cI,".ap-reviewRA-branchNameDebitPaymentCompanyLinked");var ed=bb.selector.query(cI,".ap-reviewRA-accountTypeDebitPaymentCompanyLinked");var eg=bb.selector.query(cI,".ap-reviewRA-accountNumberCompanyLinked");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitOtherCompanyLinked");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationOtherCompanyLinked");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountOtherCompanyLinked");bn=phe.inputReadOnlyText.getValue(c0);dQ=phe.inputReadOnlyText.getValue(aO);bl=phe.inputReadOnlyText.getValue(a4);c3=phe.inputReadOnlyText.getValue(I);au=phe.inputReadOnlyText.getValue(ca);sBranchNameOrCode=phe.inputReadOnlyText.getValue(cz);if(sBranchNameOrCode!=""){var eo=sBranchNameOrCode.split(" - ");cK=eo[0];c1=eo[1]}ep=phe.hiddenField.getValue(ed);a1=phe.inputReadOnlyText.getValue(eg);aJ=ep+"-"+a1}else{var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameOtherDebitPayment");var ca=bb.selector.query(cI,".ap-reviewRA-bankNameDebitPayment");var cz=bb.selector.query(cI,".ap-reviewRA-branchNameDebitPayment");var ed=bb.selector.query(cI,".ap-reviewRA-accountTypeOther");var eg=bb.selector.query(cI,".ap-reviewRA-accountNumberOther");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitOther");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationOther");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountOther");bn=phe.textBox.getValue(c0);dQ=phe.select.getValue(aO);bl=phe.textBox.getValue(a4);c3=phe.textBox.getValue(I);au=phe.suggestBox.getValue(ca);sBranchNameOrCode=phe.suggestBox.getValue(cz);if(sBranchNameOrCode!=""){var eo=sBranchNameOrCode.split(" - ");cK=eo[0];c1=eo[1]}ep=phe.select.getValue(ed);a1=phe.textBox.getValue(eg);aJ=ep+"-"+a1}bL="false";eF="false";db="true"}u=u+"&accountAbsaDebitPayment="+bL+"&accountAbsaOtherDebitPayment="+eF+"&accountOtherDebitPayment="+db+"&accountHolderNameDebitPayment="+c3+"&accountToBeDebitedDebitPayment="+aJ+"&bankNameDebitPayment="+au+"&branchNameDebitPayment="+cK+"&branchCodeDebitPayment="+c1+"&accountTypeDebitPayment="+ep+"&accountNumberDebitPayment="+a1+"&dayOfDebitDebitPayment="+dQ+"&annualEscalationDebitPayment="+bl+"&debitOrderAmountDebitPayment="+bn}var aW="false";var ee="false";var b5="";var U="0";var cx="";var dj="";var em="";var aY="";var bT="";var dJ="";var cX="";var b9="";var dk="";var du="";var cu="";var bE="";if(bU){var cp=bb.selector.query(cI,".ap-reviewRA-methodPaymentOnline");var ch=bb.selector.query(cI,".ap-reviewRA-methodPaymentManualDeposit");var br=phe.hiddenField.getValue(cp);var dW=phe.hiddenField.getValue(ch);if(br=="true"){aW="true";var bv=bb.selector.query(cI,".ap-reviewRA-onceOffPaymentDebitDate");var y=bb.selector.query(cI,".ap-reviewRA-accountToBeDebitedAbsaLinkedOnceOffPayment");var cf=bb.selector.query(cI,".ap-reviewRA-onceOffAmountAbsaLinked");var Q=bb.selector.query(cI,".ap-reviewRA-myReferenceOnceOffPaymentAbsaLinked");var cx=phe.inputReadOnlyText.getValue(bv);U=phe.textBox.getValue(cf);dj=phe.textBox.getValue(Q);em=phe.select.getValue(y);if(em!=""){var bH=em.split("-");aY=bH[0];bT=bH[1]}dJ="ABSA";cX="632005";u=u+"&lumpsumAmount="+U+"&paymentDebitDate="+cx+"&myReference="+dj+"&accountToBeDebitedOnceOffPayment="+em+"&accountTypeOnceOffPayment="+aY+"&accountNumberOnceOffPayment="+bT+"&bankNameOnceOffPayment="+dJ+"&branchCodeOnceOffPayment="+cX+"&methodPaymentOnline="+aW+"&methodPaymentManualDeposit="+ee;var cE=bb.selector.query(cI,".ap-reviewRA-beneficiaryBankNameAbsaOnceOffPayment");var B=bb.selector.query(cI,".ap-reviewRA-beneficiaryBranchNameOrCodeAbsaOnceOffPayment");var dT=bb.selector.query(cI,".ap-reviewRA-beneficiaryAccountNumberAbsaOnceOffPayment");var dH=bb.selector.query(cI,".ap-reviewRA-beneficiaryReferenceNumberAbsaOnceOffPayment");var et=bb.selector.query(cI,".ap-reviewRA-beneficiaryNameAbsaOnceOffPayment");b9=phe.inputReadOnlyText.getValue(cE);dk=phe.inputReadOnlyText.getValue(B);du=phe.inputReadOnlyText.getValue(dT);cu=phe.inputReadOnlyText.getValue(dH);bE=phe.inputReadOnlyText.getValue(et)}else{if(dW=="true"){ee="true";var cf=bb.selector.query(cI,".ap-reviewRA-onceOffAmountManualDeposit");var cE=bb.selector.query(cI,".ap-reviewRA-beneficiaryBankNameManualDeposit");var B=bb.selector.query(cI,".ap-reviewRA-beneficiaryBranchNameOrCodeManualDeposit");var dT=bb.selector.query(cI,".ap-reviewRA-beneficiaryAccountNumberManualDeposit");var dH=bb.selector.query(cI,".ap-reviewRA-beneficiaryReferenceNumberManualDeposit");var et=bb.selector.query(cI,".ap-reviewRA-beneficiaryNameManualDeposit");U=phe.textBox.getValue(cf);b9=phe.inputReadOnlyText.getValue(cE);dk=phe.inputReadOnlyText.getValue(B);du=phe.inputReadOnlyText.getValue(dT);cu=phe.inputReadOnlyText.getValue(dH);bE=phe.inputReadOnlyText.getValue(et);u=u+"&methodPaymentOnline="+aW+"&methodPaymentManualDeposit="+ee+"&lumpsumAmount="+U}}u=u+"&benBankName="+b9+"&benBranchNameOrCode="+dk+"&benAccountNumber="+du+"&benReferenceNumber="+cu+"&benName="+bE}}else{if(er=="5"||er=="6"){var V=phe.hiddenField.getValue(d7);var bj=phe.hiddenField.getValue(ce);var l=phe.hiddenField.getValue(o);var dt=phe.hiddenField.getValue(P);var cj=phe.hiddenField.getValue(w);var c7=phe.hiddenField.getValue(aA);var aj=phe.hiddenField.getValue(ak);var X=phe.hiddenField.getValue(bd);var a3=phe.hiddenField.getValue(F);var cl=phe.hiddenField.getValue(de);var bR=phe.hiddenField.getValue(dO);var N=phe.hiddenField.getValue(aP);var z=phe.hiddenField.getValue(dC);var df=phe.hiddenField.getValue(aK);var dz=phe.hiddenField.getValue(W);var c8=phe.hiddenField.getValue(ai);var di=phe.hiddenField.getValue(da);var dN=phe.hiddenField.getValue(aX);var c4=phe.hiddenField.getValue(h);var ap=phe.hiddenField.getValue(cH);var bm=phe.hiddenField.getValue(ah);var ei=phe.hiddenField.getValue(ae);var eB=phe.hiddenField.getValue(am);var cc=phe.hiddenField.getValue(cN);var bQ=phe.hiddenField.getValue(bI);var bz=phe.hiddenField.getValue(K);var bC=phe.hiddenField.getValue(ds);var cV=phe.hiddenField.getValue(k);var aE=phe.hiddenField.getValue(aR);var a6=phe.hiddenField.getValue(bo);var D=phe.hiddenField.getValue(by);var Z=phe.hiddenField.getValue(aB);var dv=phe.hiddenField.getValue(q);var c5=phe.hiddenField.getValue(ex);var d8=phe.hiddenField.getValue(bx);var ad=phe.hiddenField.getValue(bV);var aT=phe.hiddenField.getValue(p);var bF=phe.hiddenField.getValue(bK);var aH=phe.hiddenField.getValue(c);var d5=phe.hiddenField.getValue(dF);var ax=phe.hiddenField.getValue(j);var eG=phe.hiddenField.getValue(dD);var cw=phe.hiddenField.getValue(dM);var cq=phe.hiddenField.getValue(cr);var g=phe.hiddenField.getValue(cs);var dG=phe.hiddenField.getValue(dK);var a2=phe.hiddenField.getValue(f);var ar=phe.hiddenField.getValue(dl);var d6=phe.hiddenField.getValue(aV);var b7=phe.hiddenField.getValue(r);var b4=phe.hiddenField.getValue(d);var dP=phe.textBox.getValue(ci);var eq=phe.hiddenField.getValue(a7);var bX=phe.hiddenField.getValue(dL);var A=phe.hiddenField.getValue(bg);var O=phe.hiddenField.getValue(b8);var d1=phe.hiddenField.getValue(az);var bS=phe.hiddenField.getValue(cW);var bw=phe.hiddenField.getValue(cA);var aQ=phe.hiddenField.getValue(ec);var cZ=phe.hiddenField.getValue(S);var M="";var bc="N";var d9="N";var bJ="N";var c9="N";var b="N";if(cZ=="Y"){bc="Y";M=phe.hiddenField.getValue(bP);if(M=="Telephone"){var bJ="Y"}else{if(M=="SMS"){var d9="Y"}else{if(M=="Email"){var c9="Y"}else{var b="Y"}}}}var dr=phe.hiddenField.getValue(cO);var dp=phe.hiddenField.getValue(cM);var aI=phe.hiddenField.getValue(aL);var bs=phe.hiddenField.getValue(bt);var bq=phe.hiddenField.getValue(cQ);var dh=phe.hiddenField.getValue(aG);var dg=phe.hiddenField.getValue(aF);var bp=phe.hiddenField.getValue(dc);var dR=phe.hiddenField.getValue(E);var bi=phe.hiddenField.getValue(ag);var cL=bb.selector.query(cI,".ap-reviewRA-occupation");var ay=bb.selector.query(cI,".ap-reviewRA-occupationStatus");var co=bb.selector.query(cI,".ap-reviewRA-employerName");var aq=bb.selector.query(cI,".ap-reviewRA-employerAddressLine");var b2=bb.selector.query(cI,".ap-reviewRA-employerAddressSuburb");var cg=bb.selector.query(cI,".ap-reviewRA-employerAddressTown");var a0=bb.selector.query(cI,".ap-reviewRA-employerAddressPostalCode");var cJ=phe.select.getValue(cL);var bB=phe.select.getValue(ay);var a8=phe.textBox.getValue(co);var dV=phe.textBox.getValue(aq);var aZ=phe.textBox.getValue(b2);var aM=phe.textBox.getValue(cg);var af=phe.textBox.getValue(a0);u=u+"&screenId="+er+"&withCalculator="+bY+"&referenceNumber="+ey+"&policyNumber="+aD+"&retirementAgeCalc="+V+"&currentSavingsCalc="+bj+"&currentOtherMonthlyContriCalc="+l+"&currentValueThisRACalc="+dt+"&lumpsumContributionCalc="+cj+"&currentAgeCalc="+c7+"&genderCalc="+aj+"&periodPostRetirementCalc="+X+"&monthlySalaryCalc="+a3+"&cellPhoneCalc="+N+"&firstNameCalc="+cl+"&surnameCalc="+bR+"&emailCalc="+z+"&riskFactorCalc="+df+"&monthlyOtherSavings="+dz+"&monthlyThisRA="+c8+"&monthlyTotal="+di+"&monthlyTarget="+dN+"&capitalOtherSavings="+c4+"&capitalThisRA="+ap+"&capitalThisRAPlus="+bm+"&capitalThisRAMinus="+ei+"&interestNACAExpected="+eB+"&capitalShortfall="+cc+"&jsHiddenGoal="+bQ+"&jsHiddenMonthlyContribution="+bz+"&finalMonthlySal="+bC+"&jsPortfolio="+cV+"&monthlyOtherSavingsPer="+aE+"&monthlyThisRAPer="+a6+"&monthlyTotalPer="+D+"&monthlyTargetPer="+Z+"&timeToRetire="+dv+"&clientNumber="+c5+"&stockAccountNum="+d8+"&clientCasaRefNo="+ad+"&clientCasaResult="+aT+"&initials="+bF+"&clientNationality="+aH+"&sourceOfIncomeCode="+d5+"&sourceOfIncomeDescription="+ax+"&sourceOfFundsCode="+eG+"&sourceOfFundsDescription="+cw+"&clientType="+cq+"&title="+g+"&gender="+dG+"&firstName="+a2+"&surname="+ar+"&dateOfBirth="+d6+"&typeOfIdentity="+b7+"&identityNumber="+b4+"&taxNumber="+dP+"&telephoneNumber="+eq+"&cellphoneNumber="+bX+"&emailAddress="+A+"&maritalStatus="+O+"&countryOfOrigin="+d1+"&countryOfResidence="+bS+"&communicationLanguage="+bw+"&preferredNotificationMethod="+aQ+"&marketingConsent="+bc+"&marketingChannelsRadioGroup="+M+"&smsMarketingInd="+d9+"&teleMarketingInd="+bJ+"&emailMarketingInd="+c9+"&mailMarketingInd="+b+"&postalAddressLine1="+dr+"&postalAddressLine2="+dp+"&postalCity="+aI+"&postalCode="+bs+"&postalSuburb="+bq+"&residentialAddressLine1="+dh+"&residentialAddressLine2="+dg+"&residentialCity="+bp+"&residentialPostalCode="+dR+"&residentialSuburb="+bi;u=u+"&occupation="+cJ+"&occupationStatus="+bB+"&employerName="+a8+"&employerAddressLine="+dV+"&employerAddressSuburb="+aZ+"&employerAddressTown="+aM+"&employerAddressPostalCode="+af;var aU=bb.selector.query(cI,".ap-reviewRA-isCompanyLinked");var eh=phe.hiddenField.getValue(aU);var L=bb.selector.query(cI,".ap-reviewRA-makeRegularContribution");var dI=bb.selector.query(cI,".ap-reviewRA-makeLumpsumContribution");var dB=phe.hiddenField.getValue(L);var b1=phe.hiddenField.getValue(dI);var x="false";var bU="false";if(dB=="true"){x="true"}if(b1=="true"){bU="true"}u=u+"&regularContribution="+x+"&lumpsumContribution="+bU;var aJ="";var dQ="";var ep="";var a1="";var au="";var cK="";var c1="";var c3="";var bL="";var eF="";var db="";var bn="";var bl="";if(x=="true"){var dY=bb.selector.query(cI,".ap-reviewRA-debitedAccountBankDebitPayment");var ab=phe.hiddenField.getValue(dY);if(ab=="AbsaOnlineLinkedAccount"){var y=bb.selector.query(cI,".ap-reviewRA-accountToBeDebitedAbsaLinkedDebitPayment");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitAbsaLinked");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationAbsaLinked");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountAbsaLinked");var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameDebitPaymentLinked");c3=phe.hiddenField.getValue(I);bn=phe.hiddenField.getValue(c0);aJ=phe.hiddenField.getValue(y);dQ=phe.hiddenField.getValue(aO);bl=phe.hiddenField.getValue(a4);if(aJ!=""){var bH=aJ.split("-");ep=bH[0];a1=bH[1]}au="ABSA";c1="632005";bL="true";eF="false";db="false"}if(ab=="AbsaOtherAccount"){var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameAbsaOtherDebitPayment");var ed=bb.selector.query(cI,".ap-reviewRA-accountTypeAbsaOtherDebitPayment");var eg=bb.selector.query(cI,".ap-reviewRA-accountNumberAbsaOtherDebitPayment");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitAbsaOther");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationAbsaOther");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountAbsaOther");bn=phe.hiddenField.getValue(c0);aJ=phe.hiddenField.getValue(y);dQ=phe.hiddenField.getValue(aO);bl=phe.hiddenField.getValue(a4);c3=phe.hiddenField.getValue(I);ep=phe.select.getValue(ed);a1=phe.textBox.getValue(eg);aJ=ep+"-"+a1;au="ABSA";c1="632005";bL="false";eF="true";db="false"}if(ab=="OtherBank"){var I=bb.selector.query(cI,".ap-reviewRA-accountHolderNameOtherDebitPayment");var ca=bb.selector.query(cI,".ap-reviewRA-bankName");var cz=bb.selector.query(cI,".ap-reviewRA-branchName");var ed=bb.selector.query(cI,".ap-reviewRA-accountTypeOther");var eg=bb.selector.query(cI,".ap-reviewRA-accountNumberOther");var aO=bb.selector.query(cI,".ap-reviewRA-dayOfDebitOther");var a4=bb.selector.query(cI,".ap-reviewRA-annualEscalationOther");var c0=bb.selector.query(cI,".ap-reviewRA-debitOrderAmountOther");c3=phe.hiddenField.getValue(I);bn=phe.hiddenField.getValue(c0);dQ=phe.hiddenField.getValue(aO);bl=phe.hiddenField.getValue(a4);au=phe.hiddenField.getValue(ca);sBranchNameOrCode=phe.hiddenField.getValue(cz);if(sBranchNameOrCode!=""){var eo=sBranchNameOrCode.split(" - ");cK=eo[0];c1=eo[1]}ep=phe.select.getValue(ed);a1=phe.textBox.getValue(eg);aJ=ep+"-"+a1;bL="false";eF="false";db="true"}u=u+"&accountAbsaDebitPayment="+bL+"&accountAbsaOtherDebitPayment="+eF+"&accountOtherDebitPayment="+db+"&accountToBeDebitedDebitPayment="+aJ+"&accountHolderNameDebitPayment="+c3+"&bankNameDebitPayment="+au+"&branchNameDebitPayment="+cK+"&branchCodeDebitPayment="+c1+"&accountTypeDebitPayment="+ep+"&accountNumberDebitPayment="+a1+"&dayOfDebitDebitPayment="+dQ+"&annualEscalationDebitPayment="+bl+"&debitOrderAmountDebitPayment="+bn}var aW="false";var ee="false";var b5="";var U="0";var cx="";var dj="";var em="";var aY="";var bT="";var dJ="";var cX="";var b9="";var dk="";var du="";var cu="";var bE="";if(bU=="true"){var e=bb.selector.query(cI,".ap-reviewRA-methodOfPaymentOnceOffPayment");var dX=phe.hiddenField.getValue(e);if(dX=="Online"){aW="true";var bv=bb.selector.query(cI,".ap-reviewRA-onceOffPaymentDebitDate");var y=bb.selector.query(cI,".ap-reviewRA-accountToBeDebitedAbsaLinkedOnceOffPayment");var eE=bb.selector.query(cI,".ap-reviewRA-sourceOfFundsAbsaLinkedOnceOffPayment");var cf=bb.selector.query(cI,".ap-reviewRA-onceOffAmountAbsaLinked");var Q=bb.selector.query(cI,".ap-reviewRA-myReferenceOnceOffPaymentAbsaLinked");var cx=phe.hiddenField.getValue(bv);b5=phe.hiddenField.getValue(eE);U=phe.hiddenField.getValue(cf);dj=phe.hiddenField.getValue(Q);em=phe.hiddenField.getValue(y);if(em!=""){var bH=em.split("-");aY=bH[0];bT=bH[1]}dJ="ABSA";cX="632005";u=u+"&sourceOfFunds="+b5+"&lumpsumAmount="+U+"&paymentDebitDate="+cx+"&myReference="+dj+"&accountToBeDebitedOnceOffPayment="+em+"&accountTypeOnceOffPayment="+aY+"&accountNumberOnceOffPayment="+bT+"&bankNameOnceOffPayment="+dJ+"&branchCodeOnceOffPayment="+cX+"&methodPaymentOnline="+aW+"&methodPaymentManualDeposit="+ee;var cE=bb.selector.query(cI,".ap-reviewRA-beneficiaryBankNameAbsaOnceOffPayment");var B=bb.selector.query(cI,".ap-reviewRA-beneficiaryBranchNameOrCodeAbsaOnceOffPayment");var dT=bb.selector.query(cI,".ap-reviewRA-beneficiaryAccountNumberAbsaOnceOffPayment");var dH=bb.selector.query(cI,".ap-reviewRA-beneficiaryReferenceNumberAbsaOnceOffPayment");var et=bb.selector.query(cI,".ap-reviewRA-beneficiaryNameAbsaOnceOffPayment");b9=phe.hiddenField.getValue(cE);dk=phe.hiddenField.getValue(B);du=phe.hiddenField.getValue(dT);cu=phe.hiddenField.getValue(dH);bE=phe.hiddenField.getValue(et)}else{if(dX=="ManualDepositIntoAbsaInvestment"){ee="true";var eE=bb.selector.query(cI,".ap-reviewRA-sourceOfFundsManualDeposit");var cf=bb.selector.query(cI,".ap-reviewRA-onceOffAmountManualDeposit");var cE=bb.selector.query(cI,".ap-reviewRA-beneficiaryBankNameManualDeposit");var B=bb.selector.query(cI,".ap-reviewRA-beneficiaryBranchNameOrCodeManualDeposit");var dT=bb.selector.query(cI,".ap-reviewRA-beneficiaryAccountNumberManualDeposit");var dH=bb.selector.query(cI,".ap-reviewRA-beneficiaryReferenceNumberManualDeposit");var et=bb.selector.query(cI,".ap-reviewRA-beneficiaryNameManualDeposit");b5=phe.hiddenField.getValue(eE);U=phe.hiddenField.getValue(cf);b9=phe.hiddenField.getValue(cE);dk=phe.hiddenField.getValue(B);du=phe.hiddenField.getValue(dT);cu=phe.hiddenField.getValue(dH);bE=phe.hiddenField.getValue(et);u=u+"&methodPaymentOnline="+aW+"&methodPaymentManualDeposit="+ee+"&sourceOfFunds="+b5+"&lumpsumAmount="+U}}u=u+"&benBankName="+b9+"&benBranchNameOrCode="+dk+"&benAccountNumber="+du+"&benReferenceNumber="+cu+"&benName="+bE}if(er=="6"){var dZ=bb.selector.query(cI,".ap-reviewRA-quoteDescription");var en=bb.selector.query(cI,".ap-reviewRA-quoteReference");var d3=bb.selector.query(cI,".ap-reviewRA-fundCode");var n=bb.selector.query(cI,".ap-reviewRA-fundPercentage");var cy=bb.selector.query(cI,".ap-reviewRA-monthlyContributionNetAmount");var eH=bb.selector.query(cI,".ap-reviewRA-lumpsumContributionNetAmount");var bu=bb.selector.query(cI,".ap-reviewRA-annualFee");var dq=bb.selector.query(cI,".ap-reviewRA-initialFee");var eD=bb.selector.query(cI,".ap-reviewRA-platformFee");var an=bb.selector.query(cI,".ap-reviewRA-presumedReturn");var aC=bb.selector.query(cI,".ap-reviewRA-reduction");var cB=bb.selector.query(cI,".ap-reviewRA-actualReturn");var m=bb.selector.query(cI,".ap-reviewRA-investmentPeriod");var J=phe.hiddenField.getValue(dZ);var bN=phe.hiddenField.getValue(en);var cd=phe.hiddenField.getValue(d3);var b6=phe.hiddenField.getValue(n);var dd=phe.hiddenField.getValue(cy);var T=phe.hiddenField.getValue(eH);var cR=phe.hiddenField.getValue(bu);var dn=phe.hiddenField.getValue(dq);var cD=phe.hiddenField.getValue(eD);var cY=phe.hiddenField.getValue(an);var bW=phe.hiddenField.getValue(aC);var bh=phe.hiddenField.getValue(cB);var el=phe.hiddenField.getValue(m);u=u+"&quoteDescription="+J+"&quoteReference="+bN+"&fundCode="+cd+"&fundPercentage="+b6+"&monthlyContributionNetAmount="+dd+"&lumpsumContributionNetAmount="+T+"&annualFee="+cR+"&initialFee="+dn+"&platformFee="+cD+"&presumedReturn="+cY+"&reduction="+bW+"&actualReturn="+bh+"&investmentPeriod="+el;var av=bb.selector.queryAll(cI,".ap-reviewRA-feesDetails");for(var d0=0;d0<av.length;d0++){var bD=bb.selector.query(av[d0],".ap-reviewRA-categoryId");var R=bb.selector.query(av[d0],".ap-reviewRA-typeId");var cn=bb.selector.query(av[d0],".ap-reviewRA-totalPercentage");var bA=phe.hiddenField.getValue(bD);var dA=phe.hiddenField.getValue(R);var aN=phe.hiddenField.getValue(cn);u=u+"&feesNumber="+d0+"&categoryId="+bA+"&typeId="+dA+"&totalPercentage="+aN}}}}}}}var c6=bb.selector.queryAll(cI,".ap-reviewRA-beneficiaryDetails");var bG=0;for(var d0=0;d0<c6.length;d0++){var dU="false";var bO="false";var G="false";var cG="";var d4="";var a9="";var bk="";var cC="";var c2="";var bZ="";var a5="";var es="";var b0="";var ct="";var eb="";var aw="";var cP="";var cm="";var cS="";var eu=bb.selector.query(c6[d0],".ap-reviewRA-beneficiaryType");var cU=bb.selector.query(c6[d0],".ap-reviewRA-beneficiaryNumber");cG=phe.hiddenField.getValue(eu);d4=phe.hiddenField.getValue(cU);if(cG=="Individual"||cG=="I"){var cv=bb.selector.query(c6[d0],".ap-reviewRA-benFirstName");var t=bb.selector.query(c6[d0],".ap-reviewRA-benSurname");var cW=bb.selector.query(c6[d0],".ap-reviewRA-benCountryOfResidence");var al=bb.selector.query(c6[d0],".ap-reviewRA-benNationality");var dy=bb.selector.query(c6[d0],".ap-reviewRA-benIdentityType");var d=bb.selector.query(c6[d0],".ap-reviewRA-benIdentityNumber");var eA=bb.selector.query(c6[d0],".ap-reviewRA-benRelationship");var aV=bb.selector.query(c6[d0],".ap-reviewRA-benDateOfBirth");var dx=bb.selector.query(c6[d0],".ap-reviewRA-benPercentAllocation");cG="Individual";bk=phe.hiddenField.getValue(cv);cC=phe.hiddenField.getValue(t);c2=phe.hiddenField.getValue(cW);bZ=phe.hiddenField.getValue(al);a5=phe.hiddenField.getValue(dy);es=phe.hiddenField.getValue(d);b0=phe.hiddenField.getValue(eA);ct=phe.hiddenField.getValue(aV);cS=phe.hiddenField.getValue(dx);dU="true"}else{if(cG=="Trust"||cG=="T"){var cb=bb.selector.query(c6[d0],".ap-reviewRA-benTrustName");var d2=bb.selector.query(c6[d0],".ap-reviewRA-benRegistrationNumber");var dS=bb.selector.query(c6[d0],".ap-reviewRA-benCountryOfRegistration");var dm=bb.selector.query(c6[d0],".ap-reviewRA-benInceptionDate");var dx=bb.selector.query(c6[d0],".ap-reviewRA-benPercentAllocation");cG="Trust";eb=phe.hiddenField.getValue(cb);aw=phe.hiddenField.getValue(d2);cP=phe.hiddenField.getValue(dS);cm=phe.hiddenField.getValue(dm);cS=phe.hiddenField.getValue(dx);bO="true"}else{if(cG=="Estate"||cG=="E"){var dx=bb.selector.query(c6[d0],".ap-reviewRA-benPercentAllocation");cS=phe.hiddenField.getValue(dx);cG="Estate";G="true"}else{if(cG==""){cS="100";cG="Estate";G="true"}}}}bG++;u=u+"&beneficiaryIndividual="+dU+"&beneficiaryTrust="+bO+"&beneficiaryEstate="+G+"&beneficiaryType="+cG+"&beneficiaryNumber="+bG+"&benFirstName="+bk+"&benSurname="+cC+"&benCountryOfResidence="+c2+"&benNationality="+bZ+"&benIdentityType="+a5+"&benIdentityNumber="+es+"&benRelationship="+b0+"&benDateOfBirth="+ct+"&benTrustName="+eb+"&benRegistrationNumber="+aw+"&benInceptionDate="+cm+"&benCountryOfRegistration="+cP+"&benPercentAllocation="+cS+"&totalPercentAllocation=100"}}absa.modal.loadModal(u,absa.locale["ABCAP/General/Label/Advisor"],"","");absa.advisorService.hideModalPrint()};absa.advisorService.onClose=function(c){var b;if("newbusiness"==onReturn){b=bb.selector.query(window.document,".ap-tabBody-retirementAnnuity")}else{if("addition"==onReturn){b=bb.selector.query(window.document,".ap-retirementAnnuity-tabBody")}else{if("review"==onReturn){b=bb.selector.query(window.document,".ap-retirementAnnuity-tabBody")}}}phe.modal.hideModal();phe.tabBody.reload(b)};absa.advisorService.onCloseInv=function(c){var b;if("newbusiness"==onReturn){b=bb.selector.query(window.document,".ap-tabBody-discretionaryIvestments")}else{if("addition"==onReturn){b=bb.selector.query(window.document,".ap-investmentAccount-tabBody")}}phe.modal.hideModal();phe.tabBody.reload(b)};absa.advisorService.selectAdvisorForNewbusinessINV=function(e,b){onReturn=e;var d=".ap-applyNewBusinessINV-referenceNumber";var c=bb.selector.query(window.document,d);absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=abcap/NewBusinessINV/advisorServiceINV&actionFlag="+e+"&referenceNumber="+c.value,absa.locale["ABCAP/General/Label/Advisor"],"","");absa.advisorService.hideModalPrint()};absa.advisorService.selectAdvisorForINVaddition=function(G,aI){onReturn=aI;var E="proxy?pipe=genericEmptyResponse&xslFile=abcap/NewBusinessINV/advisorServiceINV&actionFlag=addition";var al="";var K=bb.selector.query(G,".ap-additionForRA-rootForm");var a2=bb.selector.query(K,".ap-additionForRA-completionStatus");var aq=bb.selector.query(K,".ap-additionForRA-screenId");var aY=bb.selector.query(K,".ap-additionRA-referenceNumber");var az=bb.selector.query(K,".ap-additionRA-policyNumber");var aU=bb.selector.query(K,".ap-additionRA-clientName");var aZ=bb.selector.query(K,".ap-additionForRA-clientNumber");var aS=bb.selector.query(K,".ap-additionForRA-stockAccountNum");var a0=bb.selector.query(K,".ap-additionForRA-portfolioName");var au=bb.selector.query(K,".ap-additionForRA-portfolioCode");var ab=phe.hiddenField.getValue(a2);var Y=phe.hiddenField.getValue(aq);var H=phe.hiddenField.getValue(aY);var at=phe.hiddenField.getValue(aZ);var D=phe.hiddenField.getValue(aS);var B=phe.hiddenField.getValue(a0);var a5=phe.hiddenField.getValue(au);E=E+"&screenId="+Y+"&referenceNumber="+H+"&isComplete="+ab+"&clientNumber="+at+"&stockAccountNum="+D+"&portfolioName="+B+"&fundCode="+a5;var aX="false";var aN="true";E=E+"&regularContribution="+aX+"&lumpsumContribution="+aN;if(Y==1){var W=phe.hiddenField.getValue(aU);var M=phe.hiddenField.getValue(az);E=E+"&clientName="+W+"&policyNumber="+M;var V="false";var b="false";var aV="";var aw="0";var A="";var q="";var aM="";var a1="";var r="";var a6="";var n="";if(aN=="true"){var F=bb.selector.query(K,".ap-additionRA-paymentMethodRadio");var aj=phe.radioGroup.getValue(F);var ar=bb.selector.query(K,".ap-additionRA-sourceOfFunds");var Q=bb.selector.query(K,".ap-additionRA-Amount");var av=bb.selector.query(K,".ap-additionRA-beneficiaryReference");var aR=bb.selector.query(K,".ap-additionRA-paymntDt");aV=phe.select.getValue(ar);aw=phe.textBox.getValue(Q);A=phe.inputReadOnlyText.getValue(aR);sBeneficiaryReference=phe.inputReadOnlyText.getValue(av);E=E+"&sourceOfFunds="+aV+"&lumpsumAmount="+aw+"&paymentDebitDate="+A+"&beneficiaryReference="+sBeneficiaryReference;if(aj=="OnceOff"){V="true";var u=bb.selector.query(K,".ap-additionRA-myReference");var aF=bb.selector.query(K,".apps-changePaymentDetailsST-accountToBeDebitedLinked");q=phe.textBox.getValue(u);aM=phe.select.getValue(aF);if(aM!=""){var N=aM.split(" - ");a1=N[0];r=N[1]}a6="ABSA";n="632005";E=E+"&myReference="+q+"&accountToBeDebitedOnceOffPayment="+aM+"&accountTypeOnceOffPayment="+a1+"&accountNumberOnceOffPayment="+r+"&bankNameOnceOffPayment="+a6+"&branchCodeOnceOffPayment="+n+"&methodPaymentOnline="+V+"&methodPaymentManualDeposit="+b}else{if(aj=="Manual"){b="true";E=E+"&methodPaymentOnline="+V+"&methodPaymentManualDeposit="+b}}}}else{if(Y==2){var W=phe.hiddenField.getValue(aU);var M=phe.hiddenField.getValue(az);E=E+"&clientName="+W+"&policyNumber="+M;var V="false";var b="false";var aV="";var aw="0";var A="";var q="";var aM="";var a1="";var r="";var a6="";var n="";if(aN=="true"){var F=bb.selector.query(K,".ap-additionRA-paymentMethod");var aj=phe.radioGroup.getValue(F);var ar=bb.selector.query(K,".ap-additionRA-sourceOfFund");var Q=bb.selector.query(K,".ap-additionRA-LumpsumAmount");var av=bb.selector.query(K,".ap-additionRA-beneficiaryReference");var aR=bb.selector.query(K,".ap-additionRA-paymntDt");aV=phe.hiddenField.getValue(ar);aw=phe.hiddenField.getValue(Q);A=phe.hiddenField.getValue(aR);sBeneficiaryReference=phe.hiddenField.getValue(av);E=E+"&sourceOfFunds="+aV+"&lumpsumAmount="+aw+"&paymentDebitDate="+A+"&beneficiaryReference="+sBeneficiaryReference;if(aj=="OnceOff"){V="true";var u=bb.selector.query(K,".ap-additionRA-myReference");var aF=bb.selector.query(K,".ap-additionRA-accountToBeDebitedLinked");q=phe.hiddenField.getValue(u);aM=phe.hiddenField.getValue(aF);if(aM!=""){var N=aM.split(" - ");a1=N[0];r=N[1]}a6="ABSA";n="632005";E=E+"&myReference="+q+"&accountToBeDebitedOnceOffPayment="+aM+"&accountTypeOnceOffPayment="+a1+"&accountNumberOnceOffPayment="+r+"&bankNameOnceOffPayment="+a6+"&branchCodeOnceOffPayment="+n+"&methodPaymentOnline="+V+"&methodPaymentManualDeposit="+b}else{if(aj=="Manual"){b="true";E=E+"&methodPaymentOnline="+V+"&methodPaymentManualDeposit="+b}}}var aE=bb.selector.query(K,".ap-additionRA-quoteDate");var aK=bb.selector.query(K,".ap-additionRA-quoteDescription");var ay=bb.selector.query(K,".ap-additionRA-quoteReference");var ak=bb.selector.query(K,".ap-additionRA-fundCode");var Z=bb.selector.query(K,".ap-additionRA-fundPercentage");var aH=bb.selector.query(K,".ap-additionRA-monthlyContributionNetAmount");var ae=bb.selector.query(K,".ap-additionRA-lumpsumContributionNetAmount");var f=bb.selector.query(K,".ap-additionForRA-advisorFeeOnLumpsum");var aQ=bb.selector.query(K,".ap-additionForRA-advisorFeeOnDebitOrder");var aB=bb.selector.query(K,".ap-additionForRA-advisorOngoingFee");var a4=bb.selector.query(K,".ap-additionForRA-aimsFeeOnLumpsum");var L=bb.selector.query(K,".ap-additionForRA-aimsFeeOnDebitOrder");var aT=bb.selector.query(K,".ap-additionForRA-aimsOngoingFee");var af=bb.selector.query(K,".ap-additionForRA-annualFee");var h=bb.selector.query(K,".ap-additionForRA-initialFee");var m=bb.selector.query(K,".ap-additionForRA-platformFee");var ad=bb.selector.query(K,".ap-additionForRA-presumedReturn");var v=bb.selector.query(K,".ap-additionForRA-reduction");var ax=bb.selector.query(K,".ap-additionForRA-actualReturn");var g=bb.selector.query(K,".ap-additionRA-investmentPeriod");var l=phe.inputReadOnlyText.getValue(aE);var y=phe.hiddenField.getValue(aK);var aA=phe.hiddenField.getValue(ay);var ah=phe.hiddenField.getValue(ak);var aa=phe.hiddenField.getValue(Z);var a3=phe.hiddenField.getValue(aH);var ap=phe.hiddenField.getValue(ae);var d=phe.hiddenField.getValue(f);var X=phe.hiddenField.getValue(aQ);var P=phe.hiddenField.getValue(aB);var O=phe.hiddenField.getValue(a4);var J=phe.hiddenField.getValue(L);var aW=phe.hiddenField.getValue(aT);var am=phe.hiddenField.getValue(af);var ao=phe.hiddenField.getValue(h);var k=phe.hiddenField.getValue(m);var ag=phe.hiddenField.getValue(ad);var C=phe.hiddenField.getValue(v);var U=phe.hiddenField.getValue(ax);var ac=phe.hiddenField.getValue(g);E=E+"&quotationDate="+l+"&quoteDescription="+y+"&quoteReference="+aA+"&fundPercentage="+aa+"&monthlyContributionNetAmount="+a3+"&lumpsumContributionNetAmount="+ap+"&advisorFeeOnLumpsum="+d+"&advisorFeeOnDebitOrder="+X+"&advisorOngoingFee="+P+"&aimsFeeOnLumpsum="+O+"&aimsFeeOnDebitOrder="+J+"&aimsOngoingFee="+aW+"&presumedReturn="+ag+"&reduction="+C+"&actualReturn="+U+"&investmentPeriod="+ac;var aP=bb.selector.queryAll(K,".ap-additionRA-feesDetails");for(var S=0;S<aP.length;S++){var aC=bb.selector.query(aP[S],".ap-additionForRA-categoryId");var aD=bb.selector.query(aP[S],".ap-additionForRA-typeId");var ai=bb.selector.query(aP[S],".ap-additionForRA-totalPercentage");var I=phe.hiddenField.getValue(aC);var w=phe.hiddenField.getValue(aD);var aO=phe.hiddenField.getValue(ai);E=E+"&feesNumber="+S+"&categoryId="+I+"&typeId="+w+"&totalPercentage="+aO}var p=bb.selector.queryAll(K,".ap-additionRA-fundFees");for(var S=0;S<p.length;S++){var af=bb.selector.query(p[S],".ap-additionRA-annualFee");var h=bb.selector.query(p[S],".ap-additionRA-initialFee");var m=bb.selector.query(p[S],".ap-additionRA-platformFee");var o=bb.selector.query(p[S],".ap-additionRA-quoteFundName");var aJ=bb.selector.query(p[S],".ap-additionRA-quoteFundCode");var am=phe.hiddenField.getValue(af);var ao=phe.hiddenField.getValue(h);var k=phe.hiddenField.getValue(m);var T=phe.hiddenField.getValue(o);var t=phe.hiddenField.getValue(aJ);E=E+"&annualFee="+am+"&initialFee="+ao+"&platformFee="+k+"&quoteFundName="+T+"&quoteFundCode="+t}var R=bb.selector.queryAll(K,".ap-additionINV-fundDetailsAdvisor");for(var S=0;S<R.length;S++){var aL=bb.selector.query(R[S],".ap-additionForINV-displayStatusAdvisor");var z=bb.selector.query(R[S],".ap-additionForINV-investmentDropdownAdvisor");var aG=bb.selector.query(R[S],".ap-additionForINV-percentageAllocationAdvisor");var c=bb.selector.query(R[S],".ap-additionForINV-additionAmountAdvisor");var x=phe.hiddenField.getValue(aL);var j=phe.hiddenField.getValue(z);var an=phe.hiddenField.getValue(aG);var e=phe.hiddenField.getValue(c);E=E+"&displayStatus="+x+"&investmentDropdown="+j+"&percentageAllocation="+an+"&additionAmount="+e}}}absa.modal.loadModal(E,absa.locale["ABCAP/General/Label/Advisor"],"","");absa.advisorService.hideModalPrint()};absa.advisorService.onCloseAdvisor=function(c){var b;if("newbusiness"==onReturn){b=bb.selector.query(window.document,".ap-tabBody-discretionaryIvestments")}else{if("addition"==onReturn){b=bb.selector.query(window.document,".ap-discretionaryInvestment")}}phe.modal.hideModal();phe.tabBody.reload(b)};absa.advisorService.selectAdvisorForNewbusinessRR=function(e,b){onReturn=e;var d=".ap-applyNewBusinessRR-referenceNumber";var c=bb.selector.query(window.document,d);absa.modal.loadModal("proxy?pipe=genericEmptyResponse&xslFile=aims/apply/advisorService&actionFlag="+e+"&referenceNumber="+c.value,absa.locale["ABCAP/General/Label/Advisor"],"","");absa.advisorService.hideModalPrint()};absa.advisorService.selectAdvisorForRRaddition=function(G,aI){onReturn=aI;var E="proxy?pipe=genericEmptyResponse&xslFile=aims/apply/advisorService&actionFlag=addition";var al="";var K=bb.selector.query(G,".ap-additionForAims-rootForm");var a2=bb.selector.query(K,".ap-additionRR-completionStatus");var aq=bb.selector.query(K,".ap-additionRR-screenId");var aY=bb.selector.query(K,".ap-additionRR-referenceNumber");var az=bb.selector.query(K,".ap-additionRR-policyNumber");var aU=bb.selector.query(K,".ap-additionRR-clientName");var aZ=bb.selector.query(K,".ap-additionRR-clientNumber");var aS=bb.selector.query(K,".ap-additionRR-stockAccountNum");var a0=bb.selector.query(K,".ap-additionRR-portfolioName");var au=bb.selector.query(K,".ap-additionRR-portfolioCode");var ab=phe.hiddenField.getValue(a2);var X=phe.hiddenField.getValue(aq);var H=phe.hiddenField.getValue(aY);var at=phe.hiddenField.getValue(aZ);var D=phe.hiddenField.getValue(aS);var B=phe.hiddenField.getValue(a0);var a5=phe.hiddenField.getValue(au);E=E+"&screenId="+X+"&referenceNumber="+H+"&isComplete="+ab+"&clientNumber="+at+"&stockAccountNum="+D+"&portfolioName="+B+"&fundCode="+a5;var aX="false";var aN="true";E=E+"&regularContribution="+aX+"&lumpsumContribution="+aN;if(X==1){var W=phe.hiddenField.getValue(aU);var M=phe.hiddenField.getValue(az);E=E+"&clientName="+W+"&policyNumber="+M;var V="false";var b="false";var aV="";var aw="0";var A="";var q="";var aM="";var a1="";var r="";var a6="";var n="";if(aN=="true"){var F=bb.selector.query(K,".ap-additionRR-paymentMethodRadio");var aj=phe.radioGroup.getValue(F);var ar=bb.selector.query(K,".ap-additionRR-sourceOfFunds");var Q=bb.selector.query(K,".ap-additionRR-Amount");var av=bb.selector.query(K,".ap-additionRR-beneficiaryReference");var aR=bb.selector.query(K,".ap-additionRR-paymntDt");aV=phe.select.getValue(ar);aw=phe.textBox.getValue(Q);A=phe.inputReadOnlyText.getValue(aR);sBeneficiaryReference=phe.inputReadOnlyText.getValue(av);E=E+"&sourceOfFunds="+aV+"&lumpsumAmount="+aw+"&paymentDebitDate="+A+"&beneficiaryReference="+sBeneficiaryReference;if(aj=="OnceOff"){V="true";var u=bb.selector.query(K,".ap-additionRR-myReference");var aF=bb.selector.query(K,".apps-changePaymentDetailsST-accountToBeDebitedLinked");q=phe.textBox.getValue(u);aM=phe.select.getValue(aF);if(aM!=""){var N=aM.split(" - ");a1=N[0];r=N[1]}a6="ABSA";n="632005";E=E+"&myReference="+q+"&accountToBeDebitedOnceOffPayment="+aM+"&accountTypeOnceOffPayment="+a1+"&accountNumberOnceOffPayment="+r+"&bankNameOnceOffPayment="+a6+"&branchCodeOnceOffPayment="+n+"&methodPaymentOnline="+V+"&methodPaymentManualDeposit="+b}else{if(aj=="Manual"){b="true";E=E+"&methodPaymentOnline="+V+"&methodPaymentManualDeposit="+b}}}}else{if(X==2){var W=phe.hiddenField.getValue(aU);var M=phe.hiddenField.getValue(az);E=E+"&clientName="+W+"&policyNumber="+M;var V="false";var b="false";var aV="";var aw="0";var A="";var q="";var aM="";var a1="";var r="";var a6="";var n="";if(aN=="true"){var F=bb.selector.query(K,".ap-additionRR-paymentMethod");var aj=phe.radioGroup.getValue(F);var ar=bb.selector.query(K,".ap-additionRR-sourceOfFund");var Q=bb.selector.query(K,".ap-additionRR-LumpsumAmount");var av=bb.selector.query(K,".ap-additionRR-beneficiaryReference");var aR=bb.selector.query(K,".ap-additionRR-paymntDt");aV=phe.hiddenField.getValue(ar);aw=phe.hiddenField.getValue(Q);A=phe.hiddenField.getValue(aR);sBeneficiaryReference=phe.hiddenField.getValue(av);E=E+"&sourceOfFunds="+aV+"&lumpsumAmount="+aw+"&paymentDebitDate="+A+"&beneficiaryReference="+sBeneficiaryReference;if(aj=="OnceOff"){V="true";var u=bb.selector.query(K,".ap-additionRR-myReference");var aF=bb.selector.query(K,".ap-additionRR-accountToBeDebitedLinked");q=phe.hiddenField.getValue(u);aM=phe.hiddenField.getValue(aF);if(aM!=""){var N=aM.split(" - ");a1=N[0];r=N[1]}a6="ABSA";n="632005";E=E+"&myReference="+q+"&accountToBeDebitedOnceOffPayment="+aM+"&accountTypeOnceOffPayment="+a1+"&accountNumberOnceOffPayment="+r+"&bankNameOnceOffPayment="+a6+"&branchCodeOnceOffPayment="+n+"&methodPaymentOnline="+V+"&methodPaymentManualDeposit="+b}else{if(aj=="Manual"){b="true";E=E+"&methodPaymentOnline="+V+"&methodPaymentManualDeposit="+b}}}var aE=bb.selector.query(K,".ap-additionRR-quoteDate");var aK=bb.selector.query(K,".ap-additionRR-quoteDescription");var ay=bb.selector.query(K,".ap-additionRR-quoteReference");var ak=bb.selector.query(K,".ap-additionRR-fundCode");var Z=bb.selector.query(K,".ap-additionRR-fundPercentage");var aH=bb.selector.query(K,".ap-additionRR-monthlyContributionNetAmount");var ae=bb.selector.query(K,".ap-additionRR-lumpsumContributionNetAmount");var f=bb.selector.query(K,".ap-additionRR-advisorFeeOnLumpsum");var aQ=bb.selector.query(K,".ap-additionRR-advisorFeeOnDebitOrder");var aB=bb.selector.query(K,".ap-additionRR-advisorOngoingFee");var a4=bb.selector.query(K,".ap-additionRR-aimsFeeOnLumpsum");var L=bb.selector.query(K,".ap-additionRR-aimsFeeOnDebitOrder");var aT=bb.selector.query(K,".ap-additionRR-aimsOngoingFee");var ad=bb.selector.query(K,".ap-additionRR-presumedReturn");var v=bb.selector.query(K,".ap-additionRR-reduction");var ax=bb.selector.query(K,".ap-additionRR-actualReturn");var g=bb.selector.query(K,".ap-additionRR-investmentPeriod");var m=phe.inputReadOnlyText.getValue(aE);m=m.replace(/\//g,"");var y=phe.hiddenField.getValue(aK);var aA=phe.hiddenField.getValue(ay);var ah=phe.hiddenField.getValue(ak);var aa=phe.hiddenField.getValue(Z);var a3=phe.hiddenField.getValue(aH);var ap=phe.hiddenField.getValue(ae);var d=phe.hiddenField.getValue(f);var Y=phe.hiddenField.getValue(aQ);var P=phe.hiddenField.getValue(aB);var O=phe.hiddenField.getValue(a4);var J=phe.hiddenField.getValue(L);var aW=phe.hiddenField.getValue(aT);var ag=phe.hiddenField.getValue(ad);var C=phe.hiddenField.getValue(v);var U=phe.hiddenField.getValue(ax);var ac=phe.hiddenField.getValue(g);E=E+"&quotationDate="+m+"&quoteDescription="+y+"&quoteReference="+aA+"&fundPercentage="+aa+"&monthlyContributionNetAmount="+a3+"&lumpsumContributionNetAmount="+ap+"&advisorFeeOnLumpsum="+d+"&advisorFeeOnDebitOrder="+Y+"&advisorOngoingFee="+P+"&aimsFeeOnLumpsum="+O+"&aimsFeeOnDebitOrder="+J+"&aimsOngoingFee="+aW+"&presumedReturn="+ag+"&reduction="+C+"&actualReturn="+U+"&investmentPeriod="+ac;var aP=bb.selector.queryAll(K,".ap-additionRR-feesDetails");for(var S=0;S<aP.length;S++){var aC=bb.selector.query(aP[S],".ap-additionRR-categoryId");var aD=bb.selector.query(aP[S],".ap-additionRR-typeId");var ai=bb.selector.query(aP[S],".ap-additionRR-totalPercentage");var I=phe.hiddenField.getValue(aC);var w=phe.hiddenField.getValue(aD);var aO=phe.hiddenField.getValue(ai);E=E+"&feesNumber="+S+"&categoryId="+I+"&typeId="+w+"&totalPercentage="+aO}var p=bb.selector.queryAll(K,".ap-additionRR-fundFees");for(var S=0;S<p.length;S++){var af=bb.selector.query(p[S],".ap-additionRR-annualFee");var h=bb.selector.query(p[S],".ap-additionRR-initialFee");var l=bb.selector.query(p[S],".ap-additionRR-platformFee");var o=bb.selector.query(p[S],".ap-additionRR-quoteFundName");var aJ=bb.selector.query(p[S],".ap-additionRR-quoteFundCode");var am=phe.hiddenField.getValue(af);var ao=phe.hiddenField.getValue(h);var k=phe.hiddenField.getValue(l);var T=phe.hiddenField.getValue(o);var t=phe.hiddenField.getValue(aJ);E=E+"&annualFee="+am+"&initialFee="+ao+"&platformFee="+k+"&quoteFundName="+T+"&quoteFundCode="+t}var R=bb.selector.queryAll(K,".ap-additionRR-fundDetailsAdvisor");for(var S=0;S<R.length;S++){var aL=bb.selector.query(R[S],".ap-additionRR-displayStatusAdvisor");var z=bb.selector.query(R[S],".ap-additionRR-investmentDropdownAdvisor");var aG=bb.selector.query(R[S],".ap-additionRR-percentageAllocationAdvisor");var c=bb.selector.query(R[S],".ap-additionRR-additionAmountAdvisor");var x=phe.hiddenField.getValue(aL);var j=phe.hiddenField.getValue(z);var an=phe.hiddenField.getValue(aG);var e=phe.hiddenField.getValue(c);E=E+"&displayStatus="+x+"&investmentDropdown="+j+"&percentageAllocation="+an+"&additionAmount="+e}}}absa.modal.loadModal(E,absa.locale["ABCAP/General/Label/Advisor"],"","");absa.advisorService.hideModalPrint()};absa.nonTransactional=absa.nonTransactional||{};absa.nonTransactional.OnRadioGroupChange=function(d){var e=bb.selector.queryAncestor(d,".ap-conversion-form-step0");var c=bb.selector.query(e,".ap-conversion-snoozeRow");var b=bb.selector.query(e,".ap-conversion-termsOfUseRow");if(phe.radioGroup.getValue(d)=="yes"){phe.common.hide(c);phe.common.show(b)}else{phe.common.show(c);phe.common.hide(b)}};absa.nonTransactional.onNextClick=function(k){var l=bb.selector.queryAncestor(k,".ap-conversion-form-step0");var b=bb.selector.query(l,".ap-conversion-snoozeRow");var e=bb.selector.query(l,".ap-conversion-snoozePeriod");var j=bb.selector.query(l,".ap-conversion-radioGroup");var n=phe.select.getValue(e);var g=bb.selector.query(l,".ap-conversion-checkbox");if(phe.radioGroup.getValue(j)=="yes"||phe.radioGroup.getValue(j)=="yesno"){if(absa.form.validate.checkElement(g)){phe.modal.hideModal();var d=bb.selector.queryAll(l,".ap-conversion-accNoToLink");var c=bb.selector.queryAll(l,".ap-conversion-accTypeNameToLink");var m=absa.locale["NonTransactional/General/Label/AbsaOnlineConversion"];sUrl="proxy?pipe=genericEmptyResponse&xslFile=NonTransactional/convert-step1";for(var h=0;h<d.length;h++){sUrl=sUrl+"&accNoToLink="+phe.hiddenField.getValue(d[h])+"&accTypeNameToLink="+phe.hiddenField.getValue(c[h])}absa.modal.loadModal(sUrl,m,"",absa.nonTransactional.onModalClose,"","914")}else{g.focus()}}else{if(absa.form.validate.checkElement(e)){phe.loadingMessage.showLoadingMessage(l);var f="proxy?pipe=genericWebservice&ws=PortfolioWebService&action=processTransactionalSnooze&actionType=I&snoozePeriod="+n;absa.io.makeRequest(f,function(p){phe.loadingMessage.hideLoadingMessage(l);var o=bb.html.createElementFromString(p.text);l.parentNode.replaceChild(o,l)})}}};absa.nonTransactional.onModalClose=function(d){var b=bb.selector.query(d,".ap-conversion-wizard");var c=phe.wizard.getCurrentStepIndex(b);if(c=="1"){var e=bb.selector.query(d,".ap-conversion-form3");absa.index.doLogout(2)}};absa.nonTransactional.onFinishButtonClick=function(b){var c=bb.selector.queryAncestor(b,".ap-conversion-form2");absa.index.doLogout(2)};absa.nonTransactional.reloadSite=function(b){absa.showPleaseWait();absa.index.refreshUpdaters(true,true);phe.modal.hideModal()};absa.nonTransactional.beforeSubmitAccountsStep1=function(b){var c=bb.selector.queryAncestor(b,".ap-conversion-form1");absa.form.validateAndSubmit(c)};absa.nonTransactional.startAgain=function(c){var b=bb.selector.queryAncestor(c,".ap-linkUnlink-tabBox");var e=phe.tabBox.getCurrentTabBody(b);var d=phe.tabBox.getAttribute(e,"proxyurl");phe.tabBox.setAttribute(e,"proxyurl",d);absa.lazyLoadNode(e,true)};var siteEnvironment=document.location.href;if(siteEnvironment.indexOf("xwheffc")>-1||siteEnvironment.indexOf("sit.absa.co.za")>-1||siteEnvironment.indexOf("eu.absa.co.za")>-1){var s_account="absabankdev1"}else{if(siteEnvironment.indexOf("//ib.absa.co.za")>-1){var s_account="absabanklive1"}else{var s_account="absabankdev1"}}var s=s_gi(s_account);s.cookieDomainPeriods="3";s.fpCookieDomainPeriods="3";s.currencyCode="ZAR";s.trackDownloadLinks=true;s.trackExternalLinks=true;s.trackInlineStats=true;s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";s.linkInternalFilters="javascript:,absa.co.za,v058";s.linkLeaveQueryString=false;s.linkTrackVars="None";s.linkTrackEvents="None";s.formList="";s.trackFormList=true;s.trackPageName=true;s.useCommerce=false;s.varUsed="prop11";s.eventList="";s._extraSearchEngines="";s._channelDomain="Social Media|facebook.com,flickr.com,digg.com,twitter.com,myspace.com,youtube.com,linkedin.com,stumbleupon.com,del.icio.us,reddit.com,metacafe.com,technorati.com";s._channelParameter="";s._channelPattern="Paid Search|PSC>Email|EMC>Banner|BAC>Retargeting|RTC>Social Network|SNC>Direct Mail|DMC>Print Ad|PRC>Radio Ad|RAC>TV|TVC>Events|EVC>Please Call Me|PCM";function s_getObjectID(c){var b=c.href;return b}s.getObjectID=s_getObjectID;s.usePlugins=true;function s_doPlugins(s){s.pageName=getAllProps();s.channel=getFirstProp();s.pageName=s.eVar7=s.pageName.toLowerCase();s.channel=s.eVar8=s.channel.toLowerCase();if(s.pageName==s.channel){s.channel=s.eVar8="D=pageName"}s.hier1="D=pageName";arrSections=s.pageName.split(":");var lastdefined="";for(var i=0;i<4;i++){if(typeof(arrSections[i])!="undefined"){if(i>0){var fullpath="";for(var j=0;j<=i;j++){if(j==0){fullpath+=arrSections[j]}else{fullpath+=":"+arrSections[j]}}if(fullpath==s.pageName){s["prop"+(i+1)]="D=pageName"}else{s["prop"+(i+1)]="D=c"+i+":"+arrSections[i]}}else{if(arrSections[i]==s.pageName){s["prop"+(i+1)]="D=pageName"}else{if(arrSections[i]==s.channel){s["prop"+(i+1)]="D=ch"}else{s["prop"+(i+1)]=arrSections[i]}}}}else{s["prop"+(i+1)]="D=pageName"}}s.setupFormAnalysis();s.prop30=s.eVar13=s.getNewRepeat();s.prop31=s.eVar14=s.getVisitNum("m");s.events=s.apl(s.events,"event2",",",1);s.campaign=s.getValOnce(s.getQueryParam("cmpid"),"s_campaign",0);s.eVar2=s.getValOnce(s.getQueryParam("intcmp"),"s_ev2",0);s.eVar50=s.crossVisitParticipation(s.campaign,"s_cmpid","30","5",">","purchase");s.prop8=eVar46=s.getPreviousValue(s.pageName,"gpv_p8","");s.prop18=s.eVar18=s.getTimeParting("h","+2");s.prop19=s.eVar19=s.getTimeParting("d","+2");s.prop20=s.eVar20=s.getTimeParting("w","+2");if(document.referrer.indexOf("absa.co.za")>-1){var ExtReferrer=""}else{var ExtReferrer=document.referrer}if(ExtReferrer!=""){s.eVar17=ExtReferrer}s.prop9=s.eVar45=s.getQueryParam("cS");s.channelManager("cmpid",":","s_cm","0");if(s._channel=="Natural Search"){s._channel="Organic";s._campaign=s._partner+"-"+s._channel+"-"+s._keywords.toLowerCase()}if(s._channel=="Referrers"){s._channel="Other Referrers";s._campaign=s._channel+"-"+s._referringDomain}s.campaign=s._campaign;s.eVar21=s._channel;s.eVar22=s._referrer;s.eVar23=s._referringDomain;s.eVar24=s._partner;s.eVar25=s._keywords;s.eVar26=s.crossVisitParticipation(s.eVar21,"s_atx","90","5"," > ","","1");if(document.referrer==""){s.eVar3="typed/bookmarked";s.eVar1="non-search";s.eVar2="non-internal campaign";s.eVar55="non-browse"}var referrer=s.split(document.referrer,"/");var rDomain=referrer[2]||"";var int_domains=s.split(s.linkInternalFilters,",");var isExternalURL=true;for(var i=0;i<int_domains.length;i++){if(rDomain.indexOf(int_domains[i])!=-1){isExternalURL=false}}if(isExternalURL){s.eVar3="external referrer";s.eVar1="non-search";s.eVar2="non-internal campaign";s.eVar55="non-browse"}if(typeof(s.eVar21)!="undefined"){if(s.eVar21.indexOf("Typed/Bookmarked")==-1){s.eVar3="external channel: "+s.eVar21;s.eVar1="non-search";s.eVar2="non-internal campaign";s.eVar55="non-browse"}}else{if(typeof(s.eVar1)!="undefined"){s.eVar3="internal keyword search";s.eVar2="non-internal campaign";s.eVar55="non-browse"}else{if(typeof(s.eVar23)!="undefined"){s.linkTrackVars=s.apl(s.linkTrackVars,"eVar3,eVar1,eVar2,eVar55",",",2);s.eVar3="internal campaign";s.eVar1="non-search";s.eVar55="non-browse"}else{if(typeof(s.eVar55)!="undefined"){s.eVar3="browse";s.eVar1="non-search";s.eVar2="non-internal campaign"}else{if(s.events.indexOf("event7")>-1){s.eVar3="unknown at time of completion";s.eVar1=s.eVar2=s.eVar55="D=v3"}else{if(typeof(s.eVar3)!="undefined"){s.eVar1="non-search";s.eVar2="non-internal campaign";s.eVar55="non-browse"}}}}}}s.prop5=s.getQueryParam("qt").replace("+","");if(s.prop5!=""){s.prop5=s.eVar1=s.prop5.toLowerCase();var t_search=s.getValOnce(s.eVar1,"ev1",0);if(t_search!=""){s.events=s.apl(s.events,"event1",",",1);s.prop6=s.eVar49="D=c8"}}s.url=s.downloadLinkHandler();if(s.url){s.prop34=s.eVar51=s.url.substring(s.url.lastIndexOf("/")+1,s.url.length);s.events=s.apl(s.events,"event23",",",2);s.linkTrackVars="prop34,eVar51,events";s.linkTrackEvents="event23";if(s.prop34.toLowerCase().split(".").pop()=="pdf"){s.linkTrackVars=s.apl(s.linkTrackVars,"prop29,eVar43",",",2);s.linkTrackEvents=s.apl(s.linkTrackEvents,"event25",",",2);s.prop29=s.eVar43=s.prop34;s.events=s.apl(s.events,"event25",",",2)}}s.setupDynamicObjectIDs();var adata=getMetaContent();var objJSON=eval("(function(){return "+adata+";})()");for(var key in objJSON){if(key=="events"){s.events=s.apl(s.events,objJSON[key],",",2)}else{s[key]=objJSON[key]}}if(s.events.indexOf("prodView")>-1){s.events=s.apl(s.events,"event21",",",2)}}s.doPlugins=s_doPlugins;function getMetaContent(){var b=document.getElementsByTagName("meta");for(i=0;i<b.length;i++){if(b[i].getAttribute("name")=="st:catalyst"){return b[i].getAttribute("content")}}return""}function getProps(){var c=window.location.pathname.indexOf("/Absacoza/");var b;if(c>-1){b=location.pathname.replace("/Absacoza/","").replace("-%26-"," & ");if(b.length>0){return b.slice(b).split("/")}}return["Home"]}function getAllProps(){var c=getProps();var e,d;for(var b=0;b<c.length;b++){e=c[b];if(b==0){d=e}else{d=d+":"+e}}return d}function getFirstProp(){var b=getProps();var c;if(b.length>0){c=b[0]}return c}function addLoadEvent(b){var c=window.onload;if(typeof window.onload!="function"){window.onload=b}else{window.onload=function(){if(c){c()}b()}}}function OmnitureContactUs(c){var b=s_gi(s_account);b.linkTrackVars="prop21";b.linkTrackEvents="None";b.prop21=c;b.tl(true,"o","Contact Us:"+c)}function OmnitureToolUsage(c){var b=s_gi(s_account);b.linkTrackVars="events,prop17,eVar5";b.linkTrackEvents="event26";b.eVar5=b.prop17=c;b.events="event26";b.tl(true,"o",c+" open")}function OmnitureToolUsageComplete(c){var b=s_gi(s_account);b.linkTrackVars="events,eVar5";b.linkTrackEvents="event18";b.eVar5=c;b.events="event18";b.tl(true,"o",c+" used")}function CustomerAction(c){var b=s_gi(s_account);b.linkTrackVars="events,prop28,prop27,eVar44";b.linkTrackEvents="event24";b.prop27=b.eVar44=c;b.prop28=getAllProps().toLowerCase();b.events="event24";b.tl(true,"o",c)}function OmnitureSocialClick(c){var b=s_gi(s_account);b.linkTrackVars="events,eVar12";b.linkTrackEvents="event22";b.eVar12=c;b.events="event22";b.tl(true,"o","Social Click:"+c)}addLoadEvent(function(){if(document.getElementById("VisitBranch")){document.getElementById("VisitBranch").onclick=function(){CustomerAction("Visit Branch")}}});addLoadEvent(function(){if(document.getElementById("LogonButton")){document.getElementById("LogonButton").onclick=function(){var b=s_gi(s_account);b.linkTrackVars="events";b.linkTrackEvents="event17";b.events="event17";b.tl(true,"o","Logon")}}});addLoadEvent(function(){if(document.getElementById("RegisterButton")){document.getElementById("RegisterButton").onclick=function(){var b=s_gi(s_account);b.linkTrackVars="events";b.linkTrackEvents="event19";b.events="event19";b.tl(true,"o","Register")}}});addLoadEvent(function(){if(document.getElementById("ApplyNow")){var b=document.getElementById("ApplyNow").onclick;document.getElementById("ApplyNow").onclick=function(){CustomerAction("Apply Now");b()}}});addLoadEvent(function(){if(document.getElementById("hover3")){var b=document.getElementById("hover3").onclick;document.getElementById("hover3").onclick=function(){CustomerAction("Add To Favourites");b()}}});addLoadEvent(function(){if(document.getElementById("hover2")){document.getElementById("hover2").onclick=function(){CustomerAction("Change Text Size")}}});addLoadEvent(function(){if(document.getElementById("hover1")){var b=document.getElementById("hover1").onclick;document.getElementById("hover1").onclick=function(){CustomerAction("Print Friendly Version");b()}}});addLoadEvent(function(){var b=document.getElementsByTagName("a");for(var d=0;d<b.length;d++){var c=b[d];if(c.getAttribute("href")){if(c.getAttribute("href").indexOf("mailto:")>-1){c.onclick=function(){CustomerAction(this.getAttribute("href").replace("mailto:",""))}}}}});s.channelManager=new Function("a","b","c","V","var s=this,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,W,X,Y;g=s.referrer?s.referrer:document.referrer;g=g.toLowerCase();if(!g){h='1'}i=g.indexOf('?')>-1?g.indexOf('?'):g.length;j=g.substring(0,i);k=s.linkInternalFilters.toLowerCase();k=s.split(k,',');l=k.length;for(m=0;m<l;m++){n=j.indexOf(k[m])==-1?'':g;if(n)o=n}if(!o&&!h){p=g;q=g.indexOf('//')>-1?g.indexOf('//')+2:0;r=g.indexOf('/',q)>-1?g.indexOf('/',q):i;t=g.substring(q,r);t=t.toLowerCase();u=t;P='Referrers';v=s.seList+'>'+s._extraSearchEngines;if(V=='1'){j=s.repl(j,'oogle','%');j=s.repl(j,'ahoo','^');g=s.repl(g,'as_q','*');}A=s.split(v,'>');B=A.length;for(C=0;C<B;C++){D=A[C];D=s.split(D,'|');E=s.split(D[0],',');F=E.length;for(G=0;G<F;G++){H=j.indexOf(E[G]);if(H>-1){I=s.split(D[1],',');J=I.length;for(K=0;K<J;K++){L=s.getQueryParam(I[K],'',g);if(L){L=L.toLowerCase();M=L;if(D[2]){u=D[2];N=D[2]}else{N=t}if(V=='1'){N=s.repl(N,'#',' - ');g=s.repl(g,'*','as_q');N=s.repl(N,'^','ahoo');N=s.repl(N,'%','oogle');}}}}}}}O=s.getQueryParam(a,b);if(O){u=O;if(M){P='Paid Search'}else{P='Paid Non-Search';}}if(!O&&M){u=N;P='Natural Search'}f=s._channelDomain;if(f){k=s.split(f,'>');l=k.length;for(m=0;m<l;m++){Q=s.split(k[m],'|');R=s.split(Q[1],',');S=R.length;for(T=0;T<S;T++){W=j.indexOf(R[T]);if(W>-1)P=Q[0]}}}d=s._channelParameter;if(d){k=s.split(d,'>');l=k.length;for(m=0;m<l;m++){Q=s.split(k[m],'|');R=s.split(Q[1],',');S=R.length;for(T=0;T<S;T++){U=s.getQueryParam(R[T]);if(U)P=Q[0]}}}e=s._channelPattern;if(e){k=s.split(e,'>');l=k.length;for(m=0;m<l;m++){Q=s.split(k[m],'|');R=s.split(Q[1],',');S=R.length;for(T=0;T<S;T++){X=O.indexOf(R[T]);if(X==0)P=Q[0]}}}if(h=='1'&&!O){u=P=t=p='Direct Load'}T=M+u+t;U=c?'c':'c_m';if(c!='0'){T=s.getValOnce(T,U,0);}if(T)M=M?M:'n/a';s._referrer=T&&p?p:'';s._referringDomain=T&&t?t:'';s._partner=T&&N?N:'';s._campaignID=T&&O?O:'';s._campaign=T&&u?u:'';s._keywords=T&&M?M:'';s._channel=T&&P?P:'';");s.seList="altavista.co,altavista.de|q,r|AltaVista>.aol.,suche.aolsvc.de|q,query|AOL>ask.jp,ask.co|q,ask|Ask>www.baidu.com|wd|Baidu>daum.net,search.daum.net|q|Daum>google.,googlesyndication.com|q,as_q|Google>icqit.com|q|icq>bing.com|q|Microsoft Bing>myway.com|searchfor|MyWay.com>naver.com,search.naver.com|query|Naver>netscape.com|query,search|Netscape Search>reference.com|q|Reference.com>seznam|w|Seznam.cz>abcsok.no|q|Startsiden>tiscali.it,www.tiscali.co.uk|key,query|Tiscali>virgilio.it|qs|Virgilio>yahoo.com,yahoo.co.jp|p,va|Yahoo!>yandex|text|Yandex.ru>search.cnn.com|query|CNN Web Search>search.earthlink.net|q|Earthlink Search>search.comcast.net|q|Comcast Search>search.rr.com|qs|RoadRunner Search>optimum.net|q|Optimum Search";s.getVisitNum=new Function("var s=this,e=new Date(),cval,cvisit,ct=e.getTime(),c='s_vnum',c2='s_invisit';e.setTime(ct+30*24*60*60*1000);cval=s.c_r(c);if(cval){var i=cval.indexOf('&vn='),str=cval.substring(i+4,cval.length),k;}cvisit=s.c_r(c2);if(cvisit){if(str){e.setTime(ct+30*60*1000);s.c_w(c2,'true',e);return str;}else return 'unknown visit number';}else{if(str){str++;k=cval.substring(0,i);e.setTime(k);s.c_w(c,k+'&vn='+str,e);e.setTime(ct+30*60*1000);s.c_w(c2,'true',e);return str;}else{s.c_w(c,ct+30*24*60*60*1000+'&vn=1',e);e.setTime(ct+30*60*1000);s.c_w(c2,'true',e);return 1;}}");s.crossVisitParticipation=new Function("v","cn","ex","ct","dl","ev","dv","var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.length;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}if(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape(v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array();if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=arry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.length-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date().getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td.getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:',',front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{delim:dl});if(ce)s.c_w(cn,'');return r;");s.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}");s.setupFormAnalysis=new Function("var s=this;if(!s.fa){s.fa=new Object;var f=s.fa;f.ol=s.wd.onload;s.wd.onload=s.faol;f.uc=s.useCommerce;f.vu=s.varUsed;f.vl=f.uc?s.eventList:'';f.tfl=s.trackFormList;f.fl=s.formList;f.va=new Array('','','','')}");s.sendFormEvent=new Function("t","pn","fn","en","var s=this,f=s.fa;t=t=='s'?t:'e';f.va[0]=pn;f.va[1]=fn;f.va[3]=t=='s'?'Success':en;s.fasl(t);f.va[1]='';f.va[3]='';");s.faol=new Function("e","var s=s_c_il["+s._in+"],f=s.fa,r=true,fo,fn,i,en,t,tf;if(!e)e=s.wd.event;f.os=new Array;if(f.ol)r=f.ol(e);if(s.d.forms&&s.d.forms.length>0){for(i=s.d.forms.length-1;i>=0;i--){fo=s.d.forms[i];fn=fo.name;tf=f.tfl&&s.pt(f.fl,',','ee',fn)||!f.tfl&&!s.pt(f.fl,',','ee',fn);if(tf){f.os[fn]=fo.onsubmit;fo.onsubmit=s.faos;f.va[1]=fn;f.va[3]='No Data Entered';for(en=0;en<fo.elements.length;en++){el=fo.elements[en];t=el.type;if(t&&t.toUpperCase){t=t.toUpperCase();var md=el.onmousedown,kd=el.onkeydown,omd=md?md.toString():'',okd=kd?kd.toString():'';if(omd.indexOf('.fam(')<0&&okd.indexOf('.fam(')<0){el.s_famd=md;el.s_fakd=kd;el.onmousedown=s.fam;el.onkeydown=s.fam}}}}}f.ul=s.wd.onunload;s.wd.onunload=s.fasl;}return r;");s.faos=new Function("e","var s=s_c_il["+s._in+"],f=s.fa,su;if(!e)e=s.wd.event;if(f.vu){s[f.vu]='';f.va[1]='';f.va[3]='';}su=f.os[this.name];return su?su(e):true;");s.fasl=new Function("e","var s=s_c_il["+s._in+"],f=s.fa,a=f.va,l=s.wd.location,ip=s.trackPageName,p=s.pageName;if(a[1]!=''&&a[3]!=''){a[0]=!p&&ip?l.host+l.pathname:a[0]?a[0]:p;if(!f.uc&&a[3]!='No Data Entered'){if(e=='e')a[2]='Error';else if(e=='s')a[2]='Success';else a[2]='Abandon'}else a[2]='';var tp=ip?a[0]+':':'',t3=e!='s'?':('+a[3]+')':'',ym=!f.uc&&a[3]!='No Data Entered'?tp+a[1]+':'+a[2]+t3:tp+a[1]+t3,ltv=s.linkTrackVars,lte=s.linkTrackEvents,up=s.usePlugins;if(f.uc){s.linkTrackVars=ltv=='None'?f.vu+',events':ltv+',events,'+f.vu;s.linkTrackEvents=lte=='None'?f.vl:lte+','+f.vl;f.cnt=-1;if(e=='e')s.events=s.pt(f.vl,',','fage',2);else if(e=='s')s.events=s.pt(f.vl,',','fage',1);else s.events=s.pt(f.vl,',','fage',0)}else{s.linkTrackVars=ltv=='None'?f.vu:ltv+','+f.vu}s[f.vu]=ym;s.usePlugins=false;var faLink=new Object();faLink.href='#';s.tl(faLink,'o','Form Analysis');s[f.vu]='';s.usePlugins=up}return f.ul&&e!='e'&&e!='s'?f.ul(e):true;");s.fam=new Function("e","var s=s_c_il["+s._in+"],f=s.fa;if(!e) e=s.wd.event;var o=s.trackLastChanged,et=e.type.toUpperCase(),t=this.type.toUpperCase(),fn=this.form.name,en=this.name,sc=false;if(document.layers){kp=e.which;b=e.which}else{kp=e.keyCode;b=e.button}et=et=='MOUSEDOWN'?1:et=='KEYDOWN'?2:et;if(f.ce!=en||f.cf!=fn){if(et==1&&b!=2&&'BUTTONSUBMITRESETIMAGERADIOCHECKBOXSELECT-ONEFILE'.indexOf(t)>-1){f.va[1]=fn;f.va[3]=en;sc=true}else if(et==1&&b==2&&'TEXTAREAPASSWORDFILE'.indexOf(t)>-1){f.va[1]=fn;f.va[3]=en;sc=true}else if(et==2&&kp!=9&&kp!=13){f.va[1]=fn;f.va[3]=en;sc=true}if(sc){nface=en;nfacf=fn}}if(et==1&&this.s_famd)return this.s_famd(e);if(et==2&&this.s_fakd)return this.s_fakd(e);");s.ee=new Function("e","n","return n&&n.toLowerCase?e.toLowerCase()==n.toLowerCase():false;");s.fage=new Function("e","a","var s=this,f=s.fa,x=f.cnt;x=x?x+1:1;f.cnt=x;return x==a?e:'';");s.setupDynamicObjectIDs=new Function("var s=this;if(!s.doi){s.doi=1;if(s.apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.wd.attachEvent)s.wd.attachEvent('onload',s.setOIDs);else if(s.wd.addEventListener)s.wd.addEventListener('load',s.setOIDs,false);else{s.doiol=s.wd.onload;s.wd.onload=s.setOIDs}}s.wd.s_semaphore=1}");s.setOIDs=new Function("e","var s=s_c_il["+s._in+"],b=s.eh(s.wd,'onload'),o='onclick',x,l,u,c,i,a=new Array;if(s.doiol){if(b)s[b]=s.wd[b];s.doiol(e)}if(s.d.links){for(i=0;i<s.d.links.length;i++){l=s.d.links[i];c=l[o]?''+l[o]:'';b=s.eh(l,o);z=l[b]?''+l[b]:'';u=s.getObjectID(l);if(u&&c.indexOf('s_objectID')<0&&z.indexOf('s_objectID')<0){u=s.repl(u,'\"','');u=s.repl(u,'\\n','').substring(0,97);l.s_oc=l[o];a[u]=a[u]?a[u]+1:1;x='';if(c.indexOf('.t(')>=0||c.indexOf('.tl(')>=0||c.indexOf('s_gs(')>=0)x='var x=\".tl(\";';x+='s_objectID=\"'+u+'_'+a[u]+'\";return this.s_oc?this.s_oc(e):true';if(s.isns&&s.apv>=5)l.setAttribute(o,x);l[o]=new Function('e',x)}}}s.wd.s_semaphore=0;return true");s.getQueryParam=new Function("p","d","u","var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.location);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0?p.length:i;t=s.p_gpv(p.substring(0,i),u+'');if(t){t=t.indexOf('#')>-1?t.substring(0,t.indexOf('#')):t;}if(t)v+=v?d+t:t;p=p.substring(i==p.length?i:i+1)}return v");s.p_gpv=new Function("k","u","var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v=s.pt(q,'&','p_gvf',k)}return v");s.p_gvf=new Function("t","k","if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'True':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s.epa(v)}return ''");s.getTimeParting=new Function("t","z","y","l","var s=this,d,A,U,X,Z,W,B,C,D,Y;d=new Date();A=d.getFullYear();Y=U=String(A);if(s.dstStart&&s.dstEnd){B=s.dstStart;C=s.dstEnd}else{;U=U.substring(2,4);X='092925|102831|112730|122528|133127|143026|152925|162730|172629|182828|193127';X=s.split(X,'|');for(W=0;W<=10;W++){Z=X[W].substring(0,2);if(U==Z){B=X[W].substring(2,4);C=X[W].substring(4,6)}}if(!B||!C){B='29';C='25'}B='03/'+B+'/'+A;C='10/'+C+'/'+A;}D=new Date('1/1/2000');if(D.getDay()!=6||D.getMonth()!=0){return'Data Not Available'}else{z=z?z:'0';z=parseFloat(z);B=new Date(B);C=new Date(C);W=new Date();if(W>B&&W<C&&l!='0'){z=z+1}W=W.getTime()+(W.getTimezoneOffset()*60000);W=new Date(W+(3600000*z));X=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];B=W.getHours();C=W.getMinutes();D=W.getDay();Z=X[D];U='AM';A='Weekday';X='00';if(C>30){X='30'}if(B>=12){U='PM';B=B-12};if(B==0){B=12};if(D==6||D==0){A='Weekend'}W=B+':'+X+U;if(y&&y!=Y){return'Data Not Available'}else{if(t){if(t=='h'){return W}if(t=='d'){return Z}if(t=='w'){return A}}else{return Z+', '+W}}}");s.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}");s.join=new Function("v","p","var s = this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back:'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0;x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);else str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;");s.downloadLinkHandler=new Function("p","var s=this,h=s.p_gh(),n='linkDownloadFileTypes',i,t;if(!h||(s.linkType&&(h||s.linkName)))return '';i=h.indexOf('?');t=s[n];s[n]=p?p:t;if(s.lt(h)=='d')s.linkType='d';else h='';s[n]=t;return h;");s.p_gh=new Function("var s=this;if(!s.eo&&!s.lnk)return '';var o=s.eo?s.eo:s.lnk,y=s.ot(o),n=s.oid(o),x=o.s_oidt;if(s.eo&&o==s.eo){while(o&&!n&&y!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(!o)return '';y=s.ot(o);n=s.oid(o);x=o.s_oidt}}return o.href?o.href:'';");s.repl=new Function("x","o","n","var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x.substring(i+o.length);i=x.indexOf(o,i+l)}return x");s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a");s.getValOnce=new Function("v","c","e","var s=this,a=new Date,v=v?v:v='',c=c?c:c='s_gvo',e=e?e:0,k=s.c_r(c);if(v){a.setTime(a.getTime()+e*86400000);s.c_w(c,v,e?a:0);}return v==k?'':v");s.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l");s.visitorNamespace="absabank";s.trackingServer="absabank.d2.sc.omtrdc.net";var s_code="",s_objectID;function s_gi(h,j,A){var o="s.version='H.23.3';s.an=s_an;s.logDebug=function(m){var s=this,tcf=new Function('var e;try{console.log(\"'+s.rep(s.rep(m,\"\\n\",\"\\\\n\"),\"\\\"\",\"\\\\\\\"\")+'\");}catch(e){}');tcf()};s.cls=function(x,c){var i,y='';if(!c)c=this.an;for(i=0;i<x.length;i++){n=x.substring(i,i+1);if(c.indexOf(n)>=0)y+=n}return y};s.fl=function(x,l){return x?(''+x).substring(0,l):x};s.co=function(o){if(!o)return o;var n=new Object,x;for(x in o)if(x.indexOf('select')<0&&x.indexOf('filter')<0)n[x]=o[x];return n};s.num=function(x){x=''+x;for(var p=0;p<x.length;p++)if(('0123456789').indexOf(x.substring(p,p+1))<0)return 0;return 1};s.rep=s_rep;s.sp=s_sp;s.jn=s_jn;s.ape=function(x){var s=this,h='0123456789ABCDEF',i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3)x=encodeURIComponent(x);else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.substring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=escape(''+x);x=s.rep(x,'+','%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00'+x.substring(i);i=x.indexOf('%',i)}}}return x};s.epa=function(x){var s=this;if(x){x=s.rep(''+x,'+',' ');return s.em==3?decodeURIComponent(x):unescape(x)}return x};s.pt=function(x,d,f,a){var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r;z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return ''};s.isf=function(t,a){var c=a.indexOf(':');if(c>=0)a=a.substring(0,c);c=a.indexOf('=');if(c>=0)a=a.substring(0,c);if(t.substring(0,2)=='s_')t=t.substring(2);return (t!=''&&t==a)};s.fsf=function(t,a){var s=this;if(s.pt(a,',','isf',t))s.fsg+=(s.fsg!=''?',':'')+t;return 0};s.fs=function(x,f){var s=this;s.fsg='';s.pt(x,',','fsf',f);return s.fsg};s.si=function(){var s=this,i,k,v,c=s_gi+'var s=s_gi(\"'+s.oun+'\");s.sa(\"'+s.un+'\");';for(i=0;i<s.va_g.length;i++){k=s.va_g[i];v=s[k];if(v!=undefined){if(typeof(v)!='number')c+='s.'+k+'=\"'+s_fe(v)+'\";';else c+='s.'+k+'='+v+';'}}c+=\"s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';\";return c};s.c_d='';s.c_gdf=function(t,a){var s=this;if(!s.num(t))return 1;return 0};s.c_gd=function(){var s=this,d=s.wd.location.hostname,n=s.fpCookieDomainPeriods,p;if(!n)n=s.cookieDomainPeriods;if(d&&!s.c_d){n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');if(p>=0){while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'.','c_gdf',0)?d.substring(p):d}}return s.c_d};s.c_r=function(k){var s=this;k=s.ape(k);var c=' '+s.d.cookie,i=c.indexOf(' '+k+'='),e=i<0?i:c.indexOf(';',i),v=i<0?'':s.epa(c.substring(i+2+k.length,e<0?c.length:e));return v!='[[B]]'?v:''};s.c_w=function(k,v,e){var s=this,d=s.c_gd(),l=s.cookieLifetime,t;v=''+v;l=l?(''+l).toUpperCase():'';if(e&&l!='SESSION'&&l!='NONE'){t=(v!=''?parseInt(l?l:0):-60);if(t){e=new Date;e.setTime(e.getTime()+(t*1000))}}if(k&&l!='NONE'){s.d.cookie=k+'='+s.ape(v!=''?v:'[[B]]')+'; path=/;'+(e&&l!='SESSION'?' expires='+e.toGMTString()+';':'')+(d?' domain='+d+';':'');return s.c_r(k)==v}return 0};s.eh=function(o,e,r,f){var s=this,b='s_'+e+'_'+s._in,n=-1,l,i,x;if(!s.ehl)s.ehl=new Array;l=s.ehl;for(i=0;i<l.length&&n<0;i++){if(l[i].o==o&&l[i].e==e)n=i}if(n<0){n=i;l[n]=new Object}x=l[n];x.o=o;x.e=e;f=r?x.b:f;if(r||f){x.b=r?0:o[e];x.o[e]=f}if(x.b){x.o[b]=x.b;return b}return 0};s.cet=function(f,a,t,o,b){var s=this,r,tcf;if(s.apv>=5&&(!s.isopera||s.apv>=7)){tcf=new Function('s','f','a','t','var e,r;try{r=s[f](a)}catch(e){r=s[t](e)}return r');r=tcf(s,f,a,t)}else{if(s.ismac&&s.u.indexOf('MSIE 4')>=0)r=s[b](a);else{s.eh(s.wd,'onerror',0,o);r=s[f](a);s.eh(s.wd,'onerror',1)}}return r};s.gtfset=function(e){var s=this;return s.tfs};s.gtfsoe=new Function('e','var s=s_c_il['+s._in+'],c;s.eh(window,\"onerror\",1);s.etfs=1;c=s.t();if(c)s.d.write(c);s.etfs=0;return true');s.gtfsfb=function(a){return window};s.gtfsf=function(w){var s=this,p=w.parent,l=w.location;s.tfs=w;if(p&&p.location!=l&&p.location.host==l.host){s.tfs=p;return s.gtfsf(s.tfs)}return s.tfs};s.gtfs=function(){var s=this;if(!s.tfs){s.tfs=s.wd;if(!s.etfs)s.tfs=s.cet('gtfsf',s.tfs,'gtfset',s.gtfsoe,'gtfsfb')}return s.tfs};s.mrq=function(u){var s=this,l=s.rl[u],n,r;s.rl[u]=0;if(l)for(n=0;n<l.length;n++){r=l[n];s.mr(0,0,r.r,r.t,r.u)}};s.flushBufferedRequests=function(){};s.mr=function(sess,q,rs,ta,u){var s=this,dc=s.dc,t1=s.trackingServer,t2=s.trackingServerSecure,tb=s.trackingServerBase,p='.sc',ns=s.visitorNamespace,un=s.cls(u?u:(ns?ns:s.fun)),r=new Object,l,imn='s_i_'+(un),im,b,e;if(!rs){if(t1){if(t2&&s.ssl)t1=t2}else{if(!tb)tb='2o7.net';if(dc)dc=(''+dc).toLowerCase();else dc='d1';if(tb=='2o7.net'){if(dc=='d1')dc='112';else if(dc=='d2')dc='122';p=''}t1=un+'.'+dc+'.'+p+tb}rs='http'+(s.ssl?'s':'')+'://'+t1+'/b/ss/'+s.un+'/'+(s.mobile?'5.1':'1')+'/'+s.version+'/'+sess+'?AQB=1&ndh=1'+(q?q:'')+'&AQE=1';if(s.isie&&!s.ismac)rs=s.fl(rs,2047)}if(s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){if(!s.rc)s.rc=new Object;if(!s.rc[un]){s.rc[un]=1;if(!s.rl)s.rl=new Object;s.rl[un]=new Array;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].mrq(\"'+un+'\")',750)}else{l=s.rl[un];if(l){r.t=ta;r.u=un;r.r=rs;l[l.length]=r;return ''}imn+='_'+s.rc[un];s.rc[un]++}im=s.wd[imn];if(!im)im=s.wd[imn]=new Image;im.s_l=0;im.onload=new Function('e','this.s_l=1;var wd=window,s;if(wd.s_c_il){s=wd.s_c_il['+s._in+'];s.mrq(\"'+un+'\");s.nrs--;if(!s.nrs)s.m_m(\"rr\")}');if(!s.nrs){s.nrs=1;s.m_m('rs')}else s.nrs++;if(s.debugTracking){var d='AppMeasurement Debug: '+rs,dl=s.sp(rs,'&'),dln;for(dln=0;dln<dl.length;dln++)d+=\"\\n\\t\"+s.epa(dl[dln]);s.logDebug(d)}im.src=rs;if((!ta||ta=='_self'||ta=='_top'||(s.wd.name&&ta==s.wd.name))&&rs.indexOf('&pe=')>=0){b=e=new Date;while(!im.s_l&&e.getTime()-b.getTime()<500)e=new Date}return ''}return '<im'+'g sr'+'c=\"'+rs+'\" width=1 height=1 border=0 alt=\"\">'};s.gg=function(v){var s=this;if(!s.wd['s_'+v])s.wd['s_'+v]='';return s.wd['s_'+v]};s.glf=function(t,a){if(t.substring(0,2)=='s_')t=t.substring(2);var s=this,v=s.gg(t);if(v)s[t]=v};s.gl=function(v){var s=this;if(s.pg)s.pt(v,',','glf',0)};s.rf=function(x){var s=this,y,i,j,h,p,l=0,q,a,b='',c='',t;if(x&&x.length>255){y=''+x;i=y.indexOf('?');if(i>0){q=y.substring(i+1);y=y.substring(0,i);h=y.toLowerCase();j=0;if(h.substring(0,7)=='http://')j+=7;else if(h.substring(0,8)=='https://')j+=8;i=h.indexOf(\"/\",j);if(i>0){h=h.substring(j,i);p=y.substring(i);y=y.substring(0,i);if(h.indexOf('google')>=0)l=',q,ie,start,search_key,word,kw,cd,';else if(h.indexOf('yahoo.co')>=0)l=',p,ei,';if(l&&q){a=s.sp(q,'&');if(a&&a.length>1){for(j=0;j<a.length;j++){t=a[j];i=t.indexOf('=');if(i>0&&l.indexOf(','+t.substring(0,i)+',')>=0)b+=(b?'&':'')+t;else c+=(c?'&':'')+t}if(b&&c)q=b+'&'+c;else c=''}i=253-(q.length-c.length)-y.length;x=y+(i>0?p.substring(0,i):'')+'?'+q}}}}return x};s.s2q=function(k,v,vf,vfp,f){var s=this,qs='',sk,sv,sp,ss,nke,nk,nf,nfl=0,nfn,nfm;if(k==\"contextData\")k=\"c\";if(v){for(sk in v) {if((!f||sk.substring(0,f.length)==f)&&v[sk]&&(!vf||vf.indexOf(','+(vfp?vfp+'.':'')+sk+',')>=0)){nfm=0;if(nfl)for(nfn=0;nfn<nfl.length;nfn++)if(sk.substring(0,nfl[nfn].length)==nfl[nfn])nfm=1;if(!nfm){if(qs=='')qs+='&'+k+'.';sv=v[sk];if(f)sk=sk.substring(f.length);if(sk.length>0){nke=sk.indexOf('.');if(nke>0){nk=sk.substring(0,nke);nf=(f?f:'')+nk+'.';if(!nfl)nfl=new Array;nfl[nfl.length]=nf;qs+=s.s2q(nk,v,vf,vfp,nf)}else{if(typeof(sv)=='boolean'){if(sv)sv='true';else sv='false'}if(sv){if(vfp=='retrieveLightData'&&f.indexOf('.contextData.')<0){sp=sk.substring(0,4);ss=sk.substring(4);if(sk=='transactionID')sk='xact';else if(sk=='channel')sk='ch';else if(sk=='campaign')sk='v0';else if(s.num(ss)){if(sp=='prop')sk='c'+ss;else if(sp=='eVar')sk='v'+ss;else if(sp=='list')sk='l'+ss;else if(sp=='hier'){sk='h'+ss;sv=sv.substring(0,255)}}}qs+='&'+s.ape(sk)+'='+s.ape(sv)}}}}}}if(qs!='')qs+='&.'+k}return qs};s.hav=function(){var s=this,qs='',l,fv='',fe='',mn,i,e;if(s.lightProfileID){l=s.va_m;fv=s.lightTrackVars;if(fv)fv=','+fv+','+s.vl_mr+','}else{l=s.va_t;if(s.pe||s.linkType){fv=s.linkTrackVars;fe=s.linkTrackEvents;if(s.pe){mn=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1);if(s[mn]){fv=s[mn].trackVars;fe=s[mn].trackEvents}}}if(fv)fv=','+fv+','+s.vl_l+','+s.vl_l2;if(fe){fe=','+fe+',';if(fv)fv+=',events,'}if (s.events2)e=(e?',':'')+s.events2}for(i=0;i<l.length;i++){var k=l[i],v=s[k],b=k.substring(0,4),x=k.substring(4),n=parseInt(x),q=k;if(!v)if(k=='events'&&e){v=e;e=''}if(v&&(!fv||fv.indexOf(k)>=0)&&k!='linkName'&&k!='linkType'){if(k=='timestamp')q='ts';else if(k=='dynamicVariablePrefix')q='D';else if(k=='visitorID')q='vid';else if(k=='pageURL'){q='g';v=s.fl(v,255)}else if(k=='referrer'){q='r';v=s.fl(s.rf(v),255)}else if(k=='vmk'||k=='visitorMigrationKey')q='vmt';else if(k=='visitorMigrationServer'){q='vmf';if(s.ssl&&s.visitorMigrationServerSecure)v=''}else if(k=='visitorMigrationServerSecure'){q='vmf';if(!s.ssl&&s.visitorMigrationServer)v=''}else if(k=='charSet'){q='ce';if(v.toUpperCase()=='AUTO')v='ISO8859-1';else if(s.em==2||s.em==3)v='UTF-8'}else if(k=='visitorNamespace')q='ns';else if(k=='cookieDomainPeriods')q='cdp';else if(k=='cookieLifetime')q='cl';else if(k=='variableProvider')q='vvp';else if(k=='currencyCode')q='cc';else if(k=='channel')q='ch';else if(k=='transactionID')q='xact';else if(k=='campaign')q='v0';else if(k=='resolution')q='s';else if(k=='colorDepth')q='c';else if(k=='javascriptVersion')q='j';else if(k=='javaEnabled')q='v';else if(k=='cookiesEnabled')q='k';else if(k=='browserWidth')q='bw';else if(k=='browserHeight')q='bh';else if(k=='connectionType')q='ct';else if(k=='homepage')q='hp';else if(k=='plugins')q='p';else if(k=='events'){if(e)v+=(v?',':'')+e;if(fe)v=s.fs(v,fe)}else if(k=='events2')v='';else if(k=='contextData'){qs+=s.s2q('c',s[k],fv,k,0);v=''}else if(k=='lightProfileID')q='mtp';else if(k=='lightStoreForSeconds'){q='mtss';if(!s.lightProfileID)v=''}else if(k=='lightIncrementBy'){q='mti';if(!s.lightProfileID)v=''}else if(k=='retrieveLightProfiles')q='mtsr';else if(k=='deleteLightProfiles')q='mtsd';else if(k=='retrieveLightData'){if(s.retrieveLightProfiles)qs+=s.s2q('mts',s[k],fv,k,0);v=''}else if(s.num(x)){if(b=='prop')q='c'+n;else if(b=='eVar')q='v'+n;else if(b=='list')q='l'+n;else if(b=='hier'){q='h'+n;v=s.fl(v,255)}}if(v)qs+='&'+s.ape(q)+'='+(k.substring(0,3)!='pev'?s.ape(v):v)}}return qs};s.ltdf=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';var qi=h.indexOf('?');h=qi>=0?h.substring(0,qi):h;if(t&&h.substring(h.length-(t.length+1))=='.'+t)return 1;return 0};s.ltef=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';if(t&&h.indexOf(t)>=0)return 1;return 0};s.lt=function(h){var s=this,lft=s.linkDownloadFileTypes,lef=s.linkExternalFilters,lif=s.linkInternalFilters;lif=lif?lif:s.wd.location.hostname;h=h.toLowerCase();if(s.trackDownloadLinks&&lft&&s.pt(lft,',','ltdf',h))return 'd';if(s.trackExternalLinks&&h.substring(0,1)!='#'&&(lef||lif)&&(!lef||s.pt(lef,',','ltef',h))&&(!lif||!s.pt(lif,',','ltef',h)))return 'e';return ''};s.lc=new Function('e','var s=s_c_il['+s._in+'],b=s.eh(this,\"onclick\");s.lnk=s.co(this);s.t();s.lnk=0;if(b)return this[b](e);return true');s.bc=new Function('e','var s=s_c_il['+s._in+'],f,tcf;if(s.d&&s.d.all&&s.d.all.cppXYctnr)return;s.eo=e.srcElement?e.srcElement:e.target;tcf=new Function(\"s\",\"var e;try{if(s.eo&&(s.eo.tagName||s.eo.parentElement||s.eo.parentNode))s.t()}catch(e){}\");tcf(s);s.eo=0');s.oh=function(o){var s=this,l=s.wd.location,h=o.href?o.href:'',i,j,k,p;i=h.indexOf(':');j=h.indexOf('?');k=h.indexOf('/');if(h&&(i<0||(j>=0&&i>j)||(k>=0&&i>k))){p=o.protocol&&o.protocol.length>1?o.protocol:(l.protocol?l.protocol:'');i=l.pathname.lastIndexOf('/');h=(p?p+'//':'')+(o.host?o.host:(l.host?l.host:''))+(h.substring(0,1)!='/'?l.pathname.substring(0,i<0?0:i)+'/':'')+h}return h};s.ot=function(o){var t=o.tagName;if(o.tagUrn||(o.scopeName&&o.scopeName.toUpperCase()!='HTML'))return '';t=t&&t.toUpperCase?t.toUpperCase():'';if(t=='SHAPE')t='';if(t){if((t=='INPUT'||t=='BUTTON')&&o.type&&o.type.toUpperCase)t=o.type.toUpperCase();else if(!t&&o.href)t='A';}return t};s.oid=function(o){var s=this,t=s.ot(o),p,c,n='',x=0;if(t&&!o.s_oid){p=o.protocol;c=o.onclick;if(o.href&&(t=='A'||t=='AREA')&&(!c||!p||p.toLowerCase().indexOf('javascript')<0))n=s.oh(o);else if(c){n=s.rep(s.rep(s.rep(s.rep(''+c,\"\\r\",''),\"\\n\",''),\"\\t\",''),' ','');x=2}else if(t=='INPUT'||t=='SUBMIT'){if(o.value)n=o.value;else if(o.innerText)n=o.innerText;else if(o.textContent)n=o.textContent;x=3}else if(o.src&&t=='IMAGE')n=o.src;if(n){o.s_oid=s.fl(n,100);o.s_oidt=x}}return o.s_oid};s.rqf=function(t,un){var s=this,e=t.indexOf('='),u=e>=0?t.substring(0,e):'',q=e>=0?s.epa(t.substring(e+1)):'';if(u&&q&&(','+u+',').indexOf(','+un+',')>=0){if(u!=s.un&&s.un.indexOf(',')>=0)q='&u='+u+q+'&u=0';return q}return ''};s.rq=function(un){if(!un)un=this.un;var s=this,c=un.indexOf(','),v=s.c_r('s_sq'),q='';if(c<0)return s.pt(v,'&','rqf',un);return s.pt(un,',','rq',0)};s.sqp=function(t,a){var s=this,e=t.indexOf('='),q=e<0?'':s.epa(t.substring(e+1));s.sqq[q]='';if(e>=0)s.pt(t.substring(0,e),',','sqs',q);return 0};s.sqs=function(un,q){var s=this;s.squ[un]=q;return 0};s.sq=function(q){var s=this,k='s_sq',v=s.c_r(k),x,c=0;s.sqq=new Object;s.squ=new Object;s.sqq[q]='';s.pt(v,'&','sqp',0);s.pt(s.un,',','sqs',q);v='';for(x in s.squ)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))s.sqq[s.squ[x]]+=(s.sqq[s.squ[x]]?',':'')+x;for(x in s.sqq)if(x&&(!Object||!Object.prototype||!Object.prototype[x])&&s.sqq[x]&&(x==q||c<2)){v+=(v?'&':'')+s.sqq[x]+'='+s.ape(x);c++}return s.c_w(k,v,0)};s.wdl=new Function('e','var s=s_c_il['+s._in+'],r=true,b=s.eh(s.wd,\"onload\"),i,o,oc;if(b)r=this[b](e);for(i=0;i<s.d.links.length;i++){o=s.d.links[i];oc=o.onclick?\"\"+o.onclick:\"\";if((oc.indexOf(\"s_gs(\")<0||oc.indexOf(\".s_oc(\")>=0)&&oc.indexOf(\".tl(\")<0)s.eh(o,\"onclick\",0,s.lc);}return r');s.wds=function(){var s=this;if(s.apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.b&&s.b.attachEvent)s.b.attachEvent('onclick',s.bc);else if(s.b&&s.b.addEventListener)s.b.addEventListener('click',s.bc,false);else s.eh(s.wd,'onload',0,s.wdl)}};s.vs=function(x){var s=this,v=s.visitorSampling,g=s.visitorSamplingGroup,k='s_vsn_'+s.un+(g?'_'+g:''),n=s.c_r(k),e=new Date,y=e.getYear();e.setYear(y+10+(y<1900?1900:0));if(v){v*=100;if(!n){if(!s.c_w(k,x,e))return 0;n=x}if(n%10000>v)return 0}return 1};s.dyasmf=function(t,m){if(t&&m&&m.indexOf(t)>=0)return 1;return 0};s.dyasf=function(t,m){var s=this,i=t?t.indexOf('='):-1,n,x;if(i>=0&&m){var n=t.substring(0,i),x=t.substring(i+1);if(s.pt(x,',','dyasmf',m))return n}return 0};s.uns=function(){var s=this,x=s.dynamicAccountSelection,l=s.dynamicAccountList,m=s.dynamicAccountMatch,n,i;s.un=s.un.toLowerCase();if(x&&l){if(!m)m=s.wd.location.host;if(!m.toLowerCase)m=''+m;l=l.toLowerCase();m=m.toLowerCase();n=s.pt(l,';','dyasf',m);if(n)s.un=n}i=s.un.indexOf(',');s.fun=i<0?s.un:s.un.substring(0,i)};s.sa=function(un){var s=this;s.un=un;if(!s.oun)s.oun=un;else if((','+s.oun+',').indexOf(','+un+',')<0)s.oun+=','+un;s.uns()};s.m_i=function(n,a){var s=this,m,f=n.substring(0,1),r,l,i;if(!s.m_l)s.m_l=new Object;if(!s.m_nl)s.m_nl=new Array;m=s.m_l[n];if(!a&&m&&m._e&&!m._i)s.m_a(n);if(!m){m=new Object,m._c='s_m';m._in=s.wd.s_c_in;m._il=s._il;m._il[m._in]=m;s.wd.s_c_in++;m.s=s;m._n=n;m._l=new Array('_c','_in','_il','_i','_e','_d','_dl','s','n','_r','_g','_g1','_t','_t1','_x','_x1','_rs','_rr','_l');s.m_l[n]=m;s.m_nl[s.m_nl.length]=n}else if(m._r&&!m._m){r=m._r;r._m=m;l=m._l;for(i=0;i<l.length;i++)if(m[l[i]])r[l[i]]=m[l[i]];r._il[r._in]=r;m=s.m_l[n]=r}if(f==f.toUpperCase())s[n]=m;return m};s.m_a=new Function('n','g','e','if(!g)g=\"m_\"+n;var s=s_c_il['+s._in+'],c=s[g+\"_c\"],m,x,f=0;if(!c)c=s.wd[\"s_\"+g+\"_c\"];if(c&&s_d)s[g]=new Function(\"s\",s_ft(s_d(c)));x=s[g];if(!x)x=s.wd[\\'s_\\'+g];if(!x)x=s.wd[g];m=s.m_i(n,1);if(x&&(!m._i||g!=\"m_\"+n)){m._i=f=1;if((\"\"+x).indexOf(\"function\")>=0)x(s);else s.m_m(\"x\",n,x,e)}m=s.m_i(n,1);if(m._dl)m._dl=m._d=0;s.dlt();return f');s.m_m=function(t,n,d,e){t='_'+t;var s=this,i,x,m,f='_'+t,r=0,u;if(s.m_l&&s.m_nl)for(i=0;i<s.m_nl.length;i++){x=s.m_nl[i];if(!n||x==n){m=s.m_i(x);u=m[t];if(u){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t](d,e);else if(d)u=m[t](d);else u=m[t]()}}if(u)r=1;u=m[t+1];if(u&&!m[f]){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t+1](d,e);else if(d)u=m[t+1](d);else u=m[t+1]()}}m[f]=1;if(u)r=1}}return r};s.m_ll=function(){var s=this,g=s.m_dl,i,o;if(g)for(i=0;i<g.length;i++){o=g[i];if(o)s.loadModule(o.n,o.u,o.d,o.l,o.e,1);g[i]=0}};s.loadModule=function(n,u,d,l,e,ln){var s=this,m=0,i,g,o=0,f1,f2,c=s.h?s.h:s.b,b,tcf;if(n){i=n.indexOf(':');if(i>=0){g=n.substring(i+1);n=n.substring(0,i)}else g=\"m_\"+n;m=s.m_i(n)}if((l||(n&&!s.m_a(n,g)))&&u&&s.d&&c&&s.d.createElement){if(d){m._d=1;m._dl=1}if(ln){if(s.ssl)u=s.rep(u,'http:','https:');i='s_s:'+s._in+':'+n+':'+g;b='var s=s_c_il['+s._in+'],o=s.d.getElementById(\"'+i+'\");if(s&&o){if(!o.l&&s.wd.'+g+'){o.l=1;if(o.i)clearTimeout(o.i);o.i=0;s.m_a(\"'+n+'\",\"'+g+'\"'+(e?',\"'+e+'\"':'')+')}';f2=b+'o.c++;if(!s.maxDelay)s.maxDelay=250;if(!o.l&&o.c<(s.maxDelay*2)/100)o.i=setTimeout(o.f2,100)}';f1=new Function('e',b+'}');tcf=new Function('s','c','i','u','f1','f2','var e,o=0;try{o=s.d.createElement(\"script\");if(o){o.type=\"text/javascript\";'+(n?'o.id=i;o.defer=true;o.onload=o.onreadystatechange=f1;o.f2=f2;o.l=0;':'')+'o.src=u;c.appendChild(o);'+(n?'o.c=0;o.i=setTimeout(f2,100)':'')+'}}catch(e){o=0}return o');o=tcf(s,c,i,u,f1,f2)}else{o=new Object;o.n=n+':'+g;o.u=u;o.d=d;o.l=l;o.e=e;g=s.m_dl;if(!g)g=s.m_dl=new Array;i=0;while(i<g.length&&g[i])i++;g[i]=o}}else if(n){m=s.m_i(n);m._e=1}return m};s.voa=function(vo,r){var s=this,l=s.va_g,i,k,v,x;for(i=0;i<l.length;i++){k=l[i];v=vo[k];if(v||vo['!'+k]){if(!r&&(k==\"contextData\"||k==\"retrieveLightData\")&&s[k])for(x in s[k])if(!v[x])v[x]=s[k][x];s[k]=v}}};s.vob=function(vo){var s=this,l=s.va_g,i,k;for(i=0;i<l.length;i++){k=l[i];vo[k]=s[k];if(!vo[k])vo['!'+k]=1}};s.dlt=new Function('var s=s_c_il['+s._in+'],d=new Date,i,vo,f=0;if(s.dll)for(i=0;i<s.dll.length;i++){vo=s.dll[i];if(vo){if(!s.m_m(\"d\")||d.getTime()-vo._t>=s.maxDelay){s.dll[i]=0;s.t(vo)}else f=1}}if(s.dli)clearTimeout(s.dli);s.dli=0;if(f){if(!s.dli)s.dli=setTimeout(s.dlt,s.maxDelay)}else s.dll=0');s.dl=function(vo){var s=this,d=new Date;if(!vo)vo=new Object;s.vob(vo);vo._t=d.getTime();if(!s.dll)s.dll=new Array;s.dll[s.dll.length]=vo;if(!s.maxDelay)s.maxDelay=250;s.dlt()};s.track=s.t=function(vo){var s=this,trk=1,tm=new Date,sed=Math&&Math.random?Math.floor(Math.random()*10000000000000):tm.getTime(),sess='s'+Math.floor(tm.getTime()/10800000)%10+sed,y=tm.getYear(),vt=tm.getDate()+'/'+tm.getMonth()+'/'+(y<1900?y+1900:y)+' '+tm.getHours()+':'+tm.getMinutes()+':'+tm.getSeconds()+' '+tm.getDay()+' '+tm.getTimezoneOffset(),tcf,tfs=s.gtfs(),ta=-1,q='',qs='',code='',vb=new Object;s.gl(s.vl_g);s.uns();s.m_ll();if(!s.td){var tl=tfs.location,a,o,i,x='',c='',v='',p='',bw='',bh='',j='1.0',k=s.c_w('s_cc','true',0)?'Y':'N',hp='',ct='',pn=0,ps;if(String&&String.prototype){j='1.1';if(j.match){j='1.2';if(tm.setUTCDate){j='1.3';if(s.isie&&s.ismac&&s.apv>=5)j='1.4';if(pn.toPrecision){j='1.5';a=new Array;if(a.forEach){j='1.6';i=0;o=new Object;tcf=new Function('o','var e,i=0;try{i=new Iterator(o)}catch(e){}return i');i=tcf(o);if(i&&i.next)j='1.7'}}}}}if(s.apv>=4)x=screen.width+'x'+screen.height;if(s.isns||s.isopera){if(s.apv>=3){v=s.n.javaEnabled()?'Y':'N';if(s.apv>=4){c=screen.pixelDepth;bw=s.wd.innerWidth;bh=s.wd.innerHeight}}s.pl=s.n.plugins}else if(s.isie){if(s.apv>=4){v=s.n.javaEnabled()?'Y':'N';c=screen.colorDepth;if(s.apv>=5){bw=s.d.documentElement.offsetWidth;bh=s.d.documentElement.offsetHeight;if(!s.ismac&&s.b){tcf=new Function('s','tl','var e,hp=0;try{s.b.addBehavior(\"#default#homePage\");hp=s.b.isHomePage(tl)?\"Y\":\"N\"}catch(e){}return hp');hp=tcf(s,tl);tcf=new Function('s','var e,ct=0;try{s.b.addBehavior(\"#default#clientCaps\");ct=s.b.connectionType}catch(e){}return ct');ct=tcf(s)}}}else r=''}if(s.pl)while(pn<s.pl.length&&pn<30){ps=s.fl(s.pl[pn].name,100)+';';if(p.indexOf(ps)<0)p+=ps;pn++}s.resolution=x;s.colorDepth=c;s.javascriptVersion=j;s.javaEnabled=v;s.cookiesEnabled=k;s.browserWidth=bw;s.browserHeight=bh;s.connectionType=ct;s.homepage=hp;s.plugins=p;s.td=1}if(vo){s.vob(vb);s.voa(vo)}if((vo&&vo._t)||!s.m_m('d')){if(s.usePlugins)s.doPlugins(s);var l=s.wd.location,r=tfs.document.referrer;if(!s.pageURL)s.pageURL=l.href?l.href:l;if(!s.referrer&&!s._1_referrer){s.referrer=r;s._1_referrer=1}s.m_m('g');if(s.lnk||s.eo){var o=s.eo?s.eo:s.lnk;if(!o)return '';var p=s.pageName,w=1,t=s.ot(o),n=s.oid(o),x=o.s_oidt,h,l,i,oc;if(s.eo&&o==s.eo){while(o&&!n&&t!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(!o)return '';t=s.ot(o);n=s.oid(o);x=o.s_oidt}oc=o.onclick?''+o.onclick:'';if((oc.indexOf(\"s_gs(\")>=0&&oc.indexOf(\".s_oc(\")<0)||oc.indexOf(\".tl(\")>=0)return ''}if(n)ta=o.target;h=s.oh(o);i=h.indexOf('?');h=s.linkLeaveQueryString||i<0?h:h.substring(0,i);l=s.linkName;t=s.linkType?s.linkType.toLowerCase():s.lt(h);if(t&&(h||l))q+='&pe=lnk_'+(t=='d'||t=='e'?s.ape(t):'o')+(h?'&pev1='+s.ape(h):'')+(l?'&pev2='+s.ape(l):'');else trk=0;if(s.trackInlineStats){if(!p){p=s.pageURL;w=0}t=s.ot(o);i=o.sourceIndex;if(s.gg('objectID')){n=s.gg('objectID');x=1;i=1}if(p&&n&&t)qs='&pid='+s.ape(s.fl(p,255))+(w?'&pidt='+w:'')+'&oid='+s.ape(s.fl(n,100))+(x?'&oidt='+x:'')+'&ot='+s.ape(t)+(i?'&oi='+i:'')}}if(!trk&&!qs)return '';s.sampled=s.vs(sed);if(trk){if(s.sampled)code=s.mr(sess,(vt?'&t='+s.ape(vt):'')+s.hav()+q+(qs?qs:s.rq()),0,ta);qs='';s.m_m('t');if(s.p_r)s.p_r();s.referrer=s.lightProfileID=s.retrieveLightProfiles=s.deleteLightProfiles=''}s.sq(qs);}else{s.dl(vo);}if(vo)s.voa(vb,1);s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';if(s.pg)s.wd.s_lnk=s.wd.s_eo=s.wd.s_linkName=s.wd.s_linkType='';return code};s.trackLink=s.tl=function(o,t,n,vo){var s=this;s.lnk=s.co(o);s.linkType=t;s.linkName=n;s.t(vo)};s.trackLight=function(p,ss,i,vo){var s=this;s.lightProfileID=p;s.lightStoreForSeconds=ss;s.lightIncrementBy=i;s.t(vo)};s.jsLoaded=function(){var s=this,x;if(s.lmq)for(i=0;i<s.lmq.length;i++){x=s.lmq[i];s.loadModule(x.n,x.u,x.d)}if(s.onLoad)s.onLoad(s);if(s.tq)for(i=0;i<s.tq.length;i++)s.t(s.tq[i])};s.wd=window;s.ssl=(s.wd.location.protocol.toLowerCase().indexOf('https')>=0);s.d=document;s.b=s.d.body;if(s.d.getElementsByTagName){s.h=s.d.getElementsByTagName('HEAD');if(s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n.userAgent;s.ns6=s.u.indexOf('Netscape6/');var apn=s.n.appName,v=s.n.appVersion,ie=v.indexOf('MSIE '),o=s.u.indexOf('Opera '),i;if(v.indexOf('Opera')>=0||o>0)apn='Opera';s.isie=(apn=='Microsoft Internet Explorer');s.isns=(apn=='Netscape');s.isopera=(apn=='Opera');s.ismac=(s.u.indexOf('Mac')>=0);if(o>0)s.apv=parseFloat(s.u.substring(o+6));else if(ie>0){s.apv=parseInt(i=v.substring(ie+5));if(s.apv>3)s.apv=parseFloat(i)}else if(s.ns6>0)s.apv=parseFloat(s.u.substring(s.ns6+10));else s.apv=parseFloat(v);s.em=0;if(s.em.toPrecision)s.em=3;else if(String.fromCharCode){i=escape(String.fromCharCode(256)).toUpperCase();s.em=(i=='%C4%80'?2:(i=='%U0100'?1:0))}if(s.oun)s.sa(s.oun);s.sa(un);s.vl_l='dynamicVariablePrefix,visitorID,vmk,visitorMigrationKey,visitorMigrationServer,visitorMigrationServerSecure,ppu,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,pageName,pageURL,referrer,currencyCode';s.va_l=s.sp(s.vl_l,',');s.vl_mr=s.vl_m='charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,contextData,lightProfileID,lightStoreForSeconds,lightIncrementBy';s.vl_t=s.vl_l+',variableProvider,channel,server,pageType,transactionID,purchaseID,campaign,state,zip,events,events2,products,linkName,linkType,contextData,lightProfileID,lightStoreForSeconds,lightIncrementBy,retrieveLightProfiles,deleteLightProfiles,retrieveLightData';var n;for(n=1;n<=75;n++){s.vl_t+=',prop'+n+',eVar'+n;s.vl_m+=',prop'+n+',eVar'+n}for(n=1;n<=5;n++)s.vl_t+=',hier'+n;for(n=1;n<=3;n++)s.vl_t+=',list'+n;s.va_m=s.sp(s.vl_m,',');s.vl_l2=',tnt,pe,pev1,pev2,pev3,resolution,colorDepth,javascriptVersion,javaEnabled,cookiesEnabled,browserWidth,browserHeight,connectionType,homepage,plugins';s.vl_t+=s.vl_l2;s.va_t=s.sp(s.vl_t,',');s.vl_g=s.vl_t+',trackingServer,trackingServerSecure,trackingServerBase,fpCookieDomainPeriods,disableBufferedRequests,mobile,visitorSampling,visitorSamplingGroup,dynamicAccountSelection,dynamicAccountList,dynamicAccountMatch,trackDownloadLinks,trackExternalLinks,trackInlineStats,linkLeaveQueryString,linkDownloadFileTypes,linkExternalFilters,linkInternalFilters,linkTrackVars,linkTrackEvents,linkNames,lnk,eo,lightTrackVars,_1_referrer,un';s.va_g=s.sp(s.vl_g,',');s.pg=pg;s.gl(s.vl_g);s.contextData=new Object;s.retrieveLightData=new Object;if(!ss)s.wds();if(pg){s.wd.s_co=function(o){s_gi(\"_\",1,1).co(o)};s.wd.s_gs=function(un){s_gi(un,1,1).t()};s.wd.s_dc=function(un){s_gi(un,1).t()}}",r=window,f=r.s_c_il,b=navigator,y=b.userAgent,t=b.appVersion,k=t.indexOf("MSIE "),d=y.indexOf("Netscape6/"),q,g,p,z;if(h){h=h.toLowerCase();if(f){for(g=0;g<f.length;g++){z=f[g];p=z._c;if((!p||p=="s_c"||p=="s_l")&&(z.oun==h||(z.fs&&z.sa&&z.fs(z.oun,h)))){if(z.sa){z.sa(h)}if(p=="s_c"){return z}}else{z=0}}}}r.s_an="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";r.s_sp=new Function("x","d","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(d);else if(!d)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(d,i);a[a.length]=x.substring(i,j<0?x.length:j);i=j;if(i>=0)i+=d.length}}return a");r.s_jn=new Function("a","d","var x='',i,j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(d);else for(i=1;i<j;i++)x+=d+a[i]}}return x");r.s_rep=new Function("x","o","n","return s_jn(s_sp(x,o),n)");r.s_d=new Function("x","var t='`^@$#',l=s_an,l2=new Object,x2,d,b=0,k,i=x.lastIndexOf('~~'),j,v,w;if(i>0){d=x.substring(0,i);x=x.substring(i+2);l=s_sp(l,'');for(i=0;i<62;i++)l2[l[i]]=i;t=s_sp(t,'');d=s_sp(d,'~');i=0;while(i<5){v=0;if(x.indexOf(t[i])>=0) {x2=s_sp(x,t[i]);for(j=1;j<x2.length;j++){k=x2[j].substring(0,1);w=t[i]+k;if(k!=' '){v=1;w=d[b+l2[k]]}x2[j]=w+x2[j].substring(1)}}if(v)x=s_jn(x2,'');else{w=t[i]+' ';if(x.indexOf(w)>=0)x=s_rep(x,w,t[i]);i++;b+=62}}}return x");r.s_fe=new Function("c","return s_rep(s_rep(s_rep(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")");r.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':a");r.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){if(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")'+c.substring(e+1);s=c.indexOf('=function(')}return c;");o=s_d(o);if(k>0){q=parseInt(g=t.substring(k+5));if(q>3){q=parseFloat(g)}}else{if(d>0){q=parseFloat(y.substring(d+10))}else{q=parseFloat(t)}}if(q<5||t.indexOf("Opera")>=0||y.indexOf("Opera")>=0){o=s_ft(o)}if(!z){z=new Object;if(!r.s_c_in){r.s_c_il=new Array;r.s_c_in=0}z._il=r.s_c_il;z._in=r.s_c_in;z._il[z._in]=z;r.s_c_in++}z._c="s_c";(new Function("s","un","pg","ss",o))(z,h,j,A);return z}absa.analytics=absa.analytics||{};absa.analytics.trackinteraction=function(b){s.linkTrackVars="None";s.linkTrackEvents="None";if(b.indexOf("OSF")>-1){s.linkTrackVars="prop27,eVar44,eVar6,channel,server,events";if(b.indexOf("| Getting Started | Continue")>-1){s.linkTrackEvents="event24,event6";s.events="event24,event6"}else{if(b.indexOf("| Your finances | Next")>-1){s.linkTrackEvents="event24,event7";s.events="event24,event7"}else{s.linkTrackEvents="event24";s.events="event24"}}s.eVar6="Personal Loans | OSF";s.eVar44=s.prop27=b}else{if(b.indexOf("ISF")>-1){s.linkTrackVars="prop27,eVar44,eVar6,channel,server,events";if(b.indexOf("| Personal Loans | continue")>-1){s.linkTrackEvents="event24,event6";s.events="event24,event6"}else{if(b.indexOf("| Quote | Accept Quote")>-1){s.linkTrackEvents="event24,event7";s.events="event24,event7"}else{s.linkTrackEvents="event24";s.events="event24"}}s.eVar6="Personal Loans | ISF";s.eVar44=s.prop27=b}else{s.linkTrackVars="prop27,eVar44,eVar6,channel,server,events";s.linkTrackEvents="event24";s.eVar44=s.prop27=b;s.events="event24"}}s.tl(true,"o",b);s.eVar44=s.prop27=s.eVar6="";s.events=""};absa.analytics.tracktabs=function(b){s.linkTrackVars="None";s.linkTrackEvents="None";s.linkTrackVars="prop27,eVar44,eVar6,channel,server,events";s.linkTrackEvents="event24";s.events="event24";if(b.indexOf("OSF")>-1&&b.indexOf("Top Navigation")>-1){s.eVar6="Personal Loans | OSF";s.eVar44=s.prop27=b+" clicked"}else{if(b.indexOf("ISF")>-1&&b.indexOf("Top Navigation")>-1){s.eVar6="Personal Loans | ISF";s.eVar44=s.prop27=b+" clicked"}else{s.eVar44=s.prop27=b}}s.tl(true,"o",b);s.eVar44=s.prop27=s.eVar6="";s.events=""};absa.analytics.trackAccordion=function(b){s.linkTrackVars="None";s.linkTrackEvents="None";s.linkTrackVars="prop27,eVar44,eVar6,channel,server,events";s.linkTrackEvents="event24";s.events="event24";if(b.indexOf("ISF")>-1){s.eVar6="Personal Loans | ISF";s.eVar44=s.prop27=b+" clicked"}if(b.indexOf("OSF")>-1){s.eVar6="Personal Loans | OSF";s.eVar44=s.prop27=b+" clicked"}s.tl(true,"o",b);s.eVar44=s.prop27=s.eVar6="";s.events=""};absa.analytics.trackAndSubmitForm=function(b,c){absa.analytics.trackinteraction(c);var d=bb.selector.queryAncestor(b,".ui-form");absa.form.validateAndSubmit(d)};absa.analytics.trackSelectField=function(d,b){var e=phe.select.getSelectedText(d);var c=phe.common.getAttribute(d,"name");s.linkTrackVars="None";s.linkTrackEvents="None";if(c=="title"){s.linkTrackVars="prop27,eVar44,eVar6,eVar70,channel,server,events";s.linkTrackEvents="event24";s.events="event24";s.eVar6="Personal Loans | OSF";s.eVar44=s.prop27="Title captured";s.eVar70=e;s.tl(true,"o",b)}else{if(c=="personalDetailsMaritalStatus"){s.linkTrackVars="prop27,eVar44,eVar6,eVar71,channel,server,events";s.linkTrackEvents="event24";s.events="event24";s.eVar6="Personal Loans | OSF";s.eVar44=s.prop27="Marital Status captured";s.eVar71=e;s.tl(true,"o",b)}else{if(c=="employmentDetailsOccupationStatus"){s.linkTrackVars="prop27,eVar44,eVar6,eVar72,channel,server,events";s.linkTrackEvents="event24";s.events="event24";s.eVar6="Personal Loans | OSF";s.eVar44=s.prop27="Occupation Status captured";s.eVar72=e;s.tl(true,"o",b)}else{s.tl(true,"o",b)}}}s.eVar44=s.prop27=s.eVar6="";s.events=""};absa.avs=absa.avs||{};absa.avs.globals=absa.avs.globals||{};absa.avs.globals.oPollsCounter=0;absa.avs.globals.oPollSetsCompleted=0;absa.avs.globals.oMaxPollsInThisSet=0;absa.avs.globals.oPollRefNo=null;absa.avs.resetGlobalVars=function(){absa.avs.globals.oPollsCounter=0;absa.avs.globals.oPollSetsCompleted=0;absa.avs.globals.oMaxPollsInThisSet=absa.AVSPOLLMAXININITIALSET};absa.avs.onLinkClick=function(b,c,g,r){var t=bb.selector.queryAncestor(b,".ui-form");if(absa.avs.isLinkEnabled(b,r)){if(r=="payBen"||r=="addRepeatExisting"){var n=bb.selector.query(t,".ap-avsCommon-benName");var f=bb.selector.query(t,".ap-avsCommon-bankName");var k=bb.selector.query(t,".ap-avsCommon-branchCode");var e=bb.selector.query(t,".ap-avsCommon-benAccountNo");var h=bb.selector.query(t,".ap-avsCommon-benAccountType");var m=phe.hiddenField.getValue(n);var q=phe.hiddenField.getValue(f);var p=phe.hiddenField.getValue(k);var u=phe.hiddenField.getValue(e);var l="";if(h){var l=phe.hiddenField.getValue(h)}c+="&benName="+m+"&bankName="+q+"&branchCode="+p+"&benAccountNo="+u+"&benAccountType="+l}else{if(r=="addBen"||r=="payOnceOff"||r=="addRepeat"){var n=bb.selector.query(t,".ap-avsCommon-benName");var f=bb.selector.query(t,".ap-avsCommon-bankName");var k=bb.selector.query(t,".ap-avsCommon-branchCode");var j=bb.selector.query(t,".ap-avsCommon-branchName");var e=bb.selector.query(t,".ap-avsCommon-accountNo");var h=bb.selector.query(t,".ap-avsCommon-accountType");var q=phe.common.getAttribute(f,"value");var p=phe.common.getAttribute(k,"value");var u=phe.textBox.getValue(e,"value");if(n){var m=phe.textBox.getValue(n);if(!m==""){c+="&benName="+m}}if(!q){q=phe.suggestBox.getValue(f)}if(!u){u=phe.common.getAttribute(e,"value")}if(h){var l=phe.select.getValue(h);if(!l){alert("No sAccountType")}else{c+="&benAccountType="+l}}c+="&bankName="+q+"&benAccountNo="+u;if(p){c+="&branchCode="+p}if(j){var o=phe.common.getAttribute(j,"value");c+="&branchName="+o}}else{if(r=="viewBen"||r=="viewFutureDated"||r=="addGroup"||r=="manageGroup"||r=="viewRepeat"){var d=bb.selector.queryAncestor(b,".ap-avsCommon-tableBodyRow");var n=bb.selector.query(d,".ap-avsCommon-benName");var f=bb.selector.query(d,".ap-avsCommon-bankName");var k=bb.selector.query(d,".ap-avsCommon-branchCode");var e=bb.selector.query(d,".ap-avsCommon-accountNumber");var m=phe.hiddenField.getValue(n);var q=phe.hiddenField.getValue(f);var p=phe.hiddenField.getValue(k);var u=phe.hiddenField.getValue(e);c+="&benName="+m+"&bankName="+q+"&branchCode="+p+"&benAccountNo="+u}else{if(r=="payMultiple"||r=="payGroup"){var d=bb.selector.queryAncestor(b,".ap-avsCommon-row-expandableExtension").previousSibling;var n=bb.selector.query(d,".ap-avsCommon-benName");var f=bb.selector.query(d,".ap-avsCommon-bankName");var k=bb.selector.query(d,".ap-avsCommon-branchCode");var e=bb.selector.query(d,".ap-avsCommon-accountNumber");var h=bb.selector.query(d,".ap-avsCommon-accountType");var m=phe.hiddenField.getValue(n);var q=phe.hiddenField.getValue(f);var p=phe.hiddenField.getValue(k);var u=phe.hiddenField.getValue(e);c+="&benName="+m+"&bankName="+q+"&branchCode="+p+"&benAccountNo="+u}}}}absa.modal.loadModal(c,g,null,null)}};absa.avs.onRadioGroupChange=function(e){var f=bb.selector.queryAncestor(e,".ap-avs-form");var d=bb.selector.queryAncestor(f,".ap-avs-mainContent");var b=bb.selector.queryAncestor(f,".ui-modalBody");if(!b){b=bb.selector.queryAncestor(f,".ui-tabBody-selected")}var c=phe.common.getAttribute(b,"proxyurl");if(phe.radioGroup.getValue(e)=="individual"){c+="&benType=individual"}else{c+="&benType=business"}phe.common.setAttribute(d,"proxyurl",c);absa.lazyLoadNode(d,true)};absa.avs.onBankSelect=function(h){var g=bb.selector.queryAncestor(h,".ap-avs-form");var f=bb.selector.query(g,'input[name="beneficiaryBranch"]');var d=bb.selector.query(g,".ap-avs-branchCode");var j=bb.selector.query(g,".ap-avs-branchName");var b=bb.selector.query(g,".ap-avsCommon-branchCodeDisplay");var e=bb.selector.query(g,".ap-avs-accountTypeRow");phe.textBox.setValue(h,bb.string.trim(phe.textBox.getValue(h)));absa.form.validate.checkElement(h);var c=bb.selector.query(g,".ap-avs-accountType");if(h.value=="ABSA BANK LIMITED"){phe.common.show(b);phe.common.hide(f);if(e){phe.common.hide(e)}phe.hiddenField.setValue(d,"632005")}else{phe.common.hide(b);phe.common.show(f);if(e){phe.common.show(e)}phe.textBox.setValue(f,"");phe.suggestBox.setAttribute(f,"multipleRequest","proxy?pipe=applicationCachedGenericWebservice&ws=BeneficiaryWebService&action=getBranchCodes&bank="+h.value)}};absa.avs.validateBankSelection=function(b){var d=bb.selector.queryAncestor(b,".ap-avs-form");var c=bb.selector.query(d,"[name=bankName]");if(!absa.form.validate.checkElement(c)){if(absa.VI=="false"){phe.textBox.focus(c)}phe.textBox.setAttribute(b,"required","false");absa.form.validate.checkElement(b);phe.textBox.setAttribute(b,"required","true");phe.helpText.showHelptext(c)}};absa.avs.onVerificationResponseCheck=function(b){var c=bb.selector.queryAncestor(b,".ui-wizard-body-wrapper");phe.loadingMessage.showLoadingMessage(c);setTimeout(function(){absa.avs.resumeVerificationResponseCheck(b)},0)};absa.avs.resumeVerificationResponseCheck=function(g){absa.avs.resetGlobalVars();var b=bb.selector.queryAncestor(g,".ui-wizard");var e=bb.selector.queryAncestor(g,".ui-wizard-body-wrapper");var k=phe.wizard.getCurrentStepBody(b);var j=phe.wizard.getNextStepBody(b);var f=bb.selector.query(j,".ap-avs-isPolling");var h="";if(f){h=phe.hiddenField.getValue(f)}if(h.toLowerCase().indexOf("true")>-1){var d=bb.selector.query(j,".ap-avs-reference");var c=phe.hiddenField.getValue(d);absa.avs.globals.oPollRefNo=c;absa.avs.doPoll(g)}else{phe.loadingMessage.hideLoadingMessage(e)}};absa.avs.doPoll=function(n){var g=bb.selector.queryAncestor(n,".ui-wizard-body-wrapper");var c="proxy?pipe=genericWebservice&ws=AccountVerificationWebService&action=getAccountDetailsByReference&refNo="+absa.avs.globals.oPollRefNo;var p=false;var e=false;absa.avs.globals.oPollsCounter++;if(absa.avs.globals.oPollsCounter>absa.avs.globals.oMaxPollsInThisSet){p=true;absa.avs.globals.oPollSetsCompleted++;if(absa.avs.globals.oPollSetsCompleted==absa.AVSPOLLSETMAX){var e=true}}if(e){var d=bb.selector.queryAncestor(n,".ui-wizard");var l=phe.wizard.getCurrentStepBody(d);var o=bb.selector.query(l,".ap-avs-formFinalStep");var j=bb.selector.query(o,".ap-avs-errorServiceProviderNotResponding");phe.common.show(j);var h=bb.selector.query(o,".ap-avs-resultGrid");var k=bb.selector.query(o,".ap-avs-resultFormFoot");var f=bb.selector.query(o,".ap-avs-questionGrid");var b=bb.selector.query(o,".ap-avs-questionFormFoot");phe.common.show(h);phe.common.show(k);phe.common.hide(f);phe.common.hide(b);phe.loadingMessage.hideLoadingMessage(g)}else{if(p){var d=bb.selector.queryAncestor(n,".ui-wizard");var l=phe.wizard.getCurrentStepBody(d);var m=bb.selector.query(l,".ap-avs-formFinalStep");var h=bb.selector.query(m,".ap-avs-resultGrid");var k=bb.selector.query(m,".ap-avs-resultFormFoot");var f=bb.selector.query(m,".ap-avs-questionGrid");var b=bb.selector.query(m,".ap-avs-questionFormFoot");phe.common.hide(h);phe.common.hide(k);phe.common.show(f);phe.common.show(b);phe.loadingMessage.hideLoadingMessage(g)}else{phe.loadingMessage.showLoadingMessage(g,absa.locale["Common/General/Label/AwaitingResponseFromOtherInstitution"]+" : "+(absa.avs.globals.oPollsCounter)+"/"+absa.avs.globals.oMaxPollsInThisSet);absa.io.makeRequest(c,function(x){if(!x.errors.length){var J=false;var D=bb.html.createElementFromString(x.text);if(D){var u=bb.selector.query(D,".ap-avs-isPolling");var E="";if(u){E=phe.hiddenField.getValue(u)}var z=bb.selector.query(D,".ap-avs-error");var B=bb.selector.queryAncestor(n,".ui-wizard");var K=phe.wizard.getCurrentStepBody(B);var y=bb.selector.query(K,".ap-avs-formFinalStep");if(z){var F=bb.selector.query(y,".ap-avs-errorHolder");F.parentNode.replaceChild(D,F);absa.initializeNewContent(D);phe.loadingMessage.hideLoadingMessage(g)}else{if(E.toLowerCase().indexOf("true")>-1){setTimeout(function(){absa.avs.doPoll(n)},absa.AVSPOLLINTERVAL)}else{var t=bb.selector.query(y,".ap-avs-resultContent");t.parentNode.replaceChild(D,t);absa.initializeNewContent(D);var r=bb.selector.query(y,".ap-avs-successHolder");phe.common.show(r);var I=bb.selector.query(y,".ap-avs-resultGrid");var G=bb.selector.query(y,".ap-avs-resultFormFoot");var A=bb.selector.query(y,".ap-avs-questionGrid");var C=bb.selector.query(y,".ap-avs-questionFormFoot");phe.common.show(I);phe.common.show(G);phe.common.hide(A);phe.common.hide(C);var H=bb.selector.query(D,".ap-avs-isAccountOpen");if(phe.hiddenField.getValue(H)=="N"){var w=bb.selector.query(y,".ap-avs-warningAccountClosed");phe.common.show(w)}else{var v=bb.selector.query(D,".ap-avs-isCreditAccepted");if(phe.hiddenField.getValue(v)=="N"){var q=bb.selector.query(y,".ap-avs-warningAcceptCredits");phe.common.show(q)}}phe.loadingMessage.hideLoadingMessage(g)}}}}})}}};absa.avs.onContinueWaitingButtonClick=function(b){absa.avs.globals.oMaxPollsInThisSet=absa.AVSPOLLMAXINREPEATSET;absa.avs.globals.oPollsCounter=0;absa.avs.doPoll(b)};absa.avs.OnCancelPollingButtonClick=function(){phe.modal.hideModal()};absa.avs.OnDoneButtonClick=function(c){var b=bb.selector.queryAncestor(c,".ui-modalBody");if(b){phe.modal.hideModal()}else{absa.wizard.finishButton(c)}};absa.avs.isLinkEnabled=function(h,b,k){var j=bb.selector.queryAncestor(h,".ui-form");if(!j){j=bb.selector.queryAncestor(h,".ap-avsCommon-root")}var f=bb.selector.query(j,".ap-avsCommon-bankName");var m=bb.selector.query(j,".ap-avsCommon-accountNo");var g=bb.selector.query(j,".ap-avsCommon-benName");var e=bb.selector.query(j,".ap-avs-link");var c=phe.common.getAttribute(e,"data-allowedBanks");bEnableLink=false;if(absa.avs.IsAnyElementInError(j)){}if(b=="addBen"||b=="payOnceOff"||b=="addRepeat"){if(phe.textBox.getValue(m).length=="16"){return bEnableLink}var d=phe.inputReadOnlyText.getValue(f);if(d=="Absa"){if(absa.form.validate.checkElement(m)){bEnableLink=true}}else{if(f){d=phe.suggestBox.getValue(f);if(!d==""){if(!d.toUpperCase().match(c)){return bEnableLink}}}var l=bb.selector.query(j,".ap-avsCommon-branchCodeSuggestBox");if(absa.form.validate.checkElement(f)){if(!phe.suggestBox.getValue(l)==""){if(absa.form.validate.checkElement(l)){if(!phe.textBox.getValue(m)==""){if(absa.form.validate.checkElement(m)){bEnableLink=true}}}}}}}else{if(b=="viewBen"){bEnableLink=true}else{if(b=="payBen"){bEnableLink=true}else{if(b=="payMultiple"){bEnableLink=true}else{if(b=="payGroup"){bEnableLink=true}else{if(b=="viewFutureDated"){bEnableLink=true}else{if(b=="addRepeatExisting"){bEnableLink=true}else{if(b=="addGroup"){bEnableLink=true}else{if(b=="manageGroup"){bEnableLink=true}else{if(b=="viewRepeat"){bEnableLink=true}}}}}}}}}}return bEnableLink};absa.avs.toggleLink=function(d,e){var g=bb.selector.queryAncestor(d,".ui-form");var f=bb.selector.query(g,".ap-avs-link");if(f!=null){var c=bb.selector.query(g,".ap-avsCommon-bankName");if(c!=null){if(e){var b=phe.suggestBox.getValue(c)+"|";var h=f.getAttribute("data-allowedBanks")||f.getAttribute("data-allowedbanks");if(h!=null&&h.toUpperCase().indexOf(b.toUpperCase())>-1){phe.common.show(f)}}else{phe.common.hide(f)}}else{if(e){phe.common.show(f)}else{phe.common.hide(f)}}}};absa.avs.onToggleLinkDisplay=function(b,c,d){if(d){absa.avs.toggleLink(b,false)}else{if(absa.avs.isLinkEnabled(b,c)){absa.avs.toggleLink(b,true)}else{absa.avs.toggleLink(b,false)}}};absa.avs.IsAnyElementInError=function(c){var b=bb.selector.query(c,".ui-incorrect-value");if(b){b.focus();return true}else{return false}};absa.avs.onAccountNoChange=function(c){var b=phe.textBox.getValue(c);if(b.length==16){phe.textBox.setAttribute(c,"customValidation","return false")}else{phe.textBox.setAttribute(c,"customValidation","")}};absa.directMarketing=absa.directMarketing||{};absa.directMarketing.globals=absa.directMarketing.globals||{};absa.directMarketing.globals.sOldSMS=null;absa.directMarketing.globals.sOldEmail=null;absa.directMarketing.globals.sOldVoiceRecording=null;absa.directMarketing.globals.sOldNoThanks=null;absa.directMarketing.interestedOnChange=function(f){var b=bb.selector.queryAncestor(f,".ui-form");var j=bb.selector.query(b,".ap-directMarketing-options-row1");var h=bb.selector.query(b,".ap-directMarketing-options-row2");if(h!=null){var e=bb.selector.query(h,".ap-directMarketing-emailCheckBox");var d=bb.selector.query(h,".ap-directMarketing-smsCheckBox");var c=bb.selector.query(h,".ap-directMarketing-voiceRecordingCheckBox");var g=bb.selector.query(h,".ap-directMarketing-noThanksCheckBox");if(phe.radioGroup.getValue(f)=="Y"){phe.checkBox.setAttribute(d,"checked","true");phe.checkBox.setAttribute(e,"checked","true");phe.checkBox.setAttribute(c,"checked","true");phe.common.hide(j);phe.common.hide(h)}else{phe.common.show(j);phe.common.show(h);absa.directMarketing.globals.sOldSMS=phe.checkBox.getAttribute(d,"data-oldVal");absa.directMarketing.globals.sOldEmail=phe.checkBox.getAttribute(e,"data-oldVal");absa.directMarketing.globals.sOldVoiceRecording=phe.checkBox.getAttribute(c,"data-oldVal");if(absa.directMarketing.globals.sOldSMS==null){absa.directMarketing.globals.sOldSMS="N"}if(absa.directMarketing.globals.sOldEmail==null){absa.directMarketing.globals.sOldEmail="N"}if(absa.directMarketing.globals.sOldVoiceRecording==null){absa.directMarketing.globals.sOldVoiceRecording="N"}if(absa.directMarketing.globals.sOldSMS=="Y"){phe.checkBox.setAttribute(d,"checked","true")}else{phe.checkBox.setAttribute(d,"checked","false")}if(absa.directMarketing.globals.sOldEmail=="Y"){phe.checkBox.setAttribute(e,"checked","true")}else{phe.checkBox.setAttribute(e,"checked","false")}if(absa.directMarketing.globals.sOldVoiceRecording=="Y"){phe.checkBox.setAttribute(c,"checked","true")}else{phe.checkBox.setAttribute(c,"checked","false")}if(phe.checkBox.isChecked(d)==false&&phe.checkBox.isChecked(e)==false&&phe.checkBox.isChecked(c)==false){phe.checkBox.setAttribute(g,"required","true")}else{phe.checkBox.setAttribute(g,"required","false")}}}};absa.directMarketing.indicatorChkBoxSelected=function(b){var j=bb.selector.queryAncestor(b,".ui-form");var g=bb.selector.query(j,".ap-directMarketing-options-row1");if(absa.directMarketing.checkIfOptionsAreSelected(b)){var f=bb.selector.queryAncestor(b,".ap-directMarketing-options-row2");if(f!=null){var d=bb.selector.query(f,".ap-directMarketing-emailCheckBox");var k=bb.selector.query(f,".ap-directMarketing-smsCheckBox");var h=bb.selector.query(f,".ap-directMarketing-voiceRecordingCheckBox");var c=bb.selector.query(f,".ap-directMarketing-noThanksCheckBox");if(phe.checkBox.isChecked(b)){var e=bb.selector.query(j,".ap-directMarketing-interested");if(phe.radioGroup.isAnyRadioItemsChecked(e)==false){phe.radioGroup.setValue(e,"N")}if(phe.checkBox.getAttribute(b,"name")=="nonCrNoThanks"){phe.checkBox.setAttribute(d,"checked","false");phe.checkBox.setAttribute(k,"checked","false");phe.checkBox.setAttribute(h,"checked","false")}else{phe.checkBox.setAttribute(c,"checked","false");phe.checkBox.setAttribute(c,"required","false")}}}}};absa.directMarketing.checkIfOptionsAreSelected=function(g){var c=bb.selector.queryAncestor(g,".ui-form");if(c!=null){var h=bb.selector.query(c,".ap-directMarketing-options-row2");var f=bb.selector.query(h,".ap-directMarketing-options-container");var d=bb.selector.queryAll(c,".ap-directMarketing-options");var e=0;for(var b=0;b<d.length;b++){if(phe.checkBox.isChecked(d[b])){e++}}if(e==0){errorMessage=f.getAttribute("requiredText");f.setAttribute("helptext",errorMessage);f.focus();bb.html.addClass(f,"ap-directMarketing-options-container ui-incorrect-value ui-form-field ap-common-paddingTop ap-common-paddingBottom");return false}else{bb.html.removeClass(f,"ui-incorrect-value ui-form-field ap-common-paddingTop ap-common-paddingBottom");f.removeAttribute("helpText");return true}}};absa.directMarketing.updateMarketingIndicators=function(b,p){var o=bb.selector.queryAncestor(b,".ui-form");if(o!=null){var j=bb.selector.query(o,".ap-directMarketing-row");if(j!=null&&j.getAttribute("data-directMarketingAlreadySetToYES")=="false"){var n=bb.selector.query(o,".ap-directMarketing-nonCrInd");var g=bb.selector.query(o,".ap-directMarketing-options-row2");if(absa.directMarketing.checkIfOptionsAreSelected(b)==true){var f=bb.selector.query(g,".ap-directMarketing-emailCheckBox");var r=bb.selector.query(g,".ap-directMarketing-smsCheckBox");var m=bb.selector.query(g,".ap-directMarketing-voiceRecordingCheckBox");var c=bb.selector.query(g,".ap-directMarketing-noThanksCheckBox");var q=phe.checkBox.isChecked(f)?"Y":"N";var e=phe.checkBox.isChecked(r)?"Y":"N";var d=phe.checkBox.isChecked(m)?"Y":"N";var k=phe.checkBox.isChecked(c)?"Y":"N";var l={nonCrInd:phe.radioGroup.getValue(n),nonCrEmailInd:q,nonCrSmsInd:e,nonCrAutoVoiceInd:d,nonCrNoThanks:k};var h={};h[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;h[gadgets.io.RequestParameters.POST_DATA]=gadgets.io.encodeValues(l);absa.io.makeRequest("proxy?pipe=genericWebservice&ws=PersonalInformationWebService&action=updateMarketingIndicator",function(t){if(t!=null){if(!t.errors.length){if(t.text!=null){var w=bb.html.createElementFromString(t.text);if(w){var u=bb.selector.query(w,".ap-directMarketing-updateMarketingIndicator-response");if(u){var v=u.getAttribute("success");if(v=="true"){p(b,true)}else{p(b,false)}}}}}else{p(b,false)}}},h)}}else{p(b,true)}}};